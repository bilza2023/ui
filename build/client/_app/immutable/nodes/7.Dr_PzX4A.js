import{S as pt,i as mt,s as vt,d as v,x as bt,G as ot,t as qt,a as kt,y as Ct,e as D,o as u,B as z,f as h,z as yt,q as A,j as q,C as G,k as V,A as wt,v as U,l as k,w as gt,N as St,O as Tt,P as $,m as nt,p as J,r as H,n as ht,I as _t,D as at,J as Z,Q as it}from"../chunks/6VfYvrwu.js";import{e as et}from"../chunks/CXMHU-kk.js";import"../chunks/IHki7fMi.js";import{p as Nt}from"../chunks/Bzh7EdXh.js";import{N as Et}from"../chunks/B_jSr6FE.js";function ut(l,e,t){const r=l.slice();return r[28]=e[t],r[29]=e,r[30]=t,r}function ct(l,e,t){const r=l.slice();return r[31]=e[t],r[32]=e,r[33]=t,r}function At(l){let e,t,r,n=l[4].toFixed(2)+"",p,m,C,b;function I(o,d){return o[6]?Pt:Ot}let g=I(l),f=g(l),N=et(l[0].deck),_=[];for(let o=0;o<N.length;o+=1)_[o]=ft(ut(l,N,o));return{c(){f.c(),e=U(),t=k("div"),r=H("Current Time: "),p=H(n),m=H("s"),C=U();for(let o=0;o<_.length;o+=1)_[o].c();b=at(),this.h()},l(o){f.l(o),e=A(o),t=q(o,"DIV",{class:!0});var d=V(t);r=J(d,"Current Time: "),p=J(d,n),m=J(d,"s"),d.forEach(v),C=A(o);for(let c=0;c<_.length;c+=1)_[c].l(o);b=at(),this.h()},h(){h(t,"class","time-display svelte-q63rq1")},m(o,d){f.m(o,d),D(o,e,d),D(o,t,d),u(t,r),u(t,p),u(t,m),D(o,C,d);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(o,d);D(o,b,d)},p(o,d){if(g===(g=I(o))&&f?f.p(o,d):(f.d(1),f=g(o),f&&(f.c(),f.m(e.parentNode,e))),d[0]&16&&n!==(n=o[4].toFixed(2)+"")&&nt(p,n),d[0]&3969){N=et(o[0].deck);let c;for(c=0;c<N.length;c+=1){const B=ut(o,N,c);_[c]?_[c].p(B,d):(_[c]=ft(B),_[c].c(),_[c].m(b.parentNode,b))}for(;c<_.length;c+=1)_[c].d(1);_.length=N.length}},d(o){o&&(v(e),v(t),v(C),v(b)),f.d(o),_t(_,o)}}}function Ut(l){let e,t="Loading deck‚Ä¶";return{c(){e=k("p"),e.textContent=t,this.h()},l(r){e=q(r,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-88q0iq"&&(e.textContent=t),this.h()},h(){h(e,"class","centered svelte-q63rq1")},m(r,n){D(r,e,n)},p:ht,d(r){r&&v(e)}}}function It(l){let e,t,r;return{c(){e=k("p"),t=H("Error: "),r=H(l[2]),this.h()},l(n){e=q(n,"P",{class:!0});var p=V(e);t=J(p,"Error: "),r=J(p,l[2]),p.forEach(v),this.h()},h(){h(e,"class","error svelte-q63rq1")},m(n,p){D(n,e,p),u(e,t),u(e,r)},p(n,p){p[0]&4&&nt(r,n[2])},d(n){n&&v(e)}}}function Ot(l){let e,t="üí° Sound not found";return{c(){e=k("h1"),e.textContent=t,this.h()},l(r){e=q(r,"H1",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1yfwsbn"&&(e.textContent=t),this.h()},h(){h(e,"class","banner svelte-q63rq1")},m(r,n){D(r,e,n)},p:ht,d(r){r&&v(e)}}}function Pt(l){let e,t,r;return{c(){e=k("div"),t=k("audio"),this.h()},l(n){e=q(n,"DIV",{class:!0});var p=V(e);t=q(p,"AUDIO",{src:!0,class:!0}),V(t).forEach(v),p.forEach(v),this.h()},h(){it(t.src,r=l[5])||h(t,"src",r),t.controls=!0,h(t,"class","w-full"),h(e,"class","audio-panel svelte-q63rq1")},m(n,p){D(n,e,p),u(e,t),l[15](t)},p(n,p){p[0]&32&&!it(t.src,r=n[5])&&h(t,"src",r)},d(n){n&&v(e),l[15](null)}}}function dt(l){let e,t,r,n="showAt:",p,m,C,b,I="0",g,f,N="Now",_,o,d=(l[31].name||l[31].type)+"",c,B,E,T,O,w,a="Delete",y,R;function X(){l[17].call(m,l[32],l[33])}function K(){return l[18](l[31])}function W(){return l[19](l[31])}function Y(){l[20].call(T,l[32],l[33])}function tt(){return l[21](l[30],l[33])}return{c(){e=k("div"),t=k("div"),r=k("span"),r.textContent=n,p=U(),m=k("input"),C=U(),b=k("button"),b.textContent=I,g=U(),f=k("button"),f.textContent=N,_=U(),o=k("span"),c=H(d),B=H(":"),E=U(),T=k("input"),O=U(),w=k("button"),w.textContent=a,this.h()},l(j){e=q(j,"DIV",{class:!0});var s=V(e);t=q(s,"DIV",{class:!0});var i=V(t);r=q(i,"SPAN",{"data-svelte-h":!0}),G(r)!=="svelte-19kgj58"&&(r.textContent=n),p=A(i),m=q(i,"INPUT",{type:!0,step:!0,class:!0}),C=A(i),b=q(i,"BUTTON",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1o00eqw"&&(b.textContent=I),g=A(i),f=q(i,"BUTTON",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-1x40msr"&&(f.textContent=N),_=A(i),o=q(i,"SPAN",{class:!0});var F=V(o);c=J(F,d),B=J(F,":"),F.forEach(v),E=A(i),T=q(i,"INPUT",{type:!0,placeholder:!0,class:!0}),O=A(i),w=q(i,"BUTTON",{class:!0,"data-svelte-h":!0}),G(w)!=="svelte-obg5v8"&&(w.textContent=a),i.forEach(v),s.forEach(v),this.h()},h(){h(m,"type","number"),h(m,"step","0.0"),h(m,"class","svelte-q63rq1"),h(b,"class","btn set-show-zero svelte-q63rq1"),h(f,"class","btn set-show svelte-q63rq1"),h(o,"class","tag svelte-q63rq1"),h(T,"type","text"),h(T,"placeholder","Edit content"),h(T,"class","svelte-q63rq1"),h(w,"class","btn delete-item svelte-q63rq1"),h(t,"class","item-row svelte-q63rq1"),h(e,"class","item svelte-q63rq1")},m(j,s){D(j,e,s),u(e,t),u(t,r),u(t,p),u(t,m),Z(m,l[31].showAt),u(t,C),u(t,b),u(t,g),u(t,f),u(t,_),u(t,o),u(o,c),u(o,B),u(t,E),u(t,T),Z(T,l[31].content),u(t,O),u(t,w),y||(R=[z(m,"input",X),z(b,"click",K),z(f,"click",W),z(T,"input",Y),z(w,"click",tt)],y=!0)},p(j,s){l=j,s[0]&1&&$(m.value)!==l[31].showAt&&Z(m,l[31].showAt),s[0]&1&&d!==(d=(l[31].name||l[31].type)+"")&&nt(c,d),s[0]&1&&T.value!==l[31].content&&Z(T,l[31].content)},d(j){j&&v(e),y=!1,ot(R)}}}function ft(l){let e,t,r,n,p=l[30]+1+"",m,C,b=l[28].type+"",I,g,f,N="Set Start = Now",_,o,d,c,B,E,T,O,w,a,y,R,X="Set End = Now",K,W,Y;function tt(){return l[16](l[30])}let j=et(l[28].data),s=[];for(let P=0;P<j.length;P+=1)s[P]=dt(ct(l,j,P));function i(){l[22].call(E,l[29],l[30])}function F(){l[23].call(a,l[29],l[30])}function M(){return l[24](l[30])}return{c(){e=k("div"),t=k("div"),r=k("strong"),n=H("Slide "),m=H(p),C=H(" ‚Äî "),I=H(b),g=U(),f=k("button"),f.textContent=N,_=U();for(let P=0;P<s.length;P+=1)s[P].c();o=U(),d=k("div"),c=k("label"),B=H(`Start:
          `),E=k("input"),T=U(),O=k("label"),w=H(`End:
          `),a=k("input"),y=U(),R=k("button"),R.textContent=X,K=U(),this.h()},l(P){e=q(P,"DIV",{class:!0});var L=V(e);t=q(L,"DIV",{class:!0});var S=V(t);r=q(S,"STRONG",{});var Q=V(r);n=J(Q,"Slide "),m=J(Q,p),C=J(Q," ‚Äî "),I=J(Q,b),Q.forEach(v),g=A(S),f=q(S,"BUTTON",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-1ydsyqv"&&(f.textContent=N),S.forEach(v),_=A(L);for(let rt=0;rt<s.length;rt+=1)s[rt].l(L);o=A(L),d=q(L,"DIV",{class:!0});var x=V(d);c=q(x,"LABEL",{});var lt=V(c);B=J(lt,`Start:
          `),E=q(lt,"INPUT",{type:!0,step:!0,class:!0}),lt.forEach(v),T=A(x),O=q(x,"LABEL",{});var st=V(O);w=J(st,`End:
          `),a=q(st,"INPUT",{type:!0,step:!0,class:!0}),st.forEach(v),y=A(x),R=q(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(R)!=="svelte-1mm1dt"&&(R.textContent=X),x.forEach(v),K=A(L),L.forEach(v),this.h()},h(){h(f,"class","btn set-start svelte-q63rq1"),f.disabled=l[30]===0,h(t,"class","slide-header svelte-q63rq1"),h(E,"type","number"),h(E,"step","0.01"),h(E,"class","svelte-q63rq1"),h(a,"type","number"),h(a,"step","0.01"),h(a,"class","svelte-q63rq1"),h(R,"class","btn set-end svelte-q63rq1"),h(d,"class","slide-controls svelte-q63rq1"),h(e,"class","slide svelte-q63rq1")},m(P,L){D(P,e,L),u(e,t),u(t,r),u(r,n),u(r,m),u(r,C),u(r,I),u(t,g),u(t,f),u(e,_);for(let S=0;S<s.length;S+=1)s[S]&&s[S].m(e,null);u(e,o),u(e,d),u(d,c),u(c,B),u(c,E),Z(E,l[28].start),u(d,T),u(d,O),u(O,w),u(O,a),Z(a,l[28].end),u(d,y),u(d,R),u(e,K),W||(Y=[z(f,"click",tt),z(E,"input",i),z(a,"input",F),z(R,"click",M)],W=!0)},p(P,L){if(l=P,L[0]&1&&b!==(b=l[28].type+"")&&nt(I,b),L[0]&3585){j=et(l[28].data);let S;for(S=0;S<j.length;S+=1){const Q=ct(l,j,S);s[S]?s[S].p(Q,L):(s[S]=dt(Q),s[S].c(),s[S].m(e,o))}for(;S<s.length;S+=1)s[S].d(1);s.length=j.length}L[0]&1&&$(E.value)!==l[28].start&&Z(E,l[28].start),L[0]&1&&$(a.value)!==l[28].end&&Z(a,l[28].end)},d(P){P&&v(e),_t(s,P),W=!1,ot(Y)}}}function Dt(l){let e,t,r,n="üí° Timing Page",p,m,C,b="Save",I,g,f="Save and Download",N,_,o,d="‚ûï Add Slide",c,B,E;e=new Et({});function T(a,y){return a[2]?It:a[1]?At:Ut}let O=T(l),w=O(l);return{c(){wt(e.$$.fragment),t=U(),r=k("h1"),r.textContent=n,p=U(),m=k("div"),C=k("button"),C.textContent=b,I=U(),g=k("button"),g.textContent=f,N=U(),w.c(),_=U(),o=k("button"),o.textContent=d,this.h()},l(a){yt(e.$$.fragment,a),t=A(a),r=q(a,"H1",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-11ydxaq"&&(r.textContent=n),p=A(a),m=q(a,"DIV",{class:!0});var y=V(m);C=q(y,"BUTTON",{class:!0,"data-svelte-h":!0}),G(C)!=="svelte-pr8j0k"&&(C.textContent=b),I=A(y),g=q(y,"BUTTON",{class:!0,"data-svelte-h":!0}),G(g)!=="svelte-1ohqyxl"&&(g.textContent=f),y.forEach(v),N=A(a),w.l(a),_=A(a),o=q(a,"BUTTON",{class:!0,"data-svelte-h":!0}),G(o)!=="svelte-1f1yiot"&&(o.textContent=d),this.h()},h(){h(r,"class","banner svelte-q63rq1"),h(C,"class","btn svelte-q63rq1"),h(g,"class","btn svelte-q63rq1"),h(m,"class","timing-actions svelte-q63rq1"),h(o,"class","btn primary add-slide svelte-q63rq1")},m(a,y){Ct(e,a,y),D(a,t,y),D(a,r,y),D(a,p,y),D(a,m,y),u(m,C),u(m,I),u(m,g),D(a,N,y),w.m(a,y),D(a,_,y),D(a,o,y),c=!0,B||(E=[z(C,"click",l[12]),z(g,"click",l[13]),z(o,"click",l[14])],B=!0)},p(a,y){O===(O=T(a))&&w?w.p(a,y):(w.d(1),w=O(a),w&&(w.c(),w.m(_.parentNode,_)))},i(a){c||(kt(e.$$.fragment,a),c=!0)},o(a){qt(e.$$.fragment,a),c=!1},d(a){a&&(v(t),v(r),v(p),v(m),v(N),v(_),v(o)),bt(e,a),w.d(a),B=!1,ot(E)}}}function Bt(l,e,t){let r;gt(l,Nt,s=>t(25,r=s));let n=null,p=!1,m="",C=null,b=0,I="/sounds/default.opus";const g=()=>{C&&t(4,b=C.currentTime),requestAnimationFrame(g)};function f(s){if(!(n!=null&&n.deck))return;const i=parseFloat(b.toFixed(2));t(0,n.deck[s].end=i,n),n.deck[s+1]&&t(0,n.deck[s+1].start=i,n),t(0,n={...n})}function N(s){if(!(n!=null&&n.deck)||s===0)return;const i=parseFloat(b.toFixed(2));t(0,n.deck[s-1].end=i,n),t(0,n.deck[s].start=i,n),t(0,n={...n})}function _(s){s.showAt=parseFloat(b.toFixed(1)),t(0,n={...n})}function o(s){s.showAt=0,t(0,n={...n})}function d(s,i){n!=null&&n.deck&&(n.deck[s].data.splice(i,1),t(0,n={...n}))}async function c(){const s=r.url.searchParams.get("filename")??"",i=await fetch(`/admin/timings?filename=${encodeURIComponent(s)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){let F;try{const M=await i.json();F=M.error??JSON.stringify(M)}catch{F=await i.text()}return alert(`‚ùå Save failed: ${F}`),!1}return alert("‚úÖ Save successful"),!0}async function B(){await c()&&E()}function E(){const s=r.url.searchParams.get("filename")??"deck",i=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),F=URL.createObjectURL(i),M=document.createElement("a");M.href=F,M.download=`${s}.json`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(F)}let T=!1;St(async()=>{g();const s=r.url.searchParams.get("filename");if(!s){t(2,m="No filename provided");return}try{(await fetch(`/sounds/${s}.opus`,{method:"HEAD"})).ok&&(t(5,I=`/sounds/${s}.opus`),t(6,T=!0))}catch{}try{const i=await fetch(`/admin/timings?filename=${encodeURIComponent(s)}`);if(!i.ok){const F=await i.json();throw new Error(F.error||i.statusText)}t(0,n=await i.json()),t(1,p=!0)}catch(i){t(2,m=i.message)}});function O(){if(!(n!=null&&n.deck))return;const s={type:"titleSlide",start:0,end:0,data:[{type:"text",content:"New Slide Content",showAt:0}]};n.deck.push(s),t(0,n={...n})}function w(s){Tt[s?"unshift":"push"](()=>{C=s,t(3,C)})}const a=s=>N(s);function y(s,i){s[i].showAt=$(this.value),t(0,n)}const R=s=>o(s),X=s=>_(s);function K(s,i){s[i].content=this.value,t(0,n)}const W=(s,i)=>d(s,i);function Y(s,i){s[i].start=$(this.value),t(0,n)}function tt(s,i){s[i].end=$(this.value),t(0,n)}return[n,p,m,C,b,I,T,f,N,_,o,d,c,B,O,w,a,y,R,X,K,W,Y,tt,s=>f(s)]}class Jt extends pt{constructor(e){super(),mt(this,e,Bt,Dt,vt,{},null,[-1,-1])}}export{Jt as component};
