import{S as N,i as P,s as A,d as u,o as h,p as _,K as v,c as q,b as m,r as d,H as z,z as C,u as I,e as g,h as M,A as k,j as y,k as E,l as U,D as x,J as $,n as p,w as H,m as O,q as F,v as J,x as V}from"../chunks/CpLwJuMr.js";import"../chunks/IHki7fMi.js";import{p as G}from"../chunks/B5TTx4t_.js";import{S as K}from"../chunks/DFdC71yn.js";const w=new Map;async function R(l,{fetch:t=globalThis.fetch}={}){if(!l)throw new Error("deckService.getDeck: filename required");if(w.has(l))return w.get(l);const r=`/decks/${l}.json`;let e;try{e=await t(r)}catch(o){throw new Error(`Network error while fetching ${r}: ${o.message}`)}if(!e.ok){const o=e.status===404?"not found":`status ${e.status}`;throw new Error(`Deck "${l}" ${o}`)}let n;try{n=await e.json()}catch(o){throw new Error(`Invalid JSON for deck "${l}": ${o.message}`)}if(n.version!=="deck-v1"||!Array.isArray(n.deck))throw new Error(`Deck "${l}" failed basic schema check`);return w.set(l,n),n}async function B({url:l,fetch:t}){const r=l.searchParams.get("filename");if(!r)return{deck:null,background:null,timed:!1,error:"Filename parameter is required."};try{const e=await R(r,{fetch:t}),n=e.deck.some(o=>o.data.some(c=>c.showAt&&c.showAt>0));return{deck:e.deck,background:e.background??null,timed:n,error:null}}catch(e){return{deck:null,background:null,timed:!1,error:e.message}}}const ne=Object.freeze(Object.defineProperty({__proto__:null,load:B},Symbol.toStringTag,{value:"Module"}));function T(l){let t,r,e,n;const o=[X,W,Q],c=[];function f(s,a){return s[0]?0:s[3]?1:2}return t=f(l),r=c[t]=o[t](l),{c(){r.c(),e=k()},l(s){r.l(s),e=k()},m(s,a){c[t].m(s,a),m(s,e,a),n=!0},p(s,a){let i=t;t=f(s),t===i?c[t].p(s,a):($(),h(c[i],1,1,()=>{c[i]=null}),v(),r=c[t],r?r.p(s,a):(r=c[t]=o[t](s),r.c()),_(r,1),r.m(e.parentNode,e))},i(s){n||(_(r),n=!0)},o(s){h(r),n=!1},d(s){s&&u(e),c[t].d(s)}}}function Q(l){let t,r='<p class="text-lg font-medium text-gray-600">Loadingâ€¦</p>';return{c(){t=y("div"),t.innerHTML=r,this.h()},l(e){t=g(e,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-draa8r"&&(t.innerHTML=r),this.h()},h(){d(t,"class","flex items-center justify-center h-full p-8 svelte-9znuby")},m(e,n){m(e,t,n)},p,i:p,o:p,d(e){e&&u(t)}}}function W(l){let t=l[1],r,e,n=j(l);return{c(){n.c(),r=k()},l(o){n.l(o),r=k()},m(o,c){n.m(o,c),m(o,r,c),e=!0},p(o,c){c&2&&A(t,t=o[1])?($(),h(n,1,1,p),v(),n=j(o),n.c(),_(n,1),n.m(r.parentNode,r)):n.p(o,c)},i(o){e||(_(n),e=!0)},o(o){h(n),e=!1},d(o){o&&u(r),n.d(o)}}}function X(l){let t,r='<p class="text-lg font-semibold text-gray-700">Content not found.</p>';return{c(){t=y("div"),t.innerHTML=r,this.h()},l(e){t=g(e,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-pzckeo"&&(t.innerHTML=r),this.h()},h(){d(t,"class","flex items-center justify-center h-full p-8 svelte-9znuby")},m(e,n){m(e,t,n)},p,i:p,o:p,d(e){e&&u(t)}}}function j(l){let t,r;return t=new K({props:{deck:l[3],soundUrl:l[1],background:l[4]}}),{c(){V(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,n){F(t,e,n),r=!0},p(e,n){const o={};n&2&&(o.soundUrl=e[1]),t.$set(o)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){O(t,e)}}}function Y(l){let t,r,e,n,o,c,f,s=l[2]&&T(l);return{c(){t=y("meta"),r=E(),e=y("img"),o=E(),s&&s.c(),c=k(),this.h()},l(a){const i=I("svelte-11evgey",document.head);t=g(i,"META",{name:!0,content:!0}),i.forEach(u),r=M(a),e=g(a,"IMG",{src:!0,alt:!0,style:!0,width:!0,height:!0}),o=M(a),s&&s.l(a),c=k(),this.h()},h(){d(t,"name","robots"),d(t,"content","index,follow"),z(e.src,n="/images/taleem.webp")||d(e,"src",n),d(e,"alt","Taleem Slide Preview"),C(e,"display","none"),d(e,"width","1200"),d(e,"height","630")},m(a,i){q(document.head,t),m(a,r,i),m(a,e,i),m(a,o,i),s&&s.m(a,i),m(a,c,i),f=!0},p(a,[i]){a[2]?s?(s.p(a,i),i&4&&_(s,1)):(s=T(a),s.c(),_(s,1),s.m(c.parentNode,c)):s&&($(),h(s,1,1,()=>{s=null}),v())},i(a){f||(_(s),f=!0)},o(a){h(s),f=!1},d(a){a&&(u(r),u(e),u(o),u(c)),u(t),s&&s.d(a)}}}function Z(l,t,r){let e;U(l,G,b=>r(6,e=b));let{data:n}=t;const{deck:o,background:c,error:f}=n;let s=!1,a="/media/sounds/music.opus",i=!1;return x(()=>{console.log("deck",o);const S=new URLSearchParams(e.url.search).get("filename");if(!S)r(0,s=!0);else{const D=`${S}.opus`;fetch(`/sounds/${D}`,{method:"HEAD"}).then(L=>{L.ok&&r(1,a=`/sounds/${D}`)}).catch(()=>{})}r(2,i=!0)}),l.$$set=b=>{"data"in b&&r(5,n=b.data)},[s,a,i,o,c,n]}class oe extends N{constructor(t){super(),P(this,t,Z,Y,A,{data:5})}}export{oe as component,ne as universal};
