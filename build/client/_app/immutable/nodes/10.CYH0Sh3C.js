import{S as Yt,i as Zt,s as $t,O as Qt,T as es,d as c,v as ts,D as ss,t as ls,a as as,e as me,U as rs,F as Te,f as Dt,h as e,w as ns,J as Z,V as cs,x as t,j as s,k as u,A as D,m as p,l as A,y as os,o as l,q as f,p as V,z as is}from"../chunks/MRdXX-TE.js";import"../chunks/IHki7fMi.js";import{P as us}from"../chunks/CPRo9sjY.js";function Kt(r){let i,a;return{c(){i=l("p"),a=V(r[8]),this.h()},l(b){i=s(b,"P",{class:!0});var d=u(i);a=A(d,r[8]),d.forEach(c),this.h()},h(){t(i,"class","toast ok svelte-13rccjb")},m(b,d){Dt(b,i,d),e(i,a)},p(b,d){d&256&&me(a,b[8])},d(b){b&&c(i)}}}function Xt(r){let i,a;return{c(){i=l("p"),a=V(r[9]),this.h()},l(b){i=s(b,"P",{class:!0});var d=u(i);a=A(d,r[9]),d.forEach(c),this.h()},h(){t(i,"class","toast err svelte-13rccjb")},m(b,d){Dt(b,i,d),e(i,a)},p(b,d){d&512&&me(a,b[9])},d(b){b&&c(i)}}}function ds(r){let i,a,b='<div class="container svelte-13rccjb"><div class="title flex justify-center w-full my-5 svelte-13rccjb"><h1 class=" svelte-13rccjb">Upload Deck</h1></div></div>',d,S,N,v,m,G,E,q=(r[0].tcode||"—")+"",z,y,L,xe="•",we,J,Ie,ue,de=(r[0].chapterNo??"—")+"",ge,Pe,K,o="•",w,g,je,Ae,Ve=(r[0].exerciseSlug||"—")+"",Fe,Qe,pe,St="•",We,fe,Ye,ye,Le=(r[1]?r[1].name:"—")+"",Be,Ze,Ce,Ee,_,$,ve,Nt="Path",$e,X,et,tt,ee,he,Tt="Metadata",st,U,te,se,wt="Status",lt,O,at,le,ae,It="Tags (CSV)",rt,x,nt,re,ne,Pt="Description",ct,F,ot,B,be,At="Deck File",it,R,ce,Vt="Choose file",ut,Q,dt,T,yt="Drop a file here or click above.",pt,H,oe,Lt="Filename (auto)",ft,W,vt,_e,Ut="Derived from the chosen file (without .json/.js)",ht,ie,Y,Ue=r[7]?"Uploading…":"Upload",Re,He,bt,M,_t,mt,Me,I,gt,Ot;function Wt(n){r[16](n)}let xt={};r[0]!==void 0&&(xt.value=r[0]),X=new us({props:xt}),Qt.push(()=>es(X,"value",Wt));let j=r[8]&&Kt(r),C=r[9]&&Xt(r);return{c(){i=l("section"),a=l("header"),a.innerHTML=b,d=f(),S=l("div"),N=l("div"),v=l("div"),m=l("span"),G=V("Tcode: "),E=l("strong"),z=V(q),y=f(),L=l("span"),L.textContent=xe,we=f(),J=l("span"),Ie=V("Chapter#: "),ue=l("strong"),ge=V(de),Pe=f(),K=l("span"),K.textContent=o,w=f(),g=l("span"),je=V("Exercise: "),Ae=l("strong"),Fe=V(Ve),Qe=f(),pe=l("span"),pe.textContent=St,We=f(),fe=l("span"),Ye=V("File: "),ye=l("strong"),Be=V(Le),Ze=f(),Ce=l("main"),Ee=l("div"),_=l("form"),$=l("div"),ve=l("h2"),ve.textContent=Nt,$e=f(),is(X.$$.fragment),tt=f(),ee=l("div"),he=l("h2"),he.textContent=Tt,st=f(),U=l("div"),te=l("div"),se=l("label"),se.textContent=wt,lt=f(),O=l("input"),at=f(),le=l("div"),ae=l("label"),ae.textContent=It,rt=f(),x=l("input"),nt=f(),re=l("div"),ne=l("label"),ne.textContent=Pt,ct=f(),F=l("textarea"),ot=f(),B=l("div"),be=l("h2"),be.textContent=At,it=f(),R=l("div"),ce=l("label"),ce.textContent=Vt,ut=f(),Q=l("input"),dt=f(),T=l("div"),T.textContent=yt,pt=f(),H=l("div"),oe=l("label"),oe.textContent=Lt,ft=f(),W=l("input"),vt=f(),_e=l("small"),_e.textContent=Ut,ht=f(),ie=l("div"),Y=l("button"),Re=V(Ue),bt=f(),M=l("button"),_t=V("Clear"),mt=f(),j&&j.c(),Me=f(),C&&C.c(),this.h()},l(n){i=s(n,"SECTION",{class:!0});var h=u(i);a=s(h,"HEADER",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-kraw6n"&&(a.innerHTML=b),d=p(h),S=s(h,"DIV",{class:!0});var Oe=u(S);N=s(Oe,"DIV",{class:!0});var Ft=u(N);v=s(Ft,"DIV",{class:!0});var k=u(v);m=s(k,"SPAN",{class:!0});var jt=u(m);G=A(jt,"Tcode: "),E=s(jt,"STRONG",{});var Bt=u(E);z=A(Bt,q),Bt.forEach(c),jt.forEach(c),y=p(k),L=s(k,"SPAN",{class:!0,"data-svelte-h":!0}),D(L)!=="svelte-13dw89n"&&(L.textContent=xe),we=p(k),J=s(k,"SPAN",{class:!0});var Ct=u(J);Ie=A(Ct,"Chapter#: "),ue=s(Ct,"STRONG",{});var Rt=u(ue);ge=A(Rt,de),Rt.forEach(c),Ct.forEach(c),Pe=p(k),K=s(k,"SPAN",{class:!0,"data-svelte-h":!0}),D(K)!=="svelte-13dw89n"&&(K.textContent=o),w=p(k),g=s(k,"SPAN",{class:!0});var Et=u(g);je=A(Et,"Exercise: "),Ae=s(Et,"STRONG",{});var Ht=u(Ae);Fe=A(Ht,Ve),Ht.forEach(c),Et.forEach(c),Qe=p(k),pe=s(k,"SPAN",{class:!0,"data-svelte-h":!0}),D(pe)!=="svelte-13dw89n"&&(pe.textContent=St),We=p(k),fe=s(k,"SPAN",{class:!0});var kt=u(fe);Ye=A(kt,"File: "),ye=s(kt,"STRONG",{});var Mt=u(ye);Be=A(Mt,Le),Mt.forEach(c),kt.forEach(c),k.forEach(c),Ft.forEach(c),Oe.forEach(c),Ze=p(h),Ce=s(h,"MAIN",{class:!0});var Gt=u(Ce);Ee=s(Gt,"DIV",{class:!0});var qt=u(Ee);_=s(qt,"FORM",{class:!0});var P=u(_);$=s(P,"DIV",{class:!0});var Ge=u($);ve=s(Ge,"H2",{class:!0,"data-svelte-h":!0}),D(ve)!=="svelte-11a9pmy"&&(ve.textContent=Nt),$e=p(Ge),os(X.$$.fragment,Ge),Ge.forEach(c),tt=p(P),ee=s(P,"DIV",{class:!0});var qe=u(ee);he=s(qe,"H2",{class:!0,"data-svelte-h":!0}),D(he)!=="svelte-g0jcho"&&(he.textContent=Tt),st=p(qe),U=s(qe,"DIV",{class:!0});var ke=u(U);te=s(ke,"DIV",{class:!0});var ze=u(te);se=s(ze,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(se)!=="svelte-15lfxni"&&(se.textContent=wt),lt=p(ze),O=s(ze,"INPUT",{id:!0,placeholder:!0,class:!0}),ze.forEach(c),at=p(ke),le=s(ke,"DIV",{class:!0});var Je=u(le);ae=s(Je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(ae)!=="svelte-74pu4x"&&(ae.textContent=It),rt=p(Je),x=s(Je,"INPUT",{id:!0,placeholder:!0,class:!0}),Je.forEach(c),nt=p(ke),re=s(ke,"DIV",{class:!0});var Ke=u(re);ne=s(Ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(ne)!=="svelte-1tds9bi"&&(ne.textContent=Pt),ct=p(Ke),F=s(Ke,"TEXTAREA",{id:!0,rows:!0,class:!0}),u(F).forEach(c),Ke.forEach(c),ke.forEach(c),qe.forEach(c),ot=p(P),B=s(P,"DIV",{class:!0});var De=u(B);be=s(De,"H2",{class:!0,"data-svelte-h":!0}),D(be)!=="svelte-1tswkfa"&&(be.textContent=At),it=p(De),R=s(De,"DIV",{class:!0});var Se=u(R);ce=s(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(ce)!=="svelte-jtdg33"&&(ce.textContent=Vt),ut=p(Se),Q=s(Se,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),dt=p(Se),T=s(Se,"DIV",{class:!0,role:!0,"aria-label":!0,tabindex:!0,"data-svelte-h":!0}),D(T)!=="svelte-n9td1h"&&(T.textContent=yt),Se.forEach(c),pt=p(De),H=s(De,"DIV",{class:!0});var Ne=u(H);oe=s(Ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(oe)!=="svelte-1c30r00"&&(oe.textContent=Lt),ft=p(Ne),W=s(Ne,"INPUT",{id:!0,class:!0}),vt=p(Ne),_e=s(Ne,"SMALL",{class:!0,"data-svelte-h":!0}),D(_e)!=="svelte-1c66ez3"&&(_e.textContent=Ut),Ne.forEach(c),De.forEach(c),ht=p(P),ie=s(P,"DIV",{class:!0});var Xe=u(ie);Y=s(Xe,"BUTTON",{class:!0,type:!0});var zt=u(Y);Re=A(zt,Ue),zt.forEach(c),bt=p(Xe),M=s(Xe,"BUTTON",{type:!0,class:!0});var Jt=u(M);_t=A(Jt,"Clear"),Jt.forEach(c),Xe.forEach(c),mt=p(P),j&&j.l(P),Me=p(P),C&&C.l(P),P.forEach(c),qt.forEach(c),Gt.forEach(c),h.forEach(c),this.h()},h(){t(a,"class","header svelte-13rccjb"),t(m,"class","chip svelte-13rccjb"),t(L,"class","sep svelte-13rccjb"),t(J,"class","chip svelte-13rccjb"),t(K,"class","sep svelte-13rccjb"),t(g,"class","chip svelte-13rccjb"),t(pe,"class","sep svelte-13rccjb"),t(fe,"class","chip svelte-13rccjb"),t(v,"class","summary svelte-13rccjb"),t(N,"class","container toolbar-inner svelte-13rccjb"),t(S,"class","toolbar svelte-13rccjb"),t(ve,"class","group-title svelte-13rccjb"),t($,"class","group svelte-13rccjb"),t(he,"class","group-title svelte-13rccjb"),t(se,"for","status"),t(se,"class","svelte-13rccjb"),t(O,"id","status"),t(O,"placeholder","ready | draft | hidden"),t(O,"class","svelte-13rccjb"),t(te,"class","row svelte-13rccjb"),t(ae,"for","tags"),t(ae,"class","svelte-13rccjb"),t(x,"id","tags"),t(x,"placeholder","geometry, class9"),t(x,"class","svelte-13rccjb"),t(le,"class","row svelte-13rccjb"),t(ne,"for","description"),t(ne,"class","svelte-13rccjb"),t(F,"id","description"),t(F,"rows","2"),t(F,"class","svelte-13rccjb"),t(re,"class","row wide svelte-13rccjb"),t(U,"class","grid-3 svelte-13rccjb"),t(ee,"class","group svelte-13rccjb"),t(be,"class","group-title svelte-13rccjb"),t(ce,"for","file"),t(ce,"class","svelte-13rccjb"),t(Q,"id","file"),t(Q,"type","file"),t(Q,"accept",".json,.js"),t(Q,"class","svelte-13rccjb"),t(T,"class","drop svelte-13rccjb"),t(T,"role","region"),t(T,"aria-label","File drop zone"),t(T,"tabindex","0"),t(R,"class","row svelte-13rccjb"),t(oe,"for","filename"),t(oe,"class","svelte-13rccjb"),t(W,"id","filename"),W.value=r[5],W.readOnly=!0,t(W,"class","svelte-13rccjb"),t(_e,"class","hint svelte-13rccjb"),t(H,"class","row svelte-13rccjb"),t(B,"class","group svelte-13rccjb"),t(Y,"class","btn btn-primary svelte-13rccjb"),t(Y,"type","submit"),Y.disabled=He=r[7]||!r[10],t(M,"type","button"),t(M,"class","btn svelte-13rccjb"),M.disabled=r[7],t(ie,"class","actions svelte-13rccjb"),t(_,"class","form svelte-13rccjb"),t(Ee,"class","panel svelte-13rccjb"),t(Ce,"class","container svelte-13rccjb"),t(i,"class","page dark svelte-13rccjb")},m(n,h){Dt(n,i,h),e(i,a),e(i,d),e(i,S),e(S,N),e(N,v),e(v,m),e(m,G),e(m,E),e(E,z),e(v,y),e(v,L),e(v,we),e(v,J),e(J,Ie),e(J,ue),e(ue,ge),e(v,Pe),e(v,K),e(v,w),e(v,g),e(g,je),e(g,Ae),e(Ae,Fe),e(v,Qe),e(v,pe),e(v,We),e(v,fe),e(fe,Ye),e(fe,ye),e(ye,Be),e(i,Ze),e(i,Ce),e(Ce,Ee),e(Ee,_),e(_,$),e($,ve),e($,$e),ns(X,$,null),e(_,tt),e(_,ee),e(ee,he),e(ee,st),e(ee,U),e(U,te),e(te,se),e(te,lt),e(te,O),Te(O,r[2]),e(U,at),e(U,le),e(le,ae),e(le,rt),e(le,x),Te(x,r[3]),e(U,nt),e(U,re),e(re,ne),e(re,ct),e(re,F),Te(F,r[4]),e(_,ot),e(_,B),e(B,be),e(B,it),e(B,R),e(R,ce),e(R,ut),e(R,Q),r[20](Q),e(R,dt),e(R,T),e(B,pt),e(B,H),e(H,oe),e(H,ft),e(H,W),e(H,vt),e(H,_e),e(_,ht),e(_,ie),e(ie,Y),e(Y,Re),e(ie,bt),e(ie,M),e(M,_t),e(_,mt),j&&j.m(_,null),e(_,Me),C&&C.m(_,null),I=!0,gt||(Ot=[Z(O,"input",r[17]),Z(x,"input",r[18]),Z(F,"input",r[19]),Z(Q,"change",r[12]),Z(T,"drop",r[13]),Z(T,"dragover",ps),Z(T,"keydown",r[14]),Z(M,"click",r[11]),Z(_,"submit",cs(r[15]))],gt=!0)},p(n,[h]){(!I||h&1)&&q!==(q=(n[0].tcode||"—")+"")&&me(z,q),(!I||h&1)&&de!==(de=(n[0].chapterNo??"—")+"")&&me(ge,de),(!I||h&1)&&Ve!==(Ve=(n[0].exerciseSlug||"—")+"")&&me(Fe,Ve),(!I||h&2)&&Le!==(Le=(n[1]?n[1].name:"—")+"")&&me(Be,Le);const Oe={};!et&&h&1&&(et=!0,Oe.value=n[0],rs(()=>et=!1)),X.$set(Oe),h&4&&O.value!==n[2]&&Te(O,n[2]),h&8&&x.value!==n[3]&&Te(x,n[3]),h&16&&Te(F,n[4]),(!I||h&32&&W.value!==n[5])&&(W.value=n[5]),(!I||h&128)&&Ue!==(Ue=n[7]?"Uploading…":"Upload")&&me(Re,Ue),(!I||h&1152&&He!==(He=n[7]||!n[10]))&&(Y.disabled=He),(!I||h&128)&&(M.disabled=n[7]),n[8]?j?j.p(n,h):(j=Kt(n),j.c(),j.m(_,Me)):j&&(j.d(1),j=null),n[9]?C?C.p(n,h):(C=Xt(n),C.c(),C.m(_,null)):C&&(C.d(1),C=null)},i(n){I||(as(X.$$.fragment,n),I=!0)},o(n){ls(X.$$.fragment,n),I=!1},d(n){n&&c(i),ts(X),r[20](null),j&&j.d(),C&&C.d(),gt=!1,ss(Ot)}}}function ps(r){r.preventDefault()}function fs(r,i,a){let b,d={tcode:"",chapterSlug:"",chapterNo:null,exerciseSlug:""},S="",N="",v="",m=null,G="",E,q=!1,z="",y="";function L(){a(0,d={tcode:"",chapterSlug:"",chapterNo:null,exerciseSlug:""}),a(2,S=""),a(3,N=""),a(4,v=""),a(1,m=null),a(5,G=""),E&&a(6,E.value="",E),a(8,z=""),a(9,y="")}function xe(o){const w=o.target.files&&o.target.files[0]?o.target.files[0]:null;a(1,m=w),a(5,G=w?w.name.replace(/\.(json|js)$/i,""):"")}function we(o){var g,je;o.preventDefault();const w=((je=(g=o.dataTransfer)==null?void 0:g.files)==null?void 0:je[0])??null;a(1,m=w||null),a(5,G=m?m.name.replace(/\.(json|js)$/i,""):"")}function J(o){(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),E==null||E.click())}async function Ie(){if(a(9,y=""),a(8,z=""),!b){a(9,y="Please fill required fields.");return}a(7,q=!0);try{const o=new FormData;o.append("tcode",d.tcode),o.append("chapter",String(d.chapterNo)),o.append("exercise",d.exerciseSlug),S.trim()&&o.append("status",S.trim()),N.trim()&&o.append("tags",N.trim()),v.trim()&&o.append("description",v.trim()),o.append("file",m),o.append("filename",G||m.name.replace(/\.(json|js)$/i,""));const w=await fetch("/admin/upload",{method:"POST",body:o}),g=await w.json();w.ok?(a(8,z=`Uploaded ${(g==null?void 0:g.uploaded)??1} deck.`),L()):a(9,y=(g==null?void 0:g.error)??"Upload failed.")}catch(o){a(9,y=(o==null?void 0:o.message)??"Network error.")}finally{a(7,q=!1)}}function ue(o){d=o,a(0,d)}function de(){S=this.value,a(2,S)}function ge(){N=this.value,a(3,N)}function Pe(){v=this.value,a(4,v)}function K(o){Qt[o?"unshift":"push"](()=>{E=o,a(6,E)})}return r.$$.update=()=>{r.$$.dirty&3&&a(10,b=!!d.tcode&&!!d.chapterNo&&!!d.exerciseSlug&&!!m)},[d,m,S,N,v,G,E,q,z,y,b,L,xe,we,J,Ie,ue,de,ge,Pe,K]}class _s extends Yt{constructor(i){super(),Zt(this,i,fs,ds,$t,{})}}export{_s as component};
