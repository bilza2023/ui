import{S as be,i as he,s as ve,n as re,d as v,E as me,G as ue,f as l,m as de,e as A,o as n,J as W,C as _e,q as k,j as p,k as T,B as j,p as X,v as z,l as d,r as Y}from"../chunks/Z9DZtfMg.js";import"../chunks/IHki7fMi.js";import{g as qe}from"../chunks/29W-Tj8B.js";function ce(o){let s,t;return{c(){s=d("div"),t=Y(o[3]),this.h()},l(e){s=p(e,"DIV",{class:!0,"aria-live":!0});var r=T(s);t=X(r,o[3]),r.forEach(v),this.h()},h(){l(s,"class","error svelte-1qzbqb4"),l(s,"aria-live","polite")},m(e,r){A(e,s,r),n(s,t)},p(e,r){r&8&&de(t,e[3])},d(e){e&&v(s)}}}function fe(o){let s;return{c(){s=Y("Signing in‚Ä¶")},l(t){s=X(t,"Signing in‚Ä¶")},m(t,e){A(t,s,e)},d(t){t&&v(s)}}}function pe(o){let s;return{c(){s=Y("Log in")},l(t){s=X(t,"Log in")},m(t,e){A(t,s,e)},d(t){t&&v(s)}}}function ge(o){let s,t,e,r,H="üåê Taleem.Help",y,_,D="Log in",B,C,E,I="Email",w,a,Z,L,N,se="Password",x,S,b,U,$,q,O=o[4]?"Hide":"Show",V,ee,M,m,J,F,te,P,ae='No account? <a href="/register" class="svelte-1qzbqb4">Create one</a>',le,ne,u=o[3]&&ce(o),c=o[2]&&fe(),f=!o[2]&&pe();return{c(){s=z(),t=d("div"),e=d("form"),r=d("h1"),r.textContent=H,y=z(),_=d("h1"),_.textContent=D,B=z(),C=d("label"),E=d("span"),E.textContent=I,w=z(),a=d("input"),Z=z(),L=d("label"),N=d("span"),N.textContent=se,x=z(),S=d("div"),b=d("input"),$=z(),q=d("button"),V=Y(O),ee=z(),u&&u.c(),M=z(),m=d("button"),c&&c.c(),J=z(),f&&f.c(),te=z(),P=d("p"),P.innerHTML=ae,this.h()},l(i){_e("svelte-10qpq3o",document.head).forEach(v),s=k(i),t=p(i,"DIV",{class:!0});var oe=T(t);e=p(oe,"FORM",{class:!0,autocomplete:!0});var h=T(e);r=p(h,"H1",{class:!0,"data-svelte-h":!0}),j(r)!=="svelte-8xlis3"&&(r.textContent=H),y=k(h),_=p(h,"H1",{class:!0,"data-svelte-h":!0}),j(_)!=="svelte-1x2klrl"&&(_.textContent=D),B=k(h),C=p(h,"LABEL",{class:!0});var G=T(C);E=p(G,"SPAN",{class:!0,"data-svelte-h":!0}),j(E)!=="svelte-1bg9cgq"&&(E.textContent=I),w=k(G),a=p(G,"INPUT",{type:!0,autocomplete:!0,autocapitalize:!0,spellcheck:!0,inputmode:!0,placeholder:!0,class:!0}),G.forEach(v),Z=k(h),L=p(h,"LABEL",{class:!0});var R=T(L);N=p(R,"SPAN",{class:!0,"data-svelte-h":!0}),j(N)!=="svelte-1kvjhoz"&&(N.textContent=se),x=k(R),S=p(R,"DIV",{class:!0});var K=T(S);b=p(K,"INPUT",{type:!0,minlength:!0,autocomplete:!0,placeholder:!0,class:!0}),$=k(K),q=p(K,"BUTTON",{type:!0,class:!0,"aria-pressed":!0,"aria-label":!0});var ie=T(q);V=X(ie,O),ie.forEach(v),K.forEach(v),R.forEach(v),ee=k(h),u&&u.l(h),M=k(h),m=p(h,"BUTTON",{class:!0,type:!0});var Q=T(m);c&&c.l(Q),J=k(Q),f&&f.l(Q),Q.forEach(v),te=k(h),P=p(h,"P",{class:!0,"data-svelte-h":!0}),j(P)!=="svelte-wvdxtg"&&(P.innerHTML=ae),h.forEach(v),oe.forEach(v),this.h()},h(){document.title="Login",l(r,"class","text-center svelte-1qzbqb4"),l(_,"class","svelte-1qzbqb4"),l(E,"class","svelte-1qzbqb4"),l(a,"type","email"),a.required=!0,l(a,"autocomplete","email"),l(a,"autocapitalize","off"),l(a,"spellcheck","false"),l(a,"inputmode","email"),l(a,"placeholder","you@example.com"),l(a,"class","svelte-1qzbqb4"),l(C,"class","svelte-1qzbqb4"),l(N,"class","svelte-1qzbqb4"),l(b,"type",U=o[4]?"text":"password"),b.value=o[1],b.required=!0,l(b,"minlength","6"),l(b,"autocomplete","current-password"),l(b,"placeholder","‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"),l(b,"class","svelte-1qzbqb4"),l(q,"type","button"),l(q,"class","toggle svelte-1qzbqb4"),l(q,"aria-pressed",o[4]),l(q,"aria-label","Toggle password visibility"),l(S,"class","pwd svelte-1qzbqb4"),l(L,"class","svelte-1qzbqb4"),l(m,"class","submit svelte-1qzbqb4"),l(m,"type","submit"),m.disabled=F=o[2]||!o[0]||!o[1],l(P,"class","hint svelte-1qzbqb4"),l(e,"class","card svelte-1qzbqb4"),l(e,"autocomplete","on"),e.noValidate=!0,l(t,"class","wrap svelte-1qzbqb4")},m(i,g){A(i,s,g),A(i,t,g),n(t,e),n(e,r),n(e,y),n(e,_),n(e,B),n(e,C),n(C,E),n(C,w),n(C,a),ue(a,o[0]),n(e,Z),n(e,L),n(L,N),n(L,x),n(L,S),n(S,b),n(S,$),n(S,q),n(q,V),n(e,ee),u&&u.m(e,null),n(e,M),n(e,m),c&&c.m(m,null),n(m,J),f&&f.m(m,null),n(e,te),n(e,P),le||(ne=[W(a,"input",o[6]),W(b,"input",o[7]),W(q,"click",o[8]),W(e,"submit",o[5])],le=!0)},p(i,[g]){g&1&&a.value!==i[0]&&ue(a,i[0]),g&16&&U!==(U=i[4]?"text":"password")&&l(b,"type",U),g&2&&b.value!==i[1]&&(b.value=i[1]),g&16&&O!==(O=i[4]?"Hide":"Show")&&de(V,O),g&16&&l(q,"aria-pressed",i[4]),i[3]?u?u.p(i,g):(u=ce(i),u.c(),u.m(e,M)):u&&(u.d(1),u=null),i[2]?c||(c=fe(),c.c(),c.m(m,J)):c&&(c.d(1),c=null),i[2]?f&&(f.d(1),f=null):f||(f=pe(),f.c(),f.m(m,null)),g&7&&F!==(F=i[2]||!i[0]||!i[1])&&(m.disabled=F)},i:re,o:re,d(i){i&&(v(s),v(t)),u&&u.d(),c&&c.d(),f&&f.d(),le=!1,me(ne)}}}function ke(o,s,t){let e="",r="",H=!1,y="",_=!1;async function D(I){I.preventDefault(),t(3,y=""),t(2,H=!0);try{const w=await fetch("/api/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await w.json().catch(()=>({}));if(!w.ok){t(3,y=(a==null?void 0:a.detail)||(a==null?void 0:a.error)||"Login failed.");return}try{a!=null&&a.token&&localStorage.setItem("token",a.token)}catch{}await qe("/")}catch(w){t(3,y=(w==null?void 0:w.message)??"Network error.")}finally{t(2,H=!1)}}function B(){e=this.value,t(0,e)}return[e,r,H,y,_,D,B,I=>t(1,r=I.target.value),()=>t(4,_=!_)]}class ye extends be{constructor(s){super(),he(this,s,ke,ge,ve,{})}}export{ye as component};
