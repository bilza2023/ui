import{S as me,i as ve,s as ke,d as y,p as be,r as ae,o as ye,m as ge,q as Ce,b as B,c as i,B as J,u as N,v,w as we,h as I,e as g,x as G,f as V,y as te,z as Te,k as O,j as C,l as Ee,C as Ne,D as Se,E as $,a as ne,g as z,t as H,n as he,A as _e,F as Z,G as ie}from"../chunks/C7a5JP4Z.js";import{e as le}from"../chunks/DyS28_Hb.js";import"../chunks/IHki7fMi.js";import{p as Ue}from"../chunks/Vex8-AdU.js";import{N as Ae}from"../chunks/C7fdD7_K.js";function ue(l,t,e){const s=l.slice();return s[27]=t[e],s[28]=t,s[29]=e,s}function ce(l,t,e){const s=l.slice();return s[30]=t[e],s[31]=t,s[32]=e,s}function Ie(l){let t,e,s,n=l[4].toFixed(2)+"",_,p,w,k;function D(a,c){return a[6]?je:Pe}let T=D(l),f=T(l),A=le(l[0].deck),h=[];for(let a=0;a<A.length;a+=1)h[a]=fe(ue(l,A,a));return{c(){f.c(),t=O(),e=C("div"),s=H("Current Time: "),_=H(n),p=H("s"),w=O();for(let a=0;a<h.length;a+=1)h[a].c();k=te(),this.h()},l(a){f.l(a),t=I(a),e=g(a,"DIV",{class:!0});var c=V(e);s=z(c,"Current Time: "),_=z(c,n),p=z(c,"s"),c.forEach(y),w=I(a);for(let d=0;d<h.length;d+=1)h[d].l(a);k=te(),this.h()},h(){v(e,"class","time-display svelte-lskhmy")},m(a,c){f.m(a,c),B(a,t,c),B(a,e,c),i(e,s),i(e,_),i(e,p),B(a,w,c);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(a,c);B(a,k,c)},p(a,c){if(T===(T=D(a))&&f?f.p(a,c):(f.d(1),f=T(a),f&&(f.c(),f.m(t.parentNode,t))),c[0]&16&&n!==(n=a[4].toFixed(2)+"")&&ne(_,n),c[0]&3969){A=le(a[0].deck);let d;for(d=0;d<A.length;d+=1){const F=ue(a,A,d);h[d]?h[d].p(F,c):(h[d]=fe(F),h[d].c(),h[d].m(k.parentNode,k))}for(;d<h.length;d+=1)h[d].d(1);h.length=A.length}},d(a){a&&(y(t),y(e),y(w),y(k)),f.d(a),_e(h,a)}}}function Oe(l){let t,e="Loading deck…";return{c(){t=C("p"),t.textContent=e,this.h()},l(s){t=g(s,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-88q0iq"&&(t.textContent=e),this.h()},h(){v(t,"class","centered svelte-lskhmy")},m(s,n){B(s,t,n)},p:he,d(s){s&&y(t)}}}function De(l){let t,e,s;return{c(){t=C("p"),e=H("Error: "),s=H(l[2]),this.h()},l(n){t=g(n,"P",{class:!0});var _=V(t);e=z(_,"Error: "),s=z(_,l[2]),_.forEach(y),this.h()},h(){v(t,"class","error svelte-lskhmy")},m(n,_){B(n,t,_),i(t,e),i(t,s)},p(n,_){_[0]&4&&ne(s,n[2])},d(n){n&&y(t)}}}function Pe(l){let t,e="💡 Sound not found";return{c(){t=C("h1"),t.textContent=e,this.h()},l(s){t=g(s,"H1",{style:!0,"data-svelte-h":!0}),G(t)!=="svelte-km9r49"&&(t.textContent=e),this.h()},h(){N(t,"width","100%"),N(t,"border","2px solid #facc15"),N(t,"border-radius","0.375rem"),N(t,"text-align","center"),N(t,"font-size","1.2rem"),N(t,"padding","6px"),N(t,"margin","2px"),N(t,"background-color","#0f4502")},m(s,n){B(s,t,n)},p:he,d(s){s&&y(t)}}}function je(l){let t,e,s;return{c(){t=C("div"),e=C("audio"),this.h()},l(n){t=g(n,"DIV",{class:!0});var _=V(t);e=g(_,"AUDIO",{src:!0,class:!0}),V(e).forEach(y),_.forEach(y),this.h()},h(){ie(e.src,s=l[5])||v(e,"src",s),e.controls=!0,v(e,"class","w-full"),v(t,"class","audio-panel svelte-lskhmy")},m(n,_){B(n,t,_),i(t,e),l[14](e)},p(n,_){_[0]&32&&!ie(e.src,s=n[5])&&v(e,"src",s)},d(n){n&&y(t),l[14](null)}}}function de(l){let t,e,s,n="showAt:",_,p,w,k,D="0",T,f,A="Now",h,a,c=(l[30].name||l[30].type)+"",d,F,S,b,u,m,j="Delete",M,R;function W(){l[16].call(p,l[31],l[32])}function K(){return l[17](l[30])}function Q(){return l[18](l[30])}function X(){l[19].call(b,l[31],l[32])}function ee(){return l[20](l[29],l[32])}return{c(){t=C("div"),e=C("div"),s=C("span"),s.textContent=n,_=O(),p=C("input"),w=O(),k=C("button"),k.textContent=D,T=O(),f=C("button"),f.textContent=A,h=O(),a=C("span"),d=H(c),F=H(":"),S=O(),b=C("input"),u=O(),m=C("button"),m.textContent=j,this.h()},l(r){t=g(r,"DIV",{class:!0});var o=V(t);e=g(o,"DIV",{style:!0});var E=V(e);s=g(E,"SPAN",{"data-svelte-h":!0}),G(s)!=="svelte-19kgj58"&&(s.textContent=n),_=I(E),p=g(E,"INPUT",{type:!0,step:!0,class:!0}),w=I(E),k=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),G(k)!=="svelte-u1blfk"&&(k.textContent=D),T=I(E),f=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-i54ylz"&&(f.textContent=A),h=I(E),a=g(E,"SPAN",{class:!0});var q=V(a);d=z(q,c),F=z(q,":"),q.forEach(y),S=I(E),b=g(E,"INPUT",{type:!0,placeholder:!0,class:!0}),u=I(E),m=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),G(m)!=="svelte-1ex4cm4"&&(m.textContent=j),E.forEach(y),o.forEach(y),this.h()},h(){v(p,"type","number"),v(p,"step","0.0"),v(p,"class","svelte-lskhmy"),v(k,"class","set-show-zero svelte-lskhmy"),v(f,"class","set-show svelte-lskhmy"),v(a,"class","bg-red-950 "),v(b,"type","text"),v(b,"placeholder","Edit content"),v(b,"class","svelte-lskhmy"),v(m,"class","delete-item svelte-lskhmy"),N(e,"display","flex"),N(e,"align-items","center"),N(e,"gap","0.5rem"),v(t,"class","item svelte-lskhmy")},m(r,o){B(r,t,o),i(t,e),i(e,s),i(e,_),i(e,p),Z(p,l[30].showAt),i(e,w),i(e,k),i(e,T),i(e,f),i(e,h),i(e,a),i(a,d),i(a,F),i(e,S),i(e,b),Z(b,l[30].content),i(e,u),i(e,m),M||(R=[J(p,"input",W),J(k,"click",K),J(f,"click",Q),J(b,"input",X),J(m,"click",ee)],M=!0)},p(r,o){l=r,o[0]&1&&$(p.value)!==l[30].showAt&&Z(p,l[30].showAt),o[0]&1&&c!==(c=(l[30].name||l[30].type)+"")&&ne(d,c),o[0]&1&&b.value!==l[30].content&&Z(b,l[30].content)},d(r){r&&y(t),M=!1,ae(R)}}}function fe(l){let t,e,s,n,_=l[29]+1+"",p,w,k=l[27].type+"",D,T,f,A="Set Start = Now",h,a,c,d,F,S,b,u,m,j,M,R,W="Set End = Now",K,Q,X;function ee(){return l[15](l[29])}let r=le(l[27].data),o=[];for(let P=0;P<r.length;P+=1)o[P]=de(ce(l,r,P));function E(){l[21].call(S,l[28],l[29])}function q(){l[22].call(j,l[28],l[29])}function pe(){return l[23](l[29])}return{c(){t=C("div"),e=C("div"),s=C("strong"),n=H("Slide "),p=H(_),w=H(" — "),D=H(k),T=O(),f=C("button"),f.textContent=A,h=O();for(let P=0;P<o.length;P+=1)o[P].c();a=O(),c=C("div"),d=C("label"),F=H(`Start:
          `),S=C("input"),b=O(),u=C("label"),m=H(`End:
          `),j=C("input"),M=O(),R=C("button"),R.textContent=W,K=O(),this.h()},l(P){t=g(P,"DIV",{class:!0});var L=V(t);e=g(L,"DIV",{class:!0});var U=V(e);s=g(U,"STRONG",{});var x=V(s);n=z(x,"Slide "),p=z(x,_),w=z(x," — "),D=z(x,k),x.forEach(y),T=I(U),f=g(U,"BUTTON",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-1worsv"&&(f.textContent=A),U.forEach(y),h=I(L);for(let oe=0;oe<o.length;oe+=1)o[oe].l(L);a=I(L),c=g(L,"DIV",{style:!0});var Y=V(c);d=g(Y,"LABEL",{});var se=V(d);F=z(se,`Start:
          `),S=g(se,"INPUT",{type:!0,step:!0,class:!0}),se.forEach(y),b=I(Y),u=g(Y,"LABEL",{style:!0});var re=V(u);m=z(re,`End:
          `),j=g(re,"INPUT",{type:!0,step:!0,class:!0}),re.forEach(y),M=I(Y),R=g(Y,"BUTTON",{class:!0,"data-svelte-h":!0}),G(R)!=="svelte-1s9qi15"&&(R.textContent=W),Y.forEach(y),K=I(L),L.forEach(y),this.h()},h(){v(f,"class","set-start svelte-lskhmy"),f.disabled=l[29]===0,v(e,"class","slide-header svelte-lskhmy"),v(S,"type","number"),v(S,"step","0.01"),v(S,"class","svelte-lskhmy"),v(j,"type","number"),v(j,"step","0.01"),v(j,"class","svelte-lskhmy"),N(u,"margin-left","1rem"),v(R,"class","set-end svelte-lskhmy"),N(c,"display","flex"),N(c,"align-items","center"),N(c,"margin-top","0.5rem"),v(t,"class","slide svelte-lskhmy")},m(P,L){B(P,t,L),i(t,e),i(e,s),i(s,n),i(s,p),i(s,w),i(s,D),i(e,T),i(e,f),i(t,h);for(let U=0;U<o.length;U+=1)o[U]&&o[U].m(t,null);i(t,a),i(t,c),i(c,d),i(d,F),i(d,S),Z(S,l[27].start),i(c,b),i(c,u),i(u,m),i(u,j),Z(j,l[27].end),i(c,M),i(c,R),i(t,K),Q||(X=[J(f,"click",ee),J(S,"input",E),J(j,"input",q),J(R,"click",pe)],Q=!0)},p(P,L){if(l=P,L[0]&1&&k!==(k=l[27].type+"")&&ne(D,k),L[0]&3585){r=le(l[27].data);let U;for(U=0;U<r.length;U+=1){const x=ce(l,r,U);o[U]?o[U].p(x,L):(o[U]=de(x),o[U].c(),o[U].m(t,a))}for(;U<o.length;U+=1)o[U].d(1);o.length=r.length}L[0]&1&&$(S.value)!==l[27].start&&Z(S,l[27].start),L[0]&1&&$(j.value)!==l[27].end&&Z(j,l[27].end)},d(P){P&&y(t),_e(o,P),Q=!1,ae(X)}}}function Be(l){let t,e,s,n="💡 Timing Page",_,p,w,k="Save",D,T,f="Save and Download",A,h,a,c,d;t=new Ae({});function F(u,m){return u[2]?De:u[1]?Ie:Oe}let S=F(l),b=S(l);return{c(){Te(t.$$.fragment),e=O(),s=C("h1"),s.textContent=n,_=O(),p=C("div"),w=C("button"),w.textContent=k,D=O(),T=C("button"),T.textContent=f,A=O(),b.c(),h=te(),this.h()},l(u){we(t.$$.fragment,u),e=I(u),s=g(u,"H1",{style:!0,"data-svelte-h":!0}),G(s)!=="svelte-b6baqi"&&(s.textContent=n),_=I(u),p=g(u,"DIV",{class:!0,style:!0});var m=V(p);w=g(m,"BUTTON",{class:!0,"data-svelte-h":!0}),G(w)!=="svelte-mcs0te"&&(w.textContent=k),D=I(m),T=g(m,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),G(T)!=="svelte-cj91f7"&&(T.textContent=f),m.forEach(y),A=I(u),b.l(u),h=te(),this.h()},h(){N(s,"width","100%"),N(s,"border","2px solid #facc15"),N(s,"border-radius","0.375rem"),N(s,"text-align","center"),N(s,"font-size","1.2rem"),N(s,"padding","6px"),N(s,"margin","2px"),N(s,"background-color","#0f4502"),v(w,"class","btn svelte-lskhmy"),v(T,"class","btn svelte-lskhmy"),N(T,"margin-left","0.5rem"),v(p,"class","timing-actions"),N(p,"margin","1rem 0")},m(u,m){Ce(t,u,m),B(u,e,m),B(u,s,m),B(u,_,m),B(u,p,m),i(p,w),i(p,D),i(p,T),B(u,A,m),b.m(u,m),B(u,h,m),a=!0,c||(d=[J(w,"click",l[12]),J(T,"click",l[13])],c=!0)},p(u,m){S===(S=F(u))&&b?b.p(u,m):(b.d(1),b=S(u),b&&(b.c(),b.m(h.parentNode,h)))},i(u){a||(ge(t.$$.fragment,u),a=!0)},o(u){ye(t.$$.fragment,u),a=!1},d(u){u&&(y(e),y(s),y(_),y(p),y(A),y(h)),be(t,u),b.d(u),c=!1,ae(d)}}}function Fe(l,t,e){let s;Ee(l,Ue,r=>e(24,s=r));let n=null,_=!1,p="",w=null,k=0,D="/sounds/default.opus";const T=()=>{w&&e(4,k=w.currentTime),requestAnimationFrame(T)};function f(r){if(!(n!=null&&n.deck))return;const o=parseFloat(k.toFixed(2));e(0,n.deck[r].end=o,n),n.deck[r+1]&&e(0,n.deck[r+1].start=o,n),e(0,n={...n})}function A(r){if(!(n!=null&&n.deck)||r===0)return;const o=parseFloat(k.toFixed(2));e(0,n.deck[r-1].end=o,n),e(0,n.deck[r].start=o,n),e(0,n={...n})}function h(r){r.showAt=parseFloat(k.toFixed(1)),e(0,n={...n})}function a(r){r.showAt=0,e(0,n={...n})}function c(r,o){n!=null&&n.deck&&(n.deck[r].data.splice(o,1),e(0,n={...n}))}async function d(){const r=s.url.searchParams.get("filename")??"",o=await fetch(`/admin/timings?filename=${encodeURIComponent(r)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok){let E;try{const q=await o.json();E=q.error??JSON.stringify(q)}catch{E=await o.text()}return alert(`❌ Save failed: ${E}`),!1}return alert("✅ Save successful"),!0}async function F(){await d()&&S()}function S(){const r=s.url.searchParams.get("filename")??"deck",o=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),E=URL.createObjectURL(o),q=document.createElement("a");q.href=E,q.download=`${r}.json`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(E)}let b=!1;Ne(async()=>{T();const r=s.url.searchParams.get("filename");if(!r){e(2,p="No filename provided");return}try{(await fetch(`/sounds/${r}.opus`,{method:"HEAD"})).ok&&(e(5,D=`/sounds/${r}.opus`),e(6,b=!0))}catch{}try{const o=await fetch(`/admin/timings?filename=${encodeURIComponent(r)}`);if(!o.ok){const E=await o.json();throw new Error(E.error||o.statusText)}e(0,n=await o.json()),e(1,_=!0)}catch(o){e(2,p=o.message)}});function u(r){Se[r?"unshift":"push"](()=>{w=r,e(3,w)})}const m=r=>A(r);function j(r,o){r[o].showAt=$(this.value),e(0,n)}const M=r=>a(r),R=r=>h(r);function W(r,o){r[o].content=this.value,e(0,n)}const K=(r,o)=>c(r,o);function Q(r,o){r[o].start=$(this.value),e(0,n)}function X(r,o){r[o].end=$(this.value),e(0,n)}return[n,_,p,w,k,D,b,f,A,h,a,c,d,F,u,m,j,M,R,W,K,Q,X,r=>f(r)]}class He extends me{constructor(t){super(),ve(this,t,Fe,Be,ke,{},null,[-1,-1])}}export{He as component};
