import{S as Ke,i as We,s as Ye,d as h,o as Le,F as Je,D as Ze,p as Pe,q as we,G as Z,I as Ae,b as oe,w as Ve,c as l,J as se,x as o,K as je,A as Xe,h as O,y as Re,e as d,f as C,B as ne,g as w,k as q,z as He,j as u,t as V,a as ee,L as Ue,n as xe}from"../chunks/C5V-7dkx.js";import{e as Ie}from"../chunks/DF3-wX0J.js";import"../chunks/IHki7fMi.js";import{g as ze}from"../chunks/_072e-m6.js";import{N as $e}from"../chunks/BCh89Q_O.js";import{A as et}from"../chunks/NgHeIh7M.js";/* empty css                */function Be(e,a,t){const r=e.slice();r[17]=a[t];const f=st(r[17]);return r[18]=f,r}function Fe(e,a,t){const r=e.slice();return r[21]=a[t],r}function Me(e){let a,t=e[21]+"",r,f;return{c(){a=u("option"),r=V(t),this.h()},l(g){a=d(g,"OPTION",{});var _=C(a);r=w(_,t),_.forEach(h),this.h()},h(){a.__value=f=e[21],Z(a,a.__value)},m(g,_){oe(g,a,_),l(a,r)},p(g,_){_&32&&t!==(t=g[21]+"")&&ee(r,t),_&32&&f!==(f=g[21])&&(a.__value=f,Z(a,a.__value))},d(g){g&&h(a)}}}function tt(e){let a,t,r="<tr><th>Type</th> <th>Filename/Name</th> <th>Subj/Chapter/Ex</th> <th>Edited</th> <th>Created</th> <th></th></tr>",f,g,_=Ie(e[0]),c=[];for(let n=0;n<_.length;n+=1)c[n]=Qe(Be(e,_,n));return{c(){a=u("table"),t=u("thead"),t.innerHTML=r,f=q(),g=u("tbody");for(let n=0;n<c.length;n+=1)c[n].c();this.h()},l(n){a=d(n,"TABLE",{class:!0});var D=C(a);t=d(D,"THEAD",{"data-svelte-h":!0}),ne(t)!=="svelte-1970ytt"&&(t.innerHTML=r),f=O(D),g=d(D,"TBODY",{});var i=C(g);for(let p=0;p<c.length;p+=1)c[p].l(i);i.forEach(h),D.forEach(h),this.h()},h(){o(a,"class","taleemTable")},m(n,D){oe(n,a,D),l(a,t),l(a,f),l(a,g);for(let i=0;i<c.length;i+=1)c[i]&&c[i].m(g,null)},p(n,D){if(D&1){_=Ie(n[0]);let i;for(i=0;i<_.length;i+=1){const p=Be(n,_,i);c[i]?c[i].p(p,D):(c[i]=Qe(p),c[i].c(),c[i].m(g,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=_.length}},d(n){n&&h(a),Je(c,n)}}}function lt(e){let a,t="No items found.";return{c(){a=u("div"),a.textContent=t,this.h()},l(r){a=d(r,"DIV",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-j7wzyv"&&(a.textContent=t),this.h()},h(){o(a,"class","empty svelte-1p6dhxq")},m(r,f){oe(r,a,f)},p:xe,d(r){r&&h(a)}}}function Qe(e){let a,t,r,f=e[18].label+"",g,_,c,n,D,i,p,T=e[17].filename+"",J,R,N,K=(e[17].name??e[17].filename)+"",W,j,B,b,I=e[17].tcode+"",te,le,G,P,H=e[17].chapter+"",re,ce,S=e[17].exercise+"",F,ve,U,ae=(e[17].editedAt?new Date(e[17].editedAt).toLocaleString():"â€”")+"",M,me,x,Q=(e[17].createdAt?new Date(e[17].createdAt).toLocaleString():"â€”")+"",ie,fe,y,L,_e,de,X,E,ge,$,z,s,A,k,Y;return{c(){a=u("tr"),t=u("td"),r=u("span"),g=V(f),D=q(),i=u("td"),p=u("div"),J=V(T),R=q(),N=u("div"),W=V(K),j=q(),B=u("td"),b=u("div"),te=V(I),le=q(),G=u("div"),P=V("Ch "),re=V(H),ce=V(" Â· "),F=V(S),ve=q(),U=u("td"),M=V(ae),me=q(),x=u("td"),ie=V(Q),fe=q(),y=u("td"),L=u("a"),_e=V("Open"),X=q(),E=u("a"),ge=V("Editor"),z=q(),s=u("a"),A=V("Delete"),Y=q(),this.h()},l(v){a=d(v,"TR",{});var m=C(a);t=d(m,"TD",{class:!0});var ke=C(t);r=d(ke,"SPAN",{class:!0,style:!0,title:!0,"aria-label":!0});var Te=C(r);g=w(Te,f),Te.forEach(h),ke.forEach(h),D=O(m),i=d(m,"TD",{class:!0});var ue=C(i);p=d(ue,"DIV",{class:!0});var be=C(p);J=w(be,T),be.forEach(h),R=O(ue),N=d(ue,"DIV",{class:!0});var he=C(N);W=w(he,K),he.forEach(h),ue.forEach(h),j=O(m),B=d(m,"TD",{class:!0});var pe=C(B);b=d(pe,"DIV",{class:!0});var Ee=C(b);te=w(Ee,I),Ee.forEach(h),le=O(pe),G=d(pe,"DIV",{class:!0});var De=C(G);P=w(De,"Ch "),re=w(De,H),ce=w(De," Â· "),F=w(De,S),De.forEach(h),pe.forEach(h),ve=O(m),U=d(m,"TD",{});var Oe=C(U);M=w(Oe,ae),Oe.forEach(h),me=O(m),x=d(m,"TD",{});var qe=C(x);ie=w(qe,Q),qe.forEach(h),fe=O(m),y=d(m,"TD",{class:!0});var Ce=C(y);L=d(Ce,"A",{class:!0,href:!0,target:!0,rel:!0});var Ne=C(L);_e=w(Ne,"Open"),Ne.forEach(h),X=O(Ce),E=d(Ce,"A",{class:!0,href:!0,target:!0,rel:!0});var Se=C(E);ge=w(Se,"Editor"),Se.forEach(h),z=O(Ce),s=d(Ce,"A",{class:!0,href:!0,target:!0,rel:!0});var ye=C(s);A=w(ye,"Delete"),ye.forEach(h),Ce.forEach(h),Y=O(m),m.forEach(h),this.h()},h(){o(r,"class","badge svelte-1p6dhxq"),o(r,"style",_=`--bg:${e[18].bg};--fg:${e[18].fg}`),o(r,"title",c=e[18].title),o(r,"aria-label",n=e[18].title),o(t,"class","type"),o(p,"class","n2"),o(N,"class","n1"),o(i,"class","name"),o(b,"class","p1"),o(G,"class","p2"),o(B,"class","path"),o(L,"class","btn small svelte-1p6dhxq"),o(L,"href",de=Ge(e[17])),o(L,"target","_blank"),o(L,"rel","noopener"),o(E,"class","btn small svelte-1p6dhxq"),o(E,"href",$="/admin/editor?filename="+e[17].filename),o(E,"target","_blank"),o(E,"rel","noopener"),o(s,"class","btn small svelte-1p6dhxq"),o(s,"href",k="/admin/delete?filename="+e[17].filename),o(s,"target","_blank"),o(s,"rel","noopener"),o(y,"class","actions")},m(v,m){oe(v,a,m),l(a,t),l(t,r),l(r,g),l(a,D),l(a,i),l(i,p),l(p,J),l(i,R),l(i,N),l(N,W),l(a,j),l(a,B),l(B,b),l(b,te),l(B,le),l(B,G),l(G,P),l(G,re),l(G,ce),l(G,F),l(a,ve),l(a,U),l(U,M),l(a,me),l(a,x),l(x,ie),l(a,fe),l(a,y),l(y,L),l(L,_e),l(y,X),l(y,E),l(E,ge),l(y,z),l(y,s),l(s,A),l(a,Y)},p(v,m){m&1&&f!==(f=v[18].label+"")&&ee(g,f),m&1&&_!==(_=`--bg:${v[18].bg};--fg:${v[18].fg}`)&&o(r,"style",_),m&1&&c!==(c=v[18].title)&&o(r,"title",c),m&1&&n!==(n=v[18].title)&&o(r,"aria-label",n),m&1&&T!==(T=v[17].filename+"")&&ee(J,T),m&1&&K!==(K=(v[17].name??v[17].filename)+"")&&ee(W,K),m&1&&I!==(I=v[17].tcode+"")&&ee(te,I),m&1&&H!==(H=v[17].chapter+"")&&ee(re,H),m&1&&S!==(S=v[17].exercise+"")&&ee(F,S),m&1&&ae!==(ae=(v[17].editedAt?new Date(v[17].editedAt).toLocaleString():"â€”")+"")&&ee(M,ae),m&1&&Q!==(Q=(v[17].createdAt?new Date(v[17].createdAt).toLocaleString():"â€”")+"")&&ee(ie,Q),m&1&&de!==(de=Ge(v[17]))&&o(L,"href",de),m&1&&$!==($="/admin/editor?filename="+v[17].filename)&&o(E,"href",$),m&1&&k!==(k="/admin/delete?filename="+v[17].filename)&&o(s,"href",k)},d(v){v&&h(a)}}}function at(e){let a,t,r,f,g,_,c,n,D="Question Index",i,p,T,J,R,N,K,W,j,B,b,I,te,le,G,P,H,re="All tcodes",ce,S,F,ve="Last Edited (newest)",U,ae="Created (newest)",M,me="Name (Aâ€“Z)",x,Q,ie="Reset",fe,y,L,_e,de;t=new $e({}),f=new et({});let X=Ie(e[5]),E=[];for(let s=0;s<X.length;s+=1)E[s]=Me(Fe(e,X,s));function ge(s,A){return s[0].length===0?lt:tt}let $=ge(e),z=$(e);return{c(){a=q(),He(t.$$.fragment),r=q(),He(f.$$.fragment),g=q(),_=u("div"),c=u("header"),n=u("h1"),n.textContent=D,i=q(),p=u("div"),T=u("input"),J=q(),R=u("select"),N=u("option"),K=V("All"),j=u("option"),B=V("Decks"),I=u("option"),te=V("Notes"),G=q(),P=u("select"),H=u("option"),H.textContent=re;for(let s=0;s<E.length;s+=1)E[s].c();ce=q(),S=u("select"),F=u("option"),F.textContent=ve,U=u("option"),U.textContent=ae,M=u("option"),M.textContent=me,x=q(),Q=u("button"),Q.textContent=ie,fe=q(),y=u("section"),z.c(),this.h()},l(s){Xe("svelte-19gpdzi",document.head).forEach(h),a=O(s),Re(t.$$.fragment,s),r=O(s),Re(f.$$.fragment,s),g=O(s),_=d(s,"DIV",{class:!0});var k=C(_);c=d(k,"HEADER",{class:!0});var Y=C(c);n=d(Y,"H1",{class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-a4tuxo"&&(n.textContent=D),i=O(Y),p=d(Y,"DIV",{class:!0});var v=C(p);T=d(v,"INPUT",{class:!0,type:!0,placeholder:!0}),J=O(v),R=d(v,"SELECT",{class:!0});var m=C(R);N=d(m,"OPTION",{});var ke=C(N);K=w(ke,"All"),ke.forEach(h),j=d(m,"OPTION",{});var Te=C(j);B=w(Te,"Decks"),Te.forEach(h),I=d(m,"OPTION",{});var ue=C(I);te=w(ue,"Notes"),ue.forEach(h),m.forEach(h),G=O(v),P=d(v,"SELECT",{class:!0});var be=C(P);H=d(be,"OPTION",{"data-svelte-h":!0}),ne(H)!=="svelte-1exhdx9"&&(H.textContent=re);for(let Ee=0;Ee<E.length;Ee+=1)E[Ee].l(be);be.forEach(h),ce=O(v),S=d(v,"SELECT",{class:!0});var he=C(S);F=d(he,"OPTION",{"data-svelte-h":!0}),ne(F)!=="svelte-10puezt"&&(F.textContent=ve),U=d(he,"OPTION",{"data-svelte-h":!0}),ne(U)!=="svelte-g65bl"&&(U.textContent=ae),M=d(he,"OPTION",{"data-svelte-h":!0}),ne(M)!=="svelte-1tau8uj"&&(M.textContent=me),he.forEach(h),x=O(v),Q=d(v,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(Q)!=="svelte-131kcaj"&&(Q.textContent=ie),v.forEach(h),Y.forEach(h),fe=O(k),y=d(k,"SECTION",{class:!0});var pe=C(y);z.l(pe),pe.forEach(h),k.forEach(h),this.h()},h(){document.title="Admin â€” Question Index",o(n,"class","svelte-1p6dhxq"),o(T,"class","search svelte-1p6dhxq"),o(T,"type","search"),o(T,"placeholder","Search filename / name / desc / exerciseâ€¦"),N.__value="",Z(N,N.__value),N.selected=W=!e[2],j.__value="deck",Z(j,j.__value),j.selected=b=e[2]==="deck",I.__value="note",Z(I,I.__value),I.selected=le=e[2]==="note",o(R,"class","sel svelte-1p6dhxq"),H.__value="",Z(H,H.__value),o(P,"class","sel svelte-1p6dhxq"),e[3]===void 0&&je(()=>e[15].call(P)),F.__value="edited_desc",Z(F,F.__value),U.__value="created_desc",Z(U,U.__value),M.__value="name_asc",Z(M,M.__value),o(S,"class","sel svelte-1p6dhxq"),e[4]===void 0&&je(()=>e[16].call(S)),o(Q,"class","clear svelte-1p6dhxq"),o(p,"class","controls svelte-1p6dhxq"),o(c,"class","top compact svelte-1p6dhxq"),o(y,"class","taleemTableWrap svelte-1p6dhxq"),o(_,"class","page svelte-1p6dhxq")},m(s,A){oe(s,a,A),Ve(t,s,A),oe(s,r,A),Ve(f,s,A),oe(s,g,A),oe(s,_,A),l(_,c),l(c,n),l(c,i),l(c,p),l(p,T),Z(T,e[1]),l(p,J),l(p,R),l(R,N),l(N,K),l(R,j),l(j,B),l(R,I),l(I,te),l(p,G),l(p,P),l(P,H);for(let k=0;k<E.length;k+=1)E[k]&&E[k].m(P,null);Ae(P,e[3],!0),l(p,ce),l(p,S),l(S,F),l(S,U),l(S,M),Ae(S,e[4],!0),l(p,x),l(p,Q),l(_,fe),l(_,y),z.m(y,null),L=!0,_e||(de=[se(T,"input",e[12]),se(T,"keydown",e[13]),se(R,"change",e[14]),se(P,"change",e[15]),se(P,"change",e[6]),se(S,"change",e[16]),se(S,"change",e[6]),se(Q,"click",e[7])],_e=!0)},p(s,[A]){if(A&2&&T.value!==s[1]&&Z(T,s[1]),(!L||A&4&&W!==(W=!s[2]))&&(N.selected=W),(!L||A&4&&b!==(b=s[2]==="deck"))&&(j.selected=b),(!L||A&4&&le!==(le=s[2]==="note"))&&(I.selected=le),A&32){X=Ie(s[5]);let k;for(k=0;k<X.length;k+=1){const Y=Fe(s,X,k);E[k]?E[k].p(Y,A):(E[k]=Me(Y),E[k].c(),E[k].m(P,null))}for(;k<E.length;k+=1)E[k].d(1);E.length=X.length}A&40&&Ae(P,s[3]),A&16&&Ae(S,s[4]),$===($=ge(s))&&z?z.p(s,A):(z.d(1),z=$(s),z&&(z.c(),z.m(y,null)))},i(s){L||(we(t.$$.fragment,s),we(f.$$.fragment,s),L=!0)},o(s){Pe(t.$$.fragment,s),Pe(f.$$.fragment,s),L=!1},d(s){s&&(h(a),h(r),h(g),h(_)),Le(t,s),Le(f,s),Je(E,s),z.d(),_e=!1,Ze(de)}}}function Ge(e){return e.type==="deck"?`/player?filename=${encodeURIComponent(e.filename)}`:e.type==="note"?`/notes?filename=${encodeURIComponent(e.filename)}`:"#"}function st(e){return e.type==="deck"?{label:"ðŸ“½ï¸",title:"Deck",bg:"#0c0535",fg:"#dcd6ff"}:e.type==="note"?{label:"ðŸ“š",title:"Note",bg:"#6c430b",fg:"#ffe3c4"}:{label:"â€¢",title:e.type??"Item",bg:"#2E1C02",fg:"#e6ccb0"}}function nt(e,a,t){let r,{data:f}=a,g=[],_={all:0,decks:0,notes:0},c={},n={q:"",type:null,tcode:null,limit:200,offset:0,sort:"edited_desc"},D="",i=null,p=null,T="edited_desc";function J(){const b=new URLSearchParams;D&&b.set("q",D),i&&b.set("type",i),p&&b.set("tcode",p),T&&b.set("sort",T),b.set("limit",String(n.limit??200)),b.set("offset","0"),ze(`/admin?${b.toString()}`,{replaceState:!0})}function R(){ze("/admin",{replaceState:!0})}function N(){D=this.value,t(1,D),t(8,f),t(9,_),t(10,c),t(11,n)}const K=b=>b.key==="Enter"&&J(),W=b=>{const I=b.currentTarget.value;t(2,i=I||null),J()};function j(){p=Ue(this),t(3,p),t(8,f),t(9,_),t(10,c),t(11,n),t(5,r),t(10,c),t(8,f),t(9,_),t(11,n)}function B(){T=Ue(this),t(4,T),t(8,f),t(9,_),t(10,c),t(11,n)}return e.$$set=b=>{"data"in b&&t(8,f=b.data)},e.$$.update=()=>{e.$$.dirty&3840&&f&&(t(0,g=f.items??[]),t(9,_=f.totals??_),t(10,c=f.tcodeStats??c),t(11,n={...n,...f.filters??{}}),t(1,D=n.q??""),t(2,i=n.type==="deck"||n.type==="note"?n.type:null),t(3,p=n.tcode??null),t(4,T=n.sort??"edited_desc")),e.$$.dirty&1024&&t(5,r=Object.keys(c).sort((b,I)=>b.localeCompare(I)))},[g,D,i,p,T,r,J,R,f,_,c,n,N,K,W,j,B]}class ut extends Ke{constructor(a){super(),We(this,a,nt,at,Ye,{data:8})}}export{ut as component};
