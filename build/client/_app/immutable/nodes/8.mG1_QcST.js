import{S as Ce,i as we,s as Se,n as ue,d,D as xe,a as ae,x as p,b as C,c as m,J as _e,e as b,f as j,g as P,h as w,j as y,t as D,k as S,O as Te,o as X,F as qe,p as Z,q as ee,w as te,E as H,y as le,B as G,z as ne,G as Ne}from"../chunks/C5V-7dkx.js";import{e as he}from"../chunks/DF3-wX0J.js";import"../chunks/IHki7fMi.js";import{N as ze}from"../chunks/mOD5hCtY.js";import{A as Ie}from"../chunks/NgHeIh7M.js";function Ue(i){let e,a,n,l,s,x;return{c(){e=y("button"),a=D(i[0]),n=S(),l=y("input"),this.h()},l(o){e=b(o,"BUTTON",{type:!0});var f=j(e);a=P(f,i[0]),f.forEach(d),n=w(o),l=b(o,"INPUT",{type:!0,accept:!0}),this.h()},h(){p(e,"type","button"),p(l,"type","file"),p(l,"accept",i[1]),l.multiple=i[2],l.hidden=!0},m(o,f){C(o,e,f),m(e,a),C(o,n,f),C(o,l,f),i[7](l),s||(x=[_e(e,"click",i[4]),_e(l,"change",i[5])],s=!0)},p(o,[f]){f&1&&ae(a,o[0]),f&2&&p(l,"accept",o[1]),f&4&&(l.multiple=o[2])},i:ue,o:ue,d(o){o&&(d(e),d(n),d(l)),i[7](null),s=!1,xe(x)}}}function je(i,e,a){let{label:n="Upload"}=e,{target:l="images"}=e,{accept:s="image/*"}=e,{multiple:x=!0}=e,o;async function f(){o.click()}async function r(u){const z=Array.from(u.target.files||[]);if(!z.length)return;const T=new FormData;T.set("target",l);for(const A of z)T.append("files",A,A.name);const J=await fetch("/admin/settings",{method:"POST",body:T}),V=await J.json().catch(()=>({})),q={ok:J.ok,...V};dispatchEvent(new CustomEvent("done",{detail:q,bubbles:!0})),a(3,o.value="",o)}function h(u){Te[u?"unshift":"push"](()=>{o=u,a(3,o)})}return i.$$set=u=>{"label"in u&&a(0,n=u.label),"target"in u&&a(6,l=u.target),"accept"in u&&a(1,s=u.accept),"multiple"in u&&a(2,x=u.multiple)},[n,s,x,o,f,r,l,h]}class ge extends Ce{constructor(e){super(),we(this,e,je,Ue,Se,{label:0,target:6,accept:1,multiple:2})}}function ve(i,e,a){const n=i.slice();return n[2]=e[a],n}function be(i){let e,a=i[2].label+"",n;return{c(){e=y("option"),n=D(a),this.h()},l(l){e=b(l,"OPTION",{});var s=j(e);n=P(s,a),s.forEach(d),this.h()},h(){e.__value=i[2].value,Ne(e,e.__value)},m(l,s){C(l,e,s),m(e,n)},p:ue,d(l){l&&d(e)}}}function ye(i){let e,a=i[0].error+"",n;return{c(){e=y("p"),n=D(a),this.h()},l(l){e=b(l,"P",{style:!0});var s=j(e);n=P(s,a),s.forEach(d),this.h()},h(){H(e,"color","var(--danger, #e66)"),H(e,"margin-top","0.75rem")},m(l,s){C(l,e,s),m(e,n)},p(l,s){s&1&&a!==(a=l[0].error+"")&&ae(n,a)},d(l){l&&d(e)}}}function ke(i){let e,a,n,l=i[0].key+"",s,x,o=i[0].count+"",f,r;return{c(){e=y("p"),a=D("Saved "),n=y("strong"),s=D(l),x=D(" with "),f=D(o),r=D(" items."),this.h()},l(h){e=b(h,"P",{style:!0});var u=j(e);a=P(u,"Saved "),n=b(u,"STRONG",{});var z=j(n);s=P(z,l),z.forEach(d),x=P(u," with "),f=P(u,o),r=P(u," items."),u.forEach(d),this.h()},h(){H(e,"color","var(--success, #6c6)"),H(e,"margin-top","0.75rem")},m(h,u){C(h,e,u),m(e,a),m(e,n),m(n,s),m(e,x),m(e,f),m(e,r)},p(h,u){u&1&&l!==(l=h[0].key+"")&&ae(s,l),u&1&&o!==(o=h[0].count+"")&&ae(f,o)},d(h){h&&d(e)}}}function Le(i){var de,pe;let e,a,n,l,s,x="Settings",o,f,r,h,u="Upload Home Index JSON",z,T,J="Target collection",V,q,A,N,fe="JSON file",se,I,ie,B,ce='<button type="submit" class="svelte-i9zgtq">Upload</button>',oe,K,Y,$,me="Upload Media",Q,U,L,re,O,W;e=new ze({}),n=new Ie({});let M=he(i[1]),g=[];for(let t=0;t<M.length;t+=1)g[t]=be(ve(i,M,t));let k=((de=i[0])==null?void 0:de.error)&&ye(i),E=((pe=i[0])==null?void 0:pe.ok)&&ke(i);return L=new ge({props:{label:"Upload Images",target:"images",accept:"image/*",multiple:!0}}),L.$on("done",Ee),O=new ge({props:{label:"Upload Sounds",target:"sounds",accept:".mp3,.wav,.ogg,.opus",multiple:!0}}),O.$on("done",Ee),{c(){ne(e.$$.fragment),a=S(),ne(n.$$.fragment),l=S(),s=y("h1"),s.textContent=x,o=S(),f=y("form"),r=y("fieldset"),h=y("legend"),h.textContent=u,z=S(),T=y("label"),T.textContent=J,V=S(),q=y("select");for(let t=0;t<g.length;t+=1)g[t].c();A=S(),N=y("label"),N.textContent=fe,se=S(),I=y("input"),ie=S(),B=y("div"),B.innerHTML=ce,oe=S(),k&&k.c(),K=S(),E&&E.c(),Y=S(),$=y("h2"),$.textContent=me,Q=S(),U=y("div"),ne(L.$$.fragment),re=S(),ne(O.$$.fragment),this.h()},l(t){le(e.$$.fragment,t),a=w(t),le(n.$$.fragment,t),l=w(t),s=b(t,"H1",{style:!0,"data-svelte-h":!0}),G(s)!=="svelte-9kvs1a"&&(s.textContent=x),o=w(t),f=b(t,"FORM",{method:!0,enctype:!0,class:!0});var _=j(f);r=b(_,"FIELDSET",{class:!0});var c=j(r);h=b(c,"LEGEND",{"data-svelte-h":!0}),G(h)!=="svelte-1v5zoc6"&&(h.textContent=u),z=w(c),T=b(c,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(T)!=="svelte-1mdzxte"&&(T.textContent=J),V=w(c),q=b(c,"SELECT",{id:!0,name:!0,class:!0});var R=j(q);for(let F=0;F<g.length;F+=1)g[F].l(R);R.forEach(d),A=w(c),N=b(c,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),G(N)!=="svelte-8yfj16"&&(N.textContent=fe),se=w(c),I=b(c,"INPUT",{id:!0,name:!0,type:!0,accept:!0,class:!0}),ie=w(c),B=b(c,"DIV",{style:!0,"data-svelte-h":!0}),G(B)!=="svelte-1cumg3y"&&(B.innerHTML=ce),oe=w(c),k&&k.l(c),K=w(c),E&&E.l(c),c.forEach(d),_.forEach(d),Y=w(t),$=b(t,"H2",{"data-svelte-h":!0}),G($)!=="svelte-6dbo57"&&($.textContent=me),Q=w(t),U=b(t,"DIV",{class:!0});var v=j(U);le(L.$$.fragment,v),re=w(v),le(O.$$.fragment,v),v.forEach(d),this.h()},h(){H(s,"margin-left","10%"),p(T,"for","target_key"),p(T,"class","svelte-i9zgtq"),p(q,"id","target_key"),p(q,"name","target_key"),q.required=!0,p(q,"class","svelte-i9zgtq"),p(N,"for","index_json"),H(N,"display","block"),H(N,"margin-top","0.5rem"),p(N,"class","svelte-i9zgtq"),p(I,"id","index_json"),p(I,"name","index_json"),p(I,"type","file"),p(I,"accept",".json,application/json"),I.required=!0,p(I,"class","svelte-i9zgtq"),H(B,"margin-top","1rem"),p(r,"class","svelte-i9zgtq"),p(f,"method","post"),p(f,"enctype","multipart/form-data"),p(f,"class","svelte-i9zgtq"),p(U,"class","row")},m(t,_){te(e,t,_),C(t,a,_),te(n,t,_),C(t,l,_),C(t,s,_),C(t,o,_),C(t,f,_),m(f,r),m(r,h),m(r,z),m(r,T),m(r,V),m(r,q);for(let c=0;c<g.length;c+=1)g[c]&&g[c].m(q,null);m(r,A),m(r,N),m(r,se),m(r,I),m(r,ie),m(r,B),m(r,oe),k&&k.m(r,null),m(r,K),E&&E.m(r,null),C(t,Y,_),C(t,$,_),C(t,Q,_),C(t,U,_),te(L,U,null),m(U,re),te(O,U,null),W=!0},p(t,[_]){var c,R;if(_&2){M=he(t[1]);let v;for(v=0;v<M.length;v+=1){const F=ve(t,M,v);g[v]?g[v].p(F,_):(g[v]=be(F),g[v].c(),g[v].m(q,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=M.length}(c=t[0])!=null&&c.error?k?k.p(t,_):(k=ye(t),k.c(),k.m(r,K)):k&&(k.d(1),k=null),(R=t[0])!=null&&R.ok?E?E.p(t,_):(E=ke(t),E.c(),E.m(r,null)):E&&(E.d(1),E=null)},i(t){W||(ee(e.$$.fragment,t),ee(n.$$.fragment,t),ee(L.$$.fragment,t),ee(O.$$.fragment,t),W=!0)},o(t){Z(e.$$.fragment,t),Z(n.$$.fragment,t),Z(L.$$.fragment,t),Z(O.$$.fragment,t),W=!1},d(t){t&&(d(a),d(l),d(s),d(o),d(f),d(Y),d($),d(Q),d(U)),X(e,t),X(n,t),qe(g,t),k&&k.d(),E&&E.d(),X(L),X(O)}}}function Ee(i){const{ok:e,results:a,error:n}=i.detail;console.log("upload:",e,a??n)}function Oe(i,e,a){let{form:n}=e;const l=[{value:"index_data",label:"Home: Videos Index (index_data)"},{value:"blog_index",label:"Home: Blog Index (blog_index)"}];return i.$$set=s=>{"form"in s&&a(0,n=s.form)},[n,l]}class Ae extends Ce{constructor(e){super(),we(this,e,Oe,Le,Se,{form:0})}}export{Ae as component};
