import{S as fl,i as vl,s as hl,O as dl,T as bl,d as c,v as _l,D as ml,t as gl,a as jl,e as $,U as Cl,F as Pe,f as Bt,h as e,w as El,J as y,V as Nl,x as t,j as l,k as i,A as T,m as p,l as U,y as Dl,o as s,q as f,p as I,z as Sl}from"../chunks/MRdXX-TE.js";import"../chunks/IHki7fMi.js";import{P as kl}from"../chunks/CPRo9sjY.js";function il(a){let d,r;return{c(){d=s("p"),r=I(a[8]),this.h()},l(v){d=l(v,"P",{class:!0});var u=i(d);r=U(u,a[8]),u.forEach(c),this.h()},h(){t(d,"class","toast ok svelte-13rccjb")},m(v,u){Bt(v,d,u),e(d,r)},p(v,u){u&256&&$(r,v[8])},d(v){v&&c(d)}}}function ul(a){let d,r;return{c(){d=s("p"),r=I(a[9]),this.h()},l(v){d=l(v,"P",{class:!0});var u=i(d);r=U(u,a[9]),u.forEach(c),this.h()},h(){t(d,"class","toast err svelte-13rccjb")},m(v,u){Bt(v,d,u),e(d,r)},p(v,u){u&512&&$(r,v[9])},d(v){v&&c(d)}}}function Tl(a){let d,r,v,u,K='<h1 class="svelte-13rccjb">Upload Note</h1> <p class="svelte-13rccjb">Send a <code>.html</code> note into <code>Question</code> (type=<strong>note</strong>).</p>',L,m,E=a[7]?"Uploading…":"Upload",O,S,pe,A,N,b,Q,we,fe,ve=(a[0].tcode||"—")+"",Ne,Ve,X,Me="•",Ae,o,w,D,ee=(a[0].chapterNo??"—")+"",qe,at,he,Ft="•",rt,be,nt,ye,Le=(a[0].exerciseSlug||"—")+"",Ge,ot,_e,Rt="•",ct,me,it,Oe,Be=(a[1]?a[1].name:"—")+"",ze,ut,B,Fe=a[7]?"Uploading…":"Upload",Je,Ke,dt,De,Se,_,te,ge,Ht="Path",pt,W,ft,vt,le,je,Mt="Metadata",ht,F,se,ae,qt="Status",bt,R,_t,re,ne,Gt="Tags (CSV)",mt,H,gt,oe,ce,zt="Description",jt,M,Ct,q,Ce,Jt="Note File",Et,G,ie,Kt="Choose file",Nt,Y,Dt,P,Qt="Drop a .html file here or click above.",St,z,ue,Xt="Filename (auto)",kt,Z,Tt,Ee,Wt="Derived from the chosen file (without .html/.htm)",Ut,de,x,Re=a[7]?"Uploading…":"Upload",Qe,Xe,It,J,Pt,wt,We,g,Vt,Yt;function pl(n){a[16](n)}let Zt={};a[0]!==void 0&&(Zt.value=a[0]),W=new kl({props:Zt}),dl.push(()=>bl(W,"value",pl));let j=a[8]&&il(a),C=a[9]&&ul(a);return{c(){d=s("section"),r=s("header"),v=s("div"),u=s("div"),u.innerHTML=K,L=f(),m=s("button"),O=I(E),pe=f(),A=s("div"),N=s("div"),b=s("div"),Q=s("span"),we=I("Tcode: "),fe=s("strong"),Ne=I(ve),Ve=f(),X=s("span"),X.textContent=Me,Ae=f(),o=s("span"),w=I("Chapter#: "),D=s("strong"),qe=I(ee),at=f(),he=s("span"),he.textContent=Ft,rt=f(),be=s("span"),nt=I("Exercise: "),ye=s("strong"),Ge=I(Le),ot=f(),_e=s("span"),_e.textContent=Rt,ct=f(),me=s("span"),it=I("File: "),Oe=s("strong"),ze=I(Be),ut=f(),B=s("button"),Je=I(Fe),dt=f(),De=s("main"),Se=s("div"),_=s("form"),te=s("div"),ge=s("h2"),ge.textContent=Ht,pt=f(),Sl(W.$$.fragment),vt=f(),le=s("div"),je=s("h2"),je.textContent=Mt,ht=f(),F=s("div"),se=s("div"),ae=s("label"),ae.textContent=qt,bt=f(),R=s("input"),_t=f(),re=s("div"),ne=s("label"),ne.textContent=Gt,mt=f(),H=s("input"),gt=f(),oe=s("div"),ce=s("label"),ce.textContent=zt,jt=f(),M=s("textarea"),Ct=f(),q=s("div"),Ce=s("h2"),Ce.textContent=Jt,Et=f(),G=s("div"),ie=s("label"),ie.textContent=Kt,Nt=f(),Y=s("input"),Dt=f(),P=s("div"),P.textContent=Qt,St=f(),z=s("div"),ue=s("label"),ue.textContent=Xt,kt=f(),Z=s("input"),Tt=f(),Ee=s("small"),Ee.textContent=Wt,Ut=f(),de=s("div"),x=s("button"),Qe=I(Re),It=f(),J=s("button"),Pt=I("Clear"),wt=f(),j&&j.c(),We=f(),C&&C.c(),this.h()},l(n){d=l(n,"SECTION",{class:!0});var h=i(d);r=l(h,"HEADER",{class:!0});var He=i(r);v=l(He,"DIV",{class:!0});var Ye=i(v);u=l(Ye,"DIV",{class:!0,"data-svelte-h":!0}),T(u)!=="svelte-1faa92t"&&(u.innerHTML=K),L=p(Ye),m=l(Ye,"BUTTON",{type:!0,class:!0});var xt=i(m);O=U(xt,E),xt.forEach(c),Ye.forEach(c),He.forEach(c),pe=p(h),A=l(h,"DIV",{class:!0});var $t=i(A);N=l($t,"DIV",{class:!0});var Ze=i(N);b=l(Ze,"DIV",{class:!0});var k=i(b);Q=l(k,"SPAN",{class:!0});var At=i(Q);we=U(At,"Tcode: "),fe=l(At,"STRONG",{});var el=i(fe);Ne=U(el,ve),el.forEach(c),At.forEach(c),Ve=p(k),X=l(k,"SPAN",{class:!0,"data-svelte-h":!0}),T(X)!=="svelte-13dw89n"&&(X.textContent=Me),Ae=p(k),o=l(k,"SPAN",{class:!0});var yt=i(o);w=U(yt,"Chapter#: "),D=l(yt,"STRONG",{});var tl=i(D);qe=U(tl,ee),tl.forEach(c),yt.forEach(c),at=p(k),he=l(k,"SPAN",{class:!0,"data-svelte-h":!0}),T(he)!=="svelte-13dw89n"&&(he.textContent=Ft),rt=p(k),be=l(k,"SPAN",{class:!0});var Lt=i(be);nt=U(Lt,"Exercise: "),ye=l(Lt,"STRONG",{});var ll=i(ye);Ge=U(ll,Le),ll.forEach(c),Lt.forEach(c),ot=p(k),_e=l(k,"SPAN",{class:!0,"data-svelte-h":!0}),T(_e)!=="svelte-13dw89n"&&(_e.textContent=Rt),ct=p(k),me=l(k,"SPAN",{class:!0});var Ot=i(me);it=U(Ot,"File: "),Oe=l(Ot,"STRONG",{});var sl=i(Oe);ze=U(sl,Be),sl.forEach(c),Ot.forEach(c),k.forEach(c),ut=p(Ze),B=l(Ze,"BUTTON",{type:!0,class:!0});var al=i(B);Je=U(al,Fe),al.forEach(c),Ze.forEach(c),$t.forEach(c),dt=p(h),De=l(h,"MAIN",{class:!0});var rl=i(De);Se=l(rl,"DIV",{class:!0});var nl=i(Se);_=l(nl,"FORM",{class:!0});var V=i(_);te=l(V,"DIV",{class:!0});var xe=i(te);ge=l(xe,"H2",{class:!0,"data-svelte-h":!0}),T(ge)!=="svelte-11a9pmy"&&(ge.textContent=Ht),pt=p(xe),Dl(W.$$.fragment,xe),xe.forEach(c),vt=p(V),le=l(V,"DIV",{class:!0});var $e=i(le);je=l($e,"H2",{class:!0,"data-svelte-h":!0}),T(je)!=="svelte-g0jcho"&&(je.textContent=Mt),ht=p($e),F=l($e,"DIV",{class:!0});var ke=i(F);se=l(ke,"DIV",{class:!0});var et=i(se);ae=l(et,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),T(ae)!=="svelte-15lfxni"&&(ae.textContent=qt),bt=p(et),R=l(et,"INPUT",{id:!0,placeholder:!0,class:!0}),et.forEach(c),_t=p(ke),re=l(ke,"DIV",{class:!0});var tt=i(re);ne=l(tt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),T(ne)!=="svelte-74pu4x"&&(ne.textContent=Gt),mt=p(tt),H=l(tt,"INPUT",{id:!0,placeholder:!0,class:!0}),tt.forEach(c),gt=p(ke),oe=l(ke,"DIV",{class:!0});var lt=i(oe);ce=l(lt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),T(ce)!=="svelte-1tds9bi"&&(ce.textContent=zt),jt=p(lt),M=l(lt,"TEXTAREA",{id:!0,rows:!0,class:!0}),i(M).forEach(c),lt.forEach(c),ke.forEach(c),$e.forEach(c),Ct=p(V),q=l(V,"DIV",{class:!0});var Te=i(q);Ce=l(Te,"H2",{class:!0,"data-svelte-h":!0}),T(Ce)!=="svelte-e2fvaz"&&(Ce.textContent=Jt),Et=p(Te),G=l(Te,"DIV",{class:!0});var Ue=i(G);ie=l(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),T(ie)!=="svelte-jtdg33"&&(ie.textContent=Kt),Nt=p(Ue),Y=l(Ue,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),Dt=p(Ue),P=l(Ue,"DIV",{class:!0,role:!0,"aria-label":!0,tabindex:!0,"data-svelte-h":!0}),T(P)!=="svelte-tg95hu"&&(P.textContent=Qt),Ue.forEach(c),St=p(Te),z=l(Te,"DIV",{class:!0});var Ie=i(z);ue=l(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),T(ue)!=="svelte-1c30r00"&&(ue.textContent=Xt),kt=p(Ie),Z=l(Ie,"INPUT",{id:!0,class:!0}),Tt=p(Ie),Ee=l(Ie,"SMALL",{class:!0,"data-svelte-h":!0}),T(Ee)!=="svelte-5gqm84"&&(Ee.textContent=Wt),Ie.forEach(c),Te.forEach(c),Ut=p(V),de=l(V,"DIV",{class:!0});var st=i(de);x=l(st,"BUTTON",{class:!0,type:!0});var ol=i(x);Qe=U(ol,Re),ol.forEach(c),It=p(st),J=l(st,"BUTTON",{type:!0,class:!0});var cl=i(J);Pt=U(cl,"Clear"),cl.forEach(c),st.forEach(c),wt=p(V),j&&j.l(V),We=p(V),C&&C.l(V),V.forEach(c),nl.forEach(c),rl.forEach(c),h.forEach(c),this.h()},h(){t(u,"class","title svelte-13rccjb"),t(m,"type","button"),t(m,"class","btn btn-primary svelte-13rccjb"),m.disabled=S=a[7]||!a[10],t(v,"class","container svelte-13rccjb"),t(r,"class","header svelte-13rccjb"),t(Q,"class","chip svelte-13rccjb"),t(X,"class","sep svelte-13rccjb"),t(o,"class","chip svelte-13rccjb"),t(he,"class","sep svelte-13rccjb"),t(be,"class","chip svelte-13rccjb"),t(_e,"class","sep svelte-13rccjb"),t(me,"class","chip svelte-13rccjb"),t(b,"class","summary svelte-13rccjb"),t(B,"type","button"),t(B,"class","btn btn-primary svelte-13rccjb"),B.disabled=Ke=a[7]||!a[10],t(N,"class","container toolbar-inner svelte-13rccjb"),t(A,"class","toolbar svelte-13rccjb"),t(ge,"class","group-title svelte-13rccjb"),t(te,"class","group svelte-13rccjb"),t(je,"class","group-title svelte-13rccjb"),t(ae,"for","status"),t(ae,"class","svelte-13rccjb"),t(R,"id","status"),t(R,"placeholder","ready | draft | hidden"),t(R,"class","svelte-13rccjb"),t(se,"class","row svelte-13rccjb"),t(ne,"for","tags"),t(ne,"class","svelte-13rccjb"),t(H,"id","tags"),t(H,"placeholder","geometry, class9"),t(H,"class","svelte-13rccjb"),t(re,"class","row svelte-13rccjb"),t(ce,"for","description"),t(ce,"class","svelte-13rccjb"),t(M,"id","description"),t(M,"rows","2"),t(M,"class","svelte-13rccjb"),t(oe,"class","row wide svelte-13rccjb"),t(F,"class","grid-3 svelte-13rccjb"),t(le,"class","group svelte-13rccjb"),t(Ce,"class","group-title svelte-13rccjb"),t(ie,"for","file"),t(ie,"class","svelte-13rccjb"),t(Y,"id","file"),t(Y,"type","file"),t(Y,"accept",".html,.htm"),t(Y,"class","svelte-13rccjb"),t(P,"class","drop svelte-13rccjb"),t(P,"role","region"),t(P,"aria-label","File drop zone"),t(P,"tabindex","0"),t(G,"class","row svelte-13rccjb"),t(ue,"for","filename"),t(ue,"class","svelte-13rccjb"),t(Z,"id","filename"),Z.value=a[5],Z.readOnly=!0,t(Z,"class","svelte-13rccjb"),t(Ee,"class","hint svelte-13rccjb"),t(z,"class","row svelte-13rccjb"),t(q,"class","group svelte-13rccjb"),t(x,"class","btn btn-primary svelte-13rccjb"),t(x,"type","submit"),x.disabled=Xe=a[7]||!a[10],t(J,"type","button"),t(J,"class","btn svelte-13rccjb"),J.disabled=a[7],t(de,"class","actions svelte-13rccjb"),t(_,"class","form svelte-13rccjb"),t(Se,"class","panel svelte-13rccjb"),t(De,"class","container svelte-13rccjb"),t(d,"class","page dark svelte-13rccjb")},m(n,h){Bt(n,d,h),e(d,r),e(r,v),e(v,u),e(v,L),e(v,m),e(m,O),e(d,pe),e(d,A),e(A,N),e(N,b),e(b,Q),e(Q,we),e(Q,fe),e(fe,Ne),e(b,Ve),e(b,X),e(b,Ae),e(b,o),e(o,w),e(o,D),e(D,qe),e(b,at),e(b,he),e(b,rt),e(b,be),e(be,nt),e(be,ye),e(ye,Ge),e(b,ot),e(b,_e),e(b,ct),e(b,me),e(me,it),e(me,Oe),e(Oe,ze),e(N,ut),e(N,B),e(B,Je),e(d,dt),e(d,De),e(De,Se),e(Se,_),e(_,te),e(te,ge),e(te,pt),El(W,te,null),e(_,vt),e(_,le),e(le,je),e(le,ht),e(le,F),e(F,se),e(se,ae),e(se,bt),e(se,R),Pe(R,a[2]),e(F,_t),e(F,re),e(re,ne),e(re,mt),e(re,H),Pe(H,a[3]),e(F,gt),e(F,oe),e(oe,ce),e(oe,jt),e(oe,M),Pe(M,a[4]),e(_,Ct),e(_,q),e(q,Ce),e(q,Et),e(q,G),e(G,ie),e(G,Nt),e(G,Y),a[20](Y),e(G,Dt),e(G,P),e(q,St),e(q,z),e(z,ue),e(z,kt),e(z,Z),e(z,Tt),e(z,Ee),e(_,Ut),e(_,de),e(de,x),e(x,Qe),e(de,It),e(de,J),e(J,Pt),e(_,wt),j&&j.m(_,null),e(_,We),C&&C.m(_,null),g=!0,Vt||(Yt=[y(m,"click",a[15]),y(B,"click",a[15]),y(R,"input",a[17]),y(H,"input",a[18]),y(M,"input",a[19]),y(Y,"change",a[12]),y(P,"drop",a[13]),y(P,"dragover",Ul),y(P,"keydown",a[14]),y(J,"click",a[11]),y(_,"submit",Nl(a[15]))],Vt=!0)},p(n,[h]){(!g||h&128)&&E!==(E=n[7]?"Uploading…":"Upload")&&$(O,E),(!g||h&1152&&S!==(S=n[7]||!n[10]))&&(m.disabled=S),(!g||h&1)&&ve!==(ve=(n[0].tcode||"—")+"")&&$(Ne,ve),(!g||h&1)&&ee!==(ee=(n[0].chapterNo??"—")+"")&&$(qe,ee),(!g||h&1)&&Le!==(Le=(n[0].exerciseSlug||"—")+"")&&$(Ge,Le),(!g||h&2)&&Be!==(Be=(n[1]?n[1].name:"—")+"")&&$(ze,Be),(!g||h&128)&&Fe!==(Fe=n[7]?"Uploading…":"Upload")&&$(Je,Fe),(!g||h&1152&&Ke!==(Ke=n[7]||!n[10]))&&(B.disabled=Ke);const He={};!ft&&h&1&&(ft=!0,He.value=n[0],Cl(()=>ft=!1)),W.$set(He),h&4&&R.value!==n[2]&&Pe(R,n[2]),h&8&&H.value!==n[3]&&Pe(H,n[3]),h&16&&Pe(M,n[4]),(!g||h&32&&Z.value!==n[5])&&(Z.value=n[5]),(!g||h&128)&&Re!==(Re=n[7]?"Uploading…":"Upload")&&$(Qe,Re),(!g||h&1152&&Xe!==(Xe=n[7]||!n[10]))&&(x.disabled=Xe),(!g||h&128)&&(J.disabled=n[7]),n[8]?j?j.p(n,h):(j=il(n),j.c(),j.m(_,We)):j&&(j.d(1),j=null),n[9]?C?C.p(n,h):(C=ul(n),C.c(),C.m(_,null)):C&&(C.d(1),C=null)},i(n){g||(jl(W.$$.fragment,n),g=!0)},o(n){gl(W.$$.fragment,n),g=!1},d(n){n&&c(d),_l(W),a[20](null),j&&j.d(),C&&C.d(),Vt=!1,ml(Yt)}}}function Ul(a){a.preventDefault()}function Il(a,d,r){let v,u={tcode:"",chapterSlug:"",chapterNo:null,exerciseSlug:""},K="",L="",m="",E=null,O="",S,pe=!1,A="",N="";function b(){r(0,u={tcode:"",chapterSlug:"",chapterNo:null,exerciseSlug:""}),r(2,K=""),r(3,L=""),r(4,m=""),r(1,E=null),r(5,O=""),S&&r(6,S.value="",S),r(8,A=""),r(9,N="")}function Q(o){const w=o.target.files&&o.target.files[0]?o.target.files[0]:null;r(1,E=w),r(5,O=w?w.name.replace(/\.(html|htm)$/i,""):"")}function we(o){var D,ee;o.preventDefault();const w=((ee=(D=o.dataTransfer)==null?void 0:D.files)==null?void 0:ee[0])??null;r(1,E=w||null),r(5,O=E?E.name.replace(/\.(html|htm)$/i,""):"")}function fe(o){(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),S==null||S.click())}async function ve(){if(r(9,N=""),r(8,A=""),!v){r(9,N="Please fill required fields.");return}r(7,pe=!0);try{const o=new FormData;o.append("tcode",u.tcode),o.append("chapter",String(u.chapterNo)),o.append("exercise",u.exerciseSlug),K.trim()&&o.append("status",K.trim()),L.trim()&&o.append("tags",L.trim()),m.trim()&&o.append("description",m.trim()),o.append("file",E),o.append("filename",O||E.name.replace(/\.(html|htm)$/i,""));const w=await fetch("/admin/uploadNotes",{method:"POST",body:o}),D=await w.json();w.ok?(r(8,A=`Uploaded ${(D==null?void 0:D.uploaded)??1} note.`),b()):r(9,N=(D==null?void 0:D.error)??"Upload failed.")}catch(o){r(9,N=(o==null?void 0:o.message)??"Network error.")}finally{r(7,pe=!1)}}function Ne(o){u=o,r(0,u)}function Ve(){K=this.value,r(2,K)}function X(){L=this.value,r(3,L)}function Me(){m=this.value,r(4,m)}function Ae(o){dl[o?"unshift":"push"](()=>{S=o,r(6,S)})}return a.$$.update=()=>{a.$$.dirty&3&&r(10,v=!!u.tcode&&!!u.chapterNo&&!!u.exerciseSlug&&!!E)},[u,E,K,L,m,O,S,pe,A,N,v,b,Q,we,fe,ve,Ne,Ve,X,Me,Ae]}class Al extends fl{constructor(d){super(),vl(this,d,Il,Tl,hl,{})}}export{Al as component};
