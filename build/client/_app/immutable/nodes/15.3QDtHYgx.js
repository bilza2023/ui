import{S as be,i as he,s as me,n as re,d as m,D as ve,F as ue,x as l,e as de,f as O,h as n,J as W,B as _e,m as k,j as p,k as T,A as D,l as X,q as z,o as d,p as Y}from"../chunks/MRdXX-TE.js";import"../chunks/IHki7fMi.js";import{g as qe}from"../chunks/OBsGlrAT.js";function ce(o){let s,t;return{c(){s=d("div"),t=Y(o[3]),this.h()},l(e){s=p(e,"DIV",{class:!0,"aria-live":!0});var r=T(s);t=X(r,o[3]),r.forEach(m),this.h()},h(){l(s,"class","error svelte-1qzbqb4"),l(s,"aria-live","polite")},m(e,r){O(e,s,r),n(s,t)},p(e,r){r&8&&de(t,e[3])},d(e){e&&m(s)}}}function fe(o){let s;return{c(){s=Y("Signing in‚Ä¶")},l(t){s=X(t,"Signing in‚Ä¶")},m(t,e){O(t,s,e)},d(t){t&&m(s)}}}function pe(o){let s;return{c(){s=Y("Log in")},l(t){s=X(t,"Log in")},m(t,e){O(t,s,e)},d(t){t&&m(s)}}}function ge(o){let s,t,e,r,H="üåê Taleem.Help",C,_,j="Log in",A,y,E,I="Email",w,a,Z,L,N,se="Password",x,S,b,U,$,q,B=o[4]?"Hide":"Show",V,ee,M,v,F,J,te,P,ae='No account? <a href="/register" class="svelte-1qzbqb4">Create one</a>',le,ne,u=o[3]&&ce(o),c=o[2]&&fe(),f=!o[2]&&pe();return{c(){s=z(),t=d("div"),e=d("form"),r=d("h1"),r.textContent=H,C=z(),_=d("h1"),_.textContent=j,A=z(),y=d("label"),E=d("span"),E.textContent=I,w=z(),a=d("input"),Z=z(),L=d("label"),N=d("span"),N.textContent=se,x=z(),S=d("div"),b=d("input"),$=z(),q=d("button"),V=Y(B),ee=z(),u&&u.c(),M=z(),v=d("button"),c&&c.c(),F=z(),f&&f.c(),te=z(),P=d("p"),P.innerHTML=ae,this.h()},l(i){_e("svelte-10qpq3o",document.head).forEach(m),s=k(i),t=p(i,"DIV",{class:!0});var oe=T(t);e=p(oe,"FORM",{class:!0,autocomplete:!0});var h=T(e);r=p(h,"H1",{class:!0,"data-svelte-h":!0}),D(r)!=="svelte-8xlis3"&&(r.textContent=H),C=k(h),_=p(h,"H1",{class:!0,"data-svelte-h":!0}),D(_)!=="svelte-1x2klrl"&&(_.textContent=j),A=k(h),y=p(h,"LABEL",{class:!0});var R=T(y);E=p(R,"SPAN",{class:!0,"data-svelte-h":!0}),D(E)!=="svelte-1bg9cgq"&&(E.textContent=I),w=k(R),a=p(R,"INPUT",{type:!0,autocomplete:!0,autocapitalize:!0,spellcheck:!0,inputmode:!0,placeholder:!0,class:!0}),R.forEach(m),Z=k(h),L=p(h,"LABEL",{class:!0});var G=T(L);N=p(G,"SPAN",{class:!0,"data-svelte-h":!0}),D(N)!=="svelte-1kvjhoz"&&(N.textContent=se),x=k(G),S=p(G,"DIV",{class:!0});var K=T(S);b=p(K,"INPUT",{type:!0,minlength:!0,autocomplete:!0,placeholder:!0,class:!0}),$=k(K),q=p(K,"BUTTON",{type:!0,class:!0,"aria-pressed":!0,"aria-label":!0});var ie=T(q);V=X(ie,B),ie.forEach(m),K.forEach(m),G.forEach(m),ee=k(h),u&&u.l(h),M=k(h),v=p(h,"BUTTON",{class:!0,type:!0});var Q=T(v);c&&c.l(Q),F=k(Q),f&&f.l(Q),Q.forEach(m),te=k(h),P=p(h,"P",{class:!0,"data-svelte-h":!0}),D(P)!=="svelte-wvdxtg"&&(P.innerHTML=ae),h.forEach(m),oe.forEach(m),this.h()},h(){document.title="Login",l(r,"class","text-center svelte-1qzbqb4"),l(_,"class","svelte-1qzbqb4"),l(E,"class","svelte-1qzbqb4"),l(a,"type","email"),a.required=!0,l(a,"autocomplete","email"),l(a,"autocapitalize","off"),l(a,"spellcheck","false"),l(a,"inputmode","email"),l(a,"placeholder","you@example.com"),l(a,"class","svelte-1qzbqb4"),l(y,"class","svelte-1qzbqb4"),l(N,"class","svelte-1qzbqb4"),l(b,"type",U=o[4]?"text":"password"),b.value=o[1],b.required=!0,l(b,"minlength","6"),l(b,"autocomplete","current-password"),l(b,"placeholder","‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"),l(b,"class","svelte-1qzbqb4"),l(q,"type","button"),l(q,"class","toggle svelte-1qzbqb4"),l(q,"aria-pressed",o[4]),l(q,"aria-label","Toggle password visibility"),l(S,"class","pwd svelte-1qzbqb4"),l(L,"class","svelte-1qzbqb4"),l(v,"class","submit svelte-1qzbqb4"),l(v,"type","submit"),v.disabled=J=o[2]||!o[0]||!o[1],l(P,"class","hint svelte-1qzbqb4"),l(e,"class","card svelte-1qzbqb4"),l(e,"autocomplete","on"),e.noValidate=!0,l(t,"class","wrap svelte-1qzbqb4")},m(i,g){O(i,s,g),O(i,t,g),n(t,e),n(e,r),n(e,C),n(e,_),n(e,A),n(e,y),n(y,E),n(y,w),n(y,a),ue(a,o[0]),n(e,Z),n(e,L),n(L,N),n(L,x),n(L,S),n(S,b),n(S,$),n(S,q),n(q,V),n(e,ee),u&&u.m(e,null),n(e,M),n(e,v),c&&c.m(v,null),n(v,F),f&&f.m(v,null),n(e,te),n(e,P),le||(ne=[W(a,"input",o[6]),W(b,"input",o[7]),W(q,"click",o[8]),W(e,"submit",o[5])],le=!0)},p(i,[g]){g&1&&a.value!==i[0]&&ue(a,i[0]),g&16&&U!==(U=i[4]?"text":"password")&&l(b,"type",U),g&2&&b.value!==i[1]&&(b.value=i[1]),g&16&&B!==(B=i[4]?"Hide":"Show")&&de(V,B),g&16&&l(q,"aria-pressed",i[4]),i[3]?u?u.p(i,g):(u=ce(i),u.c(),u.m(e,M)):u&&(u.d(1),u=null),i[2]?c||(c=fe(),c.c(),c.m(v,F)):c&&(c.d(1),c=null),i[2]?f&&(f.d(1),f=null):f||(f=pe(),f.c(),f.m(v,null)),g&7&&J!==(J=i[2]||!i[0]||!i[1])&&(v.disabled=J)},i:re,o:re,d(i){i&&(m(s),m(t)),u&&u.d(),c&&c.d(),f&&f.d(),le=!1,ve(ne)}}}function ke(o,s,t){let e="",r="",H=!1,C="",_=!1;async function j(I){I.preventDefault(),t(3,C=""),t(2,H=!0);try{const w=await fetch("/api/auth/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:e,password:r})}),a=await w.json().catch(()=>({}));if(!w.ok){t(3,C=(a==null?void 0:a.detail)||(a==null?void 0:a.error)||"Login failed.");return}try{a!=null&&a.token&&localStorage.setItem("token",a.token)}catch{}await qe("/")}catch(w){t(3,C=(w==null?void 0:w.message)??"Network error.")}finally{t(2,H=!1)}}function A(){e=this.value,t(0,e)}return[e,r,H,C,_,j,A,I=>t(1,r=I.target.value),()=>t(4,_=!_)]}class Ce extends be{constructor(s){super(),he(this,s,ke,ge,me,{})}}export{Ce as component};
