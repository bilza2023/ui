import{S as Ge,i as Je,s as Ke,d as h,x as Se,I as Qe,G as We,t as Le,a as Pe,J as x,K as Te,e as de,y as we,o as t,B as _e,f as r,L as qe,E as Ye,q as D,z as Ve,j as u,k as E,C as ue,p as w,v as A,A as Re,l as d,r as q,m as le,M as je,n as Ze}from"../chunks/6VfYvrwu.js";import{e as De}from"../chunks/CXMHU-kk.js";import"../chunks/IHki7fMi.js";import{g as ze}from"../chunks/BxIKGKka.js";import{N as Xe}from"../chunks/B_jSr6FE.js";import{A as xe}from"../chunks/C5KAMFK-.js";/* empty css                */function He(l,n,e){const c=l.slice();c[17]=n[e];const i=lt(c[17]);return c[18]=i,c}function Ue(l,n,e){const c=l.slice();return c[21]=n[e],c}function Be(l){let n,e=l[21]+"",c,i;return{c(){n=d("option"),c=q(e),this.h()},l(g){n=u(g,"OPTION",{});var _=E(n);c=w(_,e),_.forEach(h),this.h()},h(){n.__value=i=l[21],x(n,n.__value)},m(g,_){de(g,n,_),t(n,c)},p(g,_){_&32&&e!==(e=g[21]+"")&&le(c,e),_&32&&i!==(i=g[21])&&(n.__value=i,x(n,n.__value))},d(g){g&&h(n)}}}function $e(l){let n,e,c="<tr><th>Type</th> <th>Name / Filename</th> <th>Path</th> <th>Edited</th> <th>Created</th> <th></th></tr>",i,g,_=De(l[0]),f=[];for(let s=0;s<_.length;s+=1)f[s]=Me(He(l,_,s));return{c(){n=d("table"),e=d("thead"),e.innerHTML=c,i=A(),g=d("tbody");for(let s=0;s<f.length;s+=1)f[s].c();this.h()},l(s){n=u(s,"TABLE",{class:!0});var b=E(n);e=u(b,"THEAD",{"data-svelte-h":!0}),ue(e)!=="svelte-wtqvz6"&&(e.innerHTML=c),i=D(b),g=u(b,"TBODY",{});var p=E(g);for(let m=0;m<f.length;m+=1)f[m].l(p);p.forEach(h),b.forEach(h),this.h()},h(){r(n,"class","taleemTable")},m(s,b){de(s,n,b),t(n,e),t(n,i),t(n,g);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(g,null)},p(s,b){if(b&1){_=De(s[0]);let p;for(p=0;p<_.length;p+=1){const m=He(s,_,p);f[p]?f[p].p(m,b):(f[p]=Me(m),f[p].c(),f[p].m(g,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=_.length}},d(s){s&&h(n),Qe(f,s)}}}function et(l){let n,e="No items found.";return{c(){n=d("div"),n.textContent=e,this.h()},l(c){n=u(c,"DIV",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-j7wzyv"&&(n.textContent=e),this.h()},h(){r(n,"class","empty svelte-18cny0n")},m(c,i){de(c,n,i)},p:Ze,d(c){c&&h(n)}}}function Me(l){let n,e,c,i=l[18].label+"",g,_,f,s,b,p=(l[17].name??l[17].filename)+"",m,y,U,S=l[17].filename+"",L,ee,V,I,Z=l[17].tcode+"",C,O,F,ne,te=l[17].chapter+"",N,Q,ae=l[17].exercise+"",se,P,R,oe=(l[17].editedAt?new Date(l[17].editedAt).toLocaleString():"—")+"",B,ge,j,re=(l[17].createdAt?new Date(l[17].createdAt).toLocaleString():"—")+"",ce,W,G,M,X,Y,he,J,$,k,Ee,z,H,a,T;return{c(){n=d("tr"),e=d("td"),c=d("span"),g=q(i),f=A(),s=d("td"),b=d("div"),m=q(p),y=A(),U=d("div"),L=q(S),ee=A(),V=d("td"),I=d("div"),C=q(Z),O=A(),F=d("div"),ne=q("Ch "),N=q(te),Q=q(" · "),se=q(ae),P=A(),R=d("td"),B=q(oe),ge=A(),j=d("td"),ce=q(re),W=A(),G=d("td"),M=d("a"),X=q("Open"),he=A(),J=d("a"),$=q("Editor"),Ee=A(),z=d("a"),H=q("Delete"),T=A(),this.h()},l(o){n=u(o,"TR",{});var v=E(n);e=u(v,"TD",{class:!0});var K=E(e);c=u(K,"SPAN",{class:!0,style:!0});var pe=E(c);g=w(pe,i),pe.forEach(h),K.forEach(h),f=D(v),s=u(v,"TD",{class:!0});var ve=E(s);b=u(ve,"DIV",{class:!0});var ye=E(b);m=w(ye,p),ye.forEach(h),y=D(ve),U=u(ve,"DIV",{class:!0});var ke=E(U);L=w(ke,S),ke.forEach(h),ve.forEach(h),ee=D(v),V=u(v,"TD",{class:!0});var fe=E(V);I=u(fe,"DIV",{class:!0});var me=E(I);C=w(me,Z),me.forEach(h),O=D(fe),F=u(fe,"DIV",{class:!0});var ie=E(F);ne=w(ie,"Ch "),N=w(ie,te),Q=w(ie," · "),se=w(ie,ae),ie.forEach(h),fe.forEach(h),P=D(v),R=u(v,"TD",{});var be=E(R);B=w(be,oe),be.forEach(h),ge=D(v),j=u(v,"TD",{});var Ae=E(j);ce=w(Ae,re),Ae.forEach(h),W=D(v),G=u(v,"TD",{class:!0});var Ce=E(G);M=u(Ce,"A",{class:!0,href:!0,target:!0,rel:!0});var Ie=E(M);X=w(Ie,"Open"),Ie.forEach(h),he=D(Ce),J=u(Ce,"A",{class:!0,href:!0,target:!0,rel:!0});var Oe=E(J);$=w(Oe,"Editor"),Oe.forEach(h),Ee=D(Ce),z=u(Ce,"A",{class:!0,href:!0,target:!0,rel:!0});var Ne=E(z);H=w(Ne,"Delete"),Ne.forEach(h),Ce.forEach(h),T=D(v),v.forEach(h),this.h()},h(){r(c,"class","badge svelte-18cny0n"),r(c,"style",_=`--bg:${l[18].bg};--fg:${l[18].fg}`),r(e,"class","type"),r(b,"class","n1"),r(U,"class","n2"),r(s,"class","name"),r(I,"class","p1"),r(F,"class","p2"),r(V,"class","path"),r(M,"class","btn small svelte-18cny0n"),r(M,"href",Y=Fe(l[17])),r(M,"target","_blank"),r(M,"rel","noopener"),r(J,"class","btn small svelte-18cny0n"),r(J,"href",k="/admin/editor?filename="+l[17].filename),r(J,"target","_blank"),r(J,"rel","noopener"),r(z,"class","btn small svelte-18cny0n"),r(z,"href",a="/admin/delete?filename="+l[17].filename),r(z,"target","_blank"),r(z,"rel","noopener"),r(G,"class","actions")},m(o,v){de(o,n,v),t(n,e),t(e,c),t(c,g),t(n,f),t(n,s),t(s,b),t(b,m),t(s,y),t(s,U),t(U,L),t(n,ee),t(n,V),t(V,I),t(I,C),t(V,O),t(V,F),t(F,ne),t(F,N),t(F,Q),t(F,se),t(n,P),t(n,R),t(R,B),t(n,ge),t(n,j),t(j,ce),t(n,W),t(n,G),t(G,M),t(M,X),t(G,he),t(G,J),t(J,$),t(G,Ee),t(G,z),t(z,H),t(n,T)},p(o,v){v&1&&i!==(i=o[18].label+"")&&le(g,i),v&1&&_!==(_=`--bg:${o[18].bg};--fg:${o[18].fg}`)&&r(c,"style",_),v&1&&p!==(p=(o[17].name??o[17].filename)+"")&&le(m,p),v&1&&S!==(S=o[17].filename+"")&&le(L,S),v&1&&Z!==(Z=o[17].tcode+"")&&le(C,Z),v&1&&te!==(te=o[17].chapter+"")&&le(N,te),v&1&&ae!==(ae=o[17].exercise+"")&&le(se,ae),v&1&&oe!==(oe=(o[17].editedAt?new Date(o[17].editedAt).toLocaleString():"—")+"")&&le(B,oe),v&1&&re!==(re=(o[17].createdAt?new Date(o[17].createdAt).toLocaleString():"—")+"")&&le(ce,re),v&1&&Y!==(Y=Fe(o[17]))&&r(M,"href",Y),v&1&&k!==(k="/admin/editor?filename="+o[17].filename)&&r(J,"href",k),v&1&&a!==(a="/admin/delete?filename="+o[17].filename)&&r(z,"href",a)},d(o){o&&h(n)}}}function tt(l){let n,e,c,i,g,_,f,s,b="Question Index",p,m,y,U,S,L,ee,V,I,Z,C,O,F,ne,te,N,Q,ae="All tcodes",se,P,R,oe="Last Edited (newest)",B,ge="Created (newest)",j,re="Name (A–Z)",ce,W,G="Reset",M,X,Y,he,J;e=new Xe({}),i=new xe({});let $=De(l[5]),k=[];for(let a=0;a<$.length;a+=1)k[a]=Be(Ue(l,$,a));function Ee(a,T){return a[0].length===0?et:$e}let z=Ee(l),H=z(l);return{c(){n=A(),Re(e.$$.fragment),c=A(),Re(i.$$.fragment),g=A(),_=d("div"),f=d("header"),s=d("h1"),s.textContent=b,p=A(),m=d("div"),y=d("input"),U=A(),S=d("select"),L=d("option"),ee=q("All"),I=d("option"),Z=q("Decks"),O=d("option"),F=q("Notes"),te=A(),N=d("select"),Q=d("option"),Q.textContent=ae;for(let a=0;a<k.length;a+=1)k[a].c();se=A(),P=d("select"),R=d("option"),R.textContent=oe,B=d("option"),B.textContent=ge,j=d("option"),j.textContent=re,ce=A(),W=d("button"),W.textContent=G,M=A(),X=d("section"),H.c(),this.h()},l(a){Ye("svelte-19gpdzi",document.head).forEach(h),n=D(a),Ve(e.$$.fragment,a),c=D(a),Ve(i.$$.fragment,a),g=D(a),_=u(a,"DIV",{class:!0});var o=E(_);f=u(o,"HEADER",{class:!0});var v=E(f);s=u(v,"H1",{class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-a4tuxo"&&(s.textContent=b),p=D(v),m=u(v,"DIV",{class:!0});var K=E(m);y=u(K,"INPUT",{class:!0,type:!0,placeholder:!0}),U=D(K),S=u(K,"SELECT",{class:!0});var pe=E(S);L=u(pe,"OPTION",{});var ve=E(L);ee=w(ve,"All"),ve.forEach(h),I=u(pe,"OPTION",{});var ye=E(I);Z=w(ye,"Decks"),ye.forEach(h),O=u(pe,"OPTION",{});var ke=E(O);F=w(ke,"Notes"),ke.forEach(h),pe.forEach(h),te=D(K),N=u(K,"SELECT",{class:!0});var fe=E(N);Q=u(fe,"OPTION",{"data-svelte-h":!0}),ue(Q)!=="svelte-1exhdx9"&&(Q.textContent=ae);for(let be=0;be<k.length;be+=1)k[be].l(fe);fe.forEach(h),se=D(K),P=u(K,"SELECT",{class:!0});var me=E(P);R=u(me,"OPTION",{"data-svelte-h":!0}),ue(R)!=="svelte-10puezt"&&(R.textContent=oe),B=u(me,"OPTION",{"data-svelte-h":!0}),ue(B)!=="svelte-g65bl"&&(B.textContent=ge),j=u(me,"OPTION",{"data-svelte-h":!0}),ue(j)!=="svelte-1tau8uj"&&(j.textContent=re),me.forEach(h),ce=D(K),W=u(K,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(W)!=="svelte-131kcaj"&&(W.textContent=G),K.forEach(h),v.forEach(h),M=D(o),X=u(o,"SECTION",{class:!0});var ie=E(X);H.l(ie),ie.forEach(h),o.forEach(h),this.h()},h(){document.title="Admin — Question Index",r(s,"class","svelte-18cny0n"),r(y,"class","search svelte-18cny0n"),r(y,"type","search"),r(y,"placeholder","Search filename / name / desc / exercise…"),L.__value="",x(L,L.__value),L.selected=V=!l[2],I.__value="deck",x(I,I.__value),I.selected=C=l[2]==="deck",O.__value="note",x(O,O.__value),O.selected=ne=l[2]==="note",r(S,"class","sel svelte-18cny0n"),Q.__value="",x(Q,Q.__value),r(N,"class","sel svelte-18cny0n"),l[3]===void 0&&qe(()=>l[15].call(N)),R.__value="edited_desc",x(R,R.__value),B.__value="created_desc",x(B,B.__value),j.__value="name_asc",x(j,j.__value),r(P,"class","sel svelte-18cny0n"),l[4]===void 0&&qe(()=>l[16].call(P)),r(W,"class","clear svelte-18cny0n"),r(m,"class","controls svelte-18cny0n"),r(f,"class","top compact svelte-18cny0n"),r(X,"class","taleemTableWrap svelte-18cny0n"),r(_,"class","page svelte-18cny0n")},m(a,T){de(a,n,T),we(e,a,T),de(a,c,T),we(i,a,T),de(a,g,T),de(a,_,T),t(_,f),t(f,s),t(f,p),t(f,m),t(m,y),x(y,l[1]),t(m,U),t(m,S),t(S,L),t(L,ee),t(S,I),t(I,Z),t(S,O),t(O,F),t(m,te),t(m,N),t(N,Q);for(let o=0;o<k.length;o+=1)k[o]&&k[o].m(N,null);Te(N,l[3],!0),t(m,se),t(m,P),t(P,R),t(P,B),t(P,j),Te(P,l[4],!0),t(m,ce),t(m,W),t(_,M),t(_,X),H.m(X,null),Y=!0,he||(J=[_e(y,"input",l[12]),_e(y,"keydown",l[13]),_e(S,"change",l[14]),_e(N,"change",l[15]),_e(N,"change",l[6]),_e(P,"change",l[16]),_e(P,"change",l[6]),_e(W,"click",l[7])],he=!0)},p(a,[T]){if(T&2&&y.value!==a[1]&&x(y,a[1]),(!Y||T&4&&V!==(V=!a[2]))&&(L.selected=V),(!Y||T&4&&C!==(C=a[2]==="deck"))&&(I.selected=C),(!Y||T&4&&ne!==(ne=a[2]==="note"))&&(O.selected=ne),T&32){$=De(a[5]);let o;for(o=0;o<$.length;o+=1){const v=Ue(a,$,o);k[o]?k[o].p(v,T):(k[o]=Be(v),k[o].c(),k[o].m(N,null))}for(;o<k.length;o+=1)k[o].d(1);k.length=$.length}T&40&&Te(N,a[3]),T&16&&Te(P,a[4]),z===(z=Ee(a))&&H?H.p(a,T):(H.d(1),H=z(a),H&&(H.c(),H.m(X,null)))},i(a){Y||(Pe(e.$$.fragment,a),Pe(i.$$.fragment,a),Y=!0)},o(a){Le(e.$$.fragment,a),Le(i.$$.fragment,a),Y=!1},d(a){a&&(h(n),h(c),h(g),h(_)),Se(e,a),Se(i,a),Qe(k,a),H.d(),he=!1,We(J)}}}function Fe(l){return l.type==="deck"?`/player?filename=${encodeURIComponent(l.filename)}`:l.type==="note"?`/notes?filename=${encodeURIComponent(l.filename)}`:"#"}function lt(l){return l.type==="deck"?{label:"Deck",bg:"#0c0535",fg:"#dcd6ff"}:l.type==="note"?{label:"Note",bg:"#6c430b",fg:"#ffe3c4"}:{label:l.type??"Item",bg:"#2E1C02",fg:"#e6ccb0"}}function nt(l,n,e){let c,{data:i}=n,g=[],_={all:0,decks:0,notes:0},f={},s={q:"",type:null,tcode:null,limit:200,offset:0,sort:"edited_desc"},b="",p=null,m=null,y="edited_desc";function U(){const C=new URLSearchParams;b&&C.set("q",b),p&&C.set("type",p),m&&C.set("tcode",m),y&&C.set("sort",y),C.set("limit",String(s.limit??200)),C.set("offset","0"),ze(`/admin?${C.toString()}`,{replaceState:!0})}function S(){ze("/admin",{replaceState:!0})}function L(){b=this.value,e(1,b),e(8,i),e(9,_),e(10,f),e(11,s)}const ee=C=>C.key==="Enter"&&U(),V=C=>{const O=C.currentTarget.value;e(2,p=O||null),U()};function I(){m=je(this),e(3,m),e(8,i),e(9,_),e(10,f),e(11,s),e(5,c),e(10,f),e(8,i),e(9,_),e(11,s)}function Z(){y=je(this),e(4,y),e(8,i),e(9,_),e(10,f),e(11,s)}return l.$$set=C=>{"data"in C&&e(8,i=C.data)},l.$$.update=()=>{l.$$.dirty&3840&&i&&(e(0,g=i.items??[]),e(9,_=i.totals??_),e(10,f=i.tcodeStats??f),e(11,s={...s,...i.filters??{}}),e(1,b=s.q??""),e(2,p=s.type==="deck"||s.type==="note"?s.type:null),e(3,m=s.tcode??null),e(4,y=s.sort??"edited_desc")),l.$$.dirty&1024&&e(5,c=Object.keys(f).sort((C,O)=>C.localeCompare(O)))},[g,b,p,m,y,c,U,S,i,_,f,s,L,ee,V,I,Z]}class _t extends Ge{constructor(n){super(),Je(this,n,nt,tt,Ke,{data:8})}}export{_t as component};
