import{S as N,i as P,s as A,d as u,o as h,p,J as S,c as q,b as m,r as d,H as C,z as I,u as U,e as y,h as M,A as k,j as w,k as E,l as x,D as z,K as $,n as _,w as H,m as F,q as O,v as J,x as V}from"../chunks/CJK8MNlv.js";import"../chunks/IHki7fMi.js";import{p as G}from"../chunks/CbD6mK0K.js";import{S as K}from"../chunks/cg3StLeL.js";const v=new Map;async function R(l,{fetch:t=globalThis.fetch}={}){if(!l)throw new Error("deckService.getDeck: filename required");if(v.has(l))return v.get(l);const r=`/decks/${l}.json`;let e;try{e=await t(r)}catch(o){throw new Error(`Network error while fetching ${r}: ${o.message}`)}if(!e.ok){const o=e.status===404?"not found":`status ${e.status}`;throw new Error(`Deck "${l}" ${o}`)}let n;try{n=await e.json()}catch(o){throw new Error(`Invalid JSON for deck "${l}": ${o.message}`)}if(n.version!=="deck-v1"||!Array.isArray(n.deck))throw new Error(`Deck "${l}" failed basic schema check`);return v.set(l,n),n}async function B({url:l,fetch:t}){const r=l.searchParams.get("filename");if(!r)return{deck:null,background:null,timed:!1,error:"Filename parameter is required."};try{const e=await R(r,{fetch:t}),n=e.deck.some(o=>o.data.some(c=>c.showAt&&c.showAt>0));return{deck:e.deck,background:e.background??null,timed:n,error:null}}catch(e){return{deck:null,background:null,timed:!1,error:e.message}}}const ne=Object.freeze(Object.defineProperty({__proto__:null,load:B},Symbol.toStringTag,{value:"Module"}));function T(l){let t,r,e,n;const o=[X,W,Q],c=[];function f(s,a){return s[1]?0:s[3]?1:2}return t=f(l),r=c[t]=o[t](l),{c(){r.c(),e=k()},l(s){r.l(s),e=k()},m(s,a){c[t].m(s,a),m(s,e,a),n=!0},p(s,a){let i=t;t=f(s),t===i?c[t].p(s,a):($(),h(c[i],1,1,()=>{c[i]=null}),S(),r=c[t],r?r.p(s,a):(r=c[t]=o[t](s),r.c()),p(r,1),r.m(e.parentNode,e))},i(s){n||(p(r),n=!0)},o(s){h(r),n=!1},d(s){s&&u(e),c[t].d(s)}}}function Q(l){let t,r='<p class="text-lg font-medium text-gray-600">Loadingâ€¦</p>';return{c(){t=w("div"),t.innerHTML=r,this.h()},l(e){t=y(e,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-draa8r"&&(t.innerHTML=r),this.h()},h(){d(t,"class","flex items-center justify-center h-full p-8 svelte-1m0ephw")},m(e,n){m(e,t,n)},p:_,i:_,o:_,d(e){e&&u(t)}}}function W(l){let t=l[0],r,e,n=j(l);return{c(){n.c(),r=k()},l(o){n.l(o),r=k()},m(o,c){n.m(o,c),m(o,r,c),e=!0},p(o,c){c&1&&A(t,t=o[0])?($(),h(n,1,1,_),S(),n=j(o),n.c(),p(n,1),n.m(r.parentNode,r)):n.p(o,c)},i(o){e||(p(n),e=!0)},o(o){h(n),e=!1},d(o){o&&u(r),n.d(o)}}}function X(l){let t,r='<p class="text-lg font-semibold text-gray-700">Content not found.</p>';return{c(){t=w("div"),t.innerHTML=r,this.h()},l(e){t=y(e,"DIV",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-pzckeo"&&(t.innerHTML=r),this.h()},h(){d(t,"class","flex items-center justify-center h-full p-8 svelte-1m0ephw")},m(e,n){m(e,t,n)},p:_,i:_,o:_,d(e){e&&u(t)}}}function j(l){let t,r;return t=new K({props:{deck:l[3],soundUrl:l[0],background:l[4]}}),{c(){V(t.$$.fragment)},l(e){J(t.$$.fragment,e)},m(e,n){O(t,e,n),r=!0},p(e,n){const o={};n&1&&(o.soundUrl=e[0]),t.$set(o)},i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){h(t.$$.fragment,e),r=!1},d(e){F(t,e)}}}function Y(l){let t,r,e,n,o,c,f,s=l[2]&&T(l);return{c(){t=w("meta"),r=E(),e=w("img"),o=E(),s&&s.c(),c=k(),this.h()},l(a){const i=U("svelte-11evgey",document.head);t=y(i,"META",{name:!0,content:!0}),i.forEach(u),r=M(a),e=y(a,"IMG",{src:!0,alt:!0,style:!0,width:!0,height:!0}),o=M(a),s&&s.l(a),c=k(),this.h()},h(){d(t,"name","robots"),d(t,"content","index,follow"),C(e.src,n="/images/taleem.webp")||d(e,"src",n),d(e,"alt","Taleem Slide Preview"),I(e,"display","none"),d(e,"width","1200"),d(e,"height","630")},m(a,i){q(document.head,t),m(a,r,i),m(a,e,i),m(a,o,i),s&&s.m(a,i),m(a,c,i),f=!0},p(a,[i]){a[2]?s?(s.p(a,i),i&4&&p(s,1)):(s=T(a),s.c(),p(s,1),s.m(c.parentNode,c)):s&&($(),h(s,1,1,()=>{s=null}),S())},i(a){f||(p(s),f=!0)},o(a){h(s),f=!1},d(a){a&&(u(r),u(e),u(o),u(c)),u(t),s&&s.d(a)}}}function Z(l,t,r){let e;x(l,G,g=>r(6,e=g));let{data:n}=t;const{deck:o,background:c,error:f}=n;let s=null,a=!1,i=!1;return z(async()=>{const D=new URLSearchParams(e.url.search).get("filename");if(!D)r(1,a=!0);else try{const b=`${D}.opus`,L=await fetch(`/sounds/${b}`,{method:"HEAD",cache:"no-store"});r(0,s=L.ok?`/sounds/${b}`:null)}catch(b){console.log("Fetch error for sound file:",b.message),r(0,s=null)}return r(2,i=!0),()=>{}}),l.$$set=g=>{"data"in g&&r(5,n=g.data)},[s,a,i,o,c,n]}class oe extends N{constructor(t){super(),P(this,t,Z,Y,A,{data:5})}}export{oe as component,ne as universal};
