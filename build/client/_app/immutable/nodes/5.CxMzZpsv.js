import{S as Tt,i as Dt,s as At,d as f,v as ct,E as kt,D as Nt,t as ht,a as ut,e as J,F as Ce,G as Ue,I as We,f as Ee,w as it,h as e,J as ie,x as n,K as ft,B as It,m as b,y as dt,j as r,k as g,A as j,l as N,q as C,z as _t,o as c,p as I,L as vt,n as St}from"../chunks/MRdXX-TE.js";import{e as Ye}from"../chunks/ReGSdYAt.js";import"../chunks/IHki7fMi.js";import{N as yt}from"../chunks/DnkUNHIT.js";import{g as pt}from"../chunks/OBsGlrAT.js";import{A as Ot}from"../chunks/PRmY6kj3.js";/* empty css                */function mt(t,s,l){const d=t.slice();d[19]=s[l];const _=Vt(d[19]);return d[20]=_,d}function gt(t,s,l){const d=t.slice();return d[23]=s[l],d}function bt(t){var p;let s,l=t[23]+"",d,_,T=(((p=t[1][t[23]])==null?void 0:p.total)??0)+"",v,u,a;return{c(){s=c("option"),d=I(l),_=I(" ("),v=I(T),u=I(")"),this.h()},l(h){s=r(h,"OPTION",{});var m=g(s);d=N(m,l),_=N(m," ("),v=N(m,T),u=N(m,")"),m.forEach(f),this.h()},h(){s.__value=a=t[23],Ce(s,s.__value)},m(h,m){Ee(h,s,m),e(s,d),e(s,_),e(s,v),e(s,u)},p(h,m){var D;m&128&&l!==(l=h[23]+"")&&J(d,l),m&130&&T!==(T=(((D=h[1][h[23]])==null?void 0:D.total)??0)+"")&&J(v,T),m&128&&a!==(a=h[23])&&(s.__value=a,Ce(s,s.__value))},d(h){h&&f(s)}}}function Lt(t){let s,l,d="<tr><th>Type</th> <th>Name / Filename</th> <th>Path</th> <th>Edited</th> <th>Created</th> <th></th></tr>",_,T,v=Ye(t[2]),u=[];for(let a=0;a<v.length;a+=1)u[a]=Ct(mt(t,v,a));return{c(){s=c("table"),l=c("thead"),l.innerHTML=d,_=C(),T=c("tbody");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){s=r(a,"TABLE",{class:!0});var p=g(s);l=r(p,"THEAD",{"data-svelte-h":!0}),j(l)!=="svelte-wtqvz6"&&(l.innerHTML=d),_=b(p),T=r(p,"TBODY",{});var h=g(T);for(let m=0;m<u.length;m+=1)u[m].l(h);h.forEach(f),p.forEach(f),this.h()},h(){n(s,"class","taleemTable")},m(a,p){Ee(a,s,p),e(s,l),e(s,_),e(s,T);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(T,null)},p(a,p){if(p&4){v=Ye(a[2]);let h;for(h=0;h<v.length;h+=1){const m=mt(a,v,h);u[h]?u[h].p(m,p):(u[h]=Ct(m),u[h].c(),u[h].m(T,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=v.length}},d(a){a&&f(s),kt(u,a)}}}function wt(t){let s,l="No items found.";return{c(){s=c("div"),s.textContent=l,this.h()},l(d){s=r(d,"DIV",{class:!0,"data-svelte-h":!0}),j(s)!=="svelte-j7wzyv"&&(s.textContent=l),this.h()},h(){n(s,"class","empty svelte-1hcu9h6")},m(d,_){Ee(d,s,_)},p:St,d(d){d&&f(s)}}}function Ct(t){let s,l,d,_=t[20].label+"",T,v,u,a,p,h=(t[19].name??t[19].filename)+"",m,D,L,te=t[19].filename+"",K,oe,R,q,le=t[19].tcode+"",W,re,E,Q,fe=t[19].chapter+"",ce,pe,de=t[19].exercise+"",Y,ye,_e,w=(t[19].editedAt?new Date(t[19].editedAt).toLocaleString():"—")+"",B,ke,z,Z=(t[19].createdAt?new Date(t[19].createdAt).toLocaleString():"—")+"",Te,De,S,y,Oe,me,M,G,Ae,H,Le,F,X,se,we;return{c(){s=c("tr"),l=c("td"),d=c("span"),T=I(_),u=C(),a=c("td"),p=c("div"),m=I(h),D=C(),L=c("div"),K=I(te),oe=C(),R=c("td"),q=c("div"),W=I(le),re=C(),E=c("div"),Q=I("Ch "),ce=I(fe),pe=I(" · "),Y=I(de),ye=C(),_e=c("td"),B=I(w),ke=C(),z=c("td"),Te=I(Z),De=C(),S=c("td"),y=c("a"),Oe=I("Open"),M=C(),G=c("a"),Ae=I("Editor"),Le=C(),F=c("a"),X=I("Delete"),we=C(),this.h()},l(k){s=r(k,"TR",{});var i=g(s);l=r(i,"TD",{class:!0});var x=g(l);d=r(x,"SPAN",{class:!0,style:!0});var He=g(d);T=N(He,_),He.forEach(f),x.forEach(f),u=b(i),a=r(i,"TD",{class:!0});var ge=g(a);p=r(ge,"DIV",{class:!0});var ae=g(p);m=N(ae,h),ae.forEach(f),D=b(ge),L=r(ge,"DIV",{class:!0});var ve=g(L);K=N(ve,te),ve.forEach(f),ge.forEach(f),oe=b(i),R=r(i,"TD",{class:!0});var Ne=g(R);q=r(Ne,"DIV",{class:!0});var Pe=g(q);W=N(Pe,le),Pe.forEach(f),re=b(Ne),E=r(Ne,"DIV",{class:!0});var P=g(E);Q=N(P,"Ch "),ce=N(P,fe),pe=N(P," · "),Y=N(P,de),P.forEach(f),Ne.forEach(f),ye=b(i),_e=r(i,"TD",{});var $=g(_e);B=N($,w),$.forEach(f),ke=b(i),z=r(i,"TD",{});var je=g(z);Te=N(je,Z),je.forEach(f),De=b(i),S=r(i,"TD",{class:!0});var U=g(S);y=r(U,"A",{class:!0,href:!0,target:!0,rel:!0});var Re=g(y);Oe=N(Re,"Open"),Re.forEach(f),M=b(U),G=r(U,"A",{class:!0,href:!0,target:!0,rel:!0});var ee=g(G);Ae=N(ee,"Editor"),ee.forEach(f),Le=b(U),F=r(U,"A",{class:!0,href:!0,target:!0,rel:!0});var ze=g(F);X=N(ze,"Delete"),ze.forEach(f),U.forEach(f),we=b(i),i.forEach(f),this.h()},h(){n(d,"class","badge svelte-1hcu9h6"),n(d,"style",v=`--bg:${t[20].bg};--fg:${t[20].fg}`),n(l,"class","type"),n(p,"class","n1"),n(L,"class","n2"),n(a,"class","name"),n(q,"class","p1"),n(E,"class","p2"),n(R,"class","path"),n(y,"class","btn small svelte-1hcu9h6"),n(y,"href",me=Et(t[19])),n(y,"target","_blank"),n(y,"rel","noopener"),n(G,"class","btn small svelte-1hcu9h6"),n(G,"href",H="/admin/editor?filename="+t[19].filename),n(G,"target","_blank"),n(G,"rel","noopener"),n(F,"class","btn small svelte-1hcu9h6"),n(F,"href",se="/admin/delete?filename="+t[19].filename),n(F,"target","_blank"),n(F,"rel","noopener"),n(S,"class","actions")},m(k,i){Ee(k,s,i),e(s,l),e(l,d),e(d,T),e(s,u),e(s,a),e(a,p),e(p,m),e(a,D),e(a,L),e(L,K),e(s,oe),e(s,R),e(R,q),e(q,W),e(R,re),e(R,E),e(E,Q),e(E,ce),e(E,pe),e(E,Y),e(s,ye),e(s,_e),e(_e,B),e(s,ke),e(s,z),e(z,Te),e(s,De),e(s,S),e(S,y),e(y,Oe),e(S,M),e(S,G),e(G,Ae),e(S,Le),e(S,F),e(F,X),e(s,we)},p(k,i){i&4&&_!==(_=k[20].label+"")&&J(T,_),i&4&&v!==(v=`--bg:${k[20].bg};--fg:${k[20].fg}`)&&n(d,"style",v),i&4&&h!==(h=(k[19].name??k[19].filename)+"")&&J(m,h),i&4&&te!==(te=k[19].filename+"")&&J(K,te),i&4&&le!==(le=k[19].tcode+"")&&J(W,le),i&4&&fe!==(fe=k[19].chapter+"")&&J(ce,fe),i&4&&de!==(de=k[19].exercise+"")&&J(Y,de),i&4&&w!==(w=(k[19].editedAt?new Date(k[19].editedAt).toLocaleString():"—")+"")&&J(B,w),i&4&&Z!==(Z=(k[19].createdAt?new Date(k[19].createdAt).toLocaleString():"—")+"")&&J(Te,Z),i&4&&me!==(me=Et(k[19]))&&n(y,"href",me),i&4&&H!==(H="/admin/editor?filename="+k[19].filename)&&n(G,"href",H),i&4&&se!==(se="/admin/delete?filename="+k[19].filename)&&n(F,"href",se)},d(k){k&&f(s)}}}function Pt(t){let s,l,d,_,T,v,u,a,p,h="Question Index",m,D,L,te,K=t[0].all+"",oe,R,q,le,W=t[0].decks+"",re,E,Q,fe,ce=t[0].notes+"",pe,de,Y,ye='<a class="btn svelte-1hcu9h6" href="/admin/upload">+ Upload Deck</a> <a class="btn svelte-1hcu9h6" href="/admin/uploadNotes">+ Upload Note</a>',_e,w,B,ke,z,Z,Te="Type",De,S,y,Oe="All",me,M,G="Decks",Ae,H,Le="Notes",F,X,se,we="Tcode",k,i,x,He="All",ge,ae,ve,Ne="Sort",Pe,P,$,je="Last Edited (newest)",U,Re="Created (newest)",ee,ze="Name (A–Z)",Ze,be,at="Reset",Xe,Ie,he,xe,nt;l=new yt({}),_=new Ot({});let Ve=Ye(t[7]),V=[];for(let o=0;o<Ve.length;o+=1)V[o]=bt(gt(t,Ve,o));function ot(o,O){return o[2].length===0?wt:Lt}let Me=ot(t),ne=Me(t);return{c(){s=C(),_t(l.$$.fragment),d=C(),_t(_.$$.fragment),T=C(),v=c("div"),u=c("header"),a=c("div"),p=c("h1"),p.textContent=h,m=C(),D=c("div"),L=c("span"),te=I("All: "),oe=I(K),R=C(),q=c("span"),le=I("Decks: "),re=I(W),E=C(),Q=c("span"),fe=I("Notes: "),pe=I(ce),de=C(),Y=c("div"),Y.innerHTML=ye,_e=C(),w=c("section"),B=c("input"),ke=C(),z=c("div"),Z=c("label"),Z.textContent=Te,De=C(),S=c("div"),y=c("button"),y.textContent=Oe,me=C(),M=c("button"),M.textContent=G,Ae=C(),H=c("button"),H.textContent=Le,F=C(),X=c("div"),se=c("label"),se.textContent=we,k=C(),i=c("select"),x=c("option"),x.textContent=He;for(let o=0;o<V.length;o+=1)V[o].c();ge=C(),ae=c("div"),ve=c("label"),ve.textContent=Ne,Pe=C(),P=c("select"),$=c("option"),$.textContent=je,U=c("option"),U.textContent=Re,ee=c("option"),ee.textContent=ze,Ze=C(),be=c("button"),be.textContent=at,Xe=C(),Ie=c("section"),ne.c(),this.h()},l(o){It("svelte-19gpdzi",document.head).forEach(f),s=b(o),dt(l.$$.fragment,o),d=b(o),dt(_.$$.fragment,o),T=b(o),v=r(o,"DIV",{class:!0});var A=g(v);u=r(A,"HEADER",{class:!0});var Se=g(u);a=r(Se,"DIV",{class:!0});var Fe=g(a);p=r(Fe,"H1",{class:!0,"data-svelte-h":!0}),j(p)!=="svelte-a4tuxo"&&(p.textContent=h),m=b(Fe),D=r(Fe,"DIV",{class:!0});var qe=g(D);L=r(qe,"SPAN",{class:!0});var $e=g(L);te=N($e,"All: "),oe=N($e,K),$e.forEach(f),R=b(qe),q=r(qe,"SPAN",{class:!0});var et=g(q);le=N(et,"Decks: "),re=N(et,W),et.forEach(f),E=b(qe),Q=r(qe,"SPAN",{class:!0});var tt=g(Q);fe=N(tt,"Notes: "),pe=N(tt,ce),tt.forEach(f),qe.forEach(f),Fe.forEach(f),de=b(Se),Y=r(Se,"DIV",{class:!0,"data-svelte-h":!0}),j(Y)!=="svelte-anec4d"&&(Y.innerHTML=ye),Se.forEach(f),_e=b(A),w=r(A,"SECTION",{class:!0});var ue=g(w);B=r(ue,"INPUT",{class:!0,type:!0,placeholder:!0}),ke=b(ue),z=r(ue,"DIV",{class:!0});var Qe=g(z);Z=r(Qe,"LABEL",{"data-svelte-h":!0}),j(Z)!=="svelte-gqinbk"&&(Z.textContent=Te),De=b(Qe),S=r(Qe,"DIV",{class:!0});var Be=g(S);y=r(Be,"BUTTON",{class:!0,"data-svelte-h":!0}),j(y)!=="svelte-r8396y"&&(y.textContent=Oe),me=b(Be),M=r(Be,"BUTTON",{class:!0,"data-svelte-h":!0}),j(M)!=="svelte-mjlq9w"&&(M.textContent=G),Ae=b(Be),H=r(Be,"BUTTON",{class:!0,"data-svelte-h":!0}),j(H)!=="svelte-1hq7yuf"&&(H.textContent=Le),Be.forEach(f),Qe.forEach(f),F=b(ue),X=r(ue,"DIV",{class:!0});var Ge=g(X);se=r(Ge,"LABEL",{"data-svelte-h":!0}),j(se)!=="svelte-1s7hywx"&&(se.textContent=we),k=b(Ge),i=r(Ge,"SELECT",{class:!0});var lt=g(i);x=r(lt,"OPTION",{"data-svelte-h":!0}),j(x)!=="svelte-1u2dklh"&&(x.textContent=He);for(let st=0;st<V.length;st+=1)V[st].l(lt);lt.forEach(f),Ge.forEach(f),ge=b(ue),ae=r(ue,"DIV",{class:!0});var Je=g(ae);ve=r(Je,"LABEL",{"data-svelte-h":!0}),j(ve)!=="svelte-1ywwvhc"&&(ve.textContent=Ne),Pe=b(Je),P=r(Je,"SELECT",{class:!0});var Ke=g(P);$=r(Ke,"OPTION",{"data-svelte-h":!0}),j($)!=="svelte-10puezt"&&($.textContent=je),U=r(Ke,"OPTION",{"data-svelte-h":!0}),j(U)!=="svelte-g65bl"&&(U.textContent=Re),ee=r(Ke,"OPTION",{"data-svelte-h":!0}),j(ee)!=="svelte-1tau8uj"&&(ee.textContent=ze),Ke.forEach(f),Je.forEach(f),Ze=b(ue),be=r(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),j(be)!=="svelte-131kcaj"&&(be.textContent=at),ue.forEach(f),Xe=b(A),Ie=r(A,"SECTION",{class:!0});var rt=g(Ie);ne.l(rt),rt.forEach(f),A.forEach(f),this.h()},h(){document.title="Admin — Question Index",n(p,"class","svelte-1hcu9h6"),n(L,"class","pill svelte-1hcu9h6"),n(q,"class","pill decks svelte-1hcu9h6"),n(Q,"class","pill notes svelte-1hcu9h6"),n(D,"class","totals svelte-1hcu9h6"),n(a,"class","left svelte-1hcu9h6"),n(Y,"class","right"),n(u,"class","top svelte-1hcu9h6"),n(B,"class","search svelte-1hcu9h6"),n(B,"type","search"),n(B,"placeholder","Search filename / name / desc / exercise…"),n(y,"class","svelte-1hcu9h6"),Ue(y,"active",!t[4]),n(M,"class","svelte-1hcu9h6"),Ue(M,"active",t[4]==="deck"),n(H,"class","svelte-1hcu9h6"),Ue(H,"active",t[4]==="note"),n(S,"class","seg svelte-1hcu9h6"),n(z,"class","group svelte-1hcu9h6"),x.__value="",Ce(x,x.__value),n(i,"class","svelte-1hcu9h6"),t[5]===void 0&&ft(()=>t[17].call(i)),n(X,"class","group svelte-1hcu9h6"),$.__value="edited_desc",Ce($,$.__value),U.__value="created_desc",Ce(U,U.__value),ee.__value="name_asc",Ce(ee,ee.__value),n(P,"class","svelte-1hcu9h6"),t[6]===void 0&&ft(()=>t[18].call(P)),n(ae,"class","group svelte-1hcu9h6"),n(be,"class","clear svelte-1hcu9h6"),n(w,"class","filters svelte-1hcu9h6"),n(Ie,"class","taleemTableWrap svelte-1hcu9h6"),n(v,"class","page svelte-1hcu9h6")},m(o,O){Ee(o,s,O),it(l,o,O),Ee(o,d,O),it(_,o,O),Ee(o,T,O),Ee(o,v,O),e(v,u),e(u,a),e(a,p),e(a,m),e(a,D),e(D,L),e(L,te),e(L,oe),e(D,R),e(D,q),e(q,le),e(q,re),e(D,E),e(D,Q),e(Q,fe),e(Q,pe),e(u,de),e(u,Y),e(v,_e),e(v,w),e(w,B),Ce(B,t[3]),e(w,ke),e(w,z),e(z,Z),e(z,De),e(z,S),e(S,y),e(S,me),e(S,M),e(S,Ae),e(S,H),e(w,F),e(w,X),e(X,se),e(X,k),e(X,i),e(i,x);for(let A=0;A<V.length;A+=1)V[A]&&V[A].m(i,null);We(i,t[5],!0),e(w,ge),e(w,ae),e(ae,ve),e(ae,Pe),e(ae,P),e(P,$),e(P,U),e(P,ee),We(P,t[6],!0),e(w,Ze),e(w,be),e(v,Xe),e(v,Ie),ne.m(Ie,null),he=!0,xe||(nt=[ie(B,"input",t[12]),ie(B,"keydown",t[13]),ie(y,"click",t[14]),ie(M,"click",t[15]),ie(H,"click",t[16]),ie(i,"change",t[17]),ie(i,"change",t[8]),ie(P,"change",t[18]),ie(P,"change",t[8]),ie(be,"click",t[9])],xe=!0)},p(o,[O]){if((!he||O&1)&&K!==(K=o[0].all+"")&&J(oe,K),(!he||O&1)&&W!==(W=o[0].decks+"")&&J(re,W),(!he||O&1)&&ce!==(ce=o[0].notes+"")&&J(pe,ce),O&8&&B.value!==o[3]&&Ce(B,o[3]),(!he||O&16)&&Ue(y,"active",!o[4]),(!he||O&16)&&Ue(M,"active",o[4]==="deck"),(!he||O&16)&&Ue(H,"active",o[4]==="note"),O&130){Ve=Ye(o[7]);let A;for(A=0;A<Ve.length;A+=1){const Se=gt(o,Ve,A);V[A]?V[A].p(Se,O):(V[A]=bt(Se),V[A].c(),V[A].m(i,null))}for(;A<V.length;A+=1)V[A].d(1);V.length=Ve.length}O&160&&We(i,o[5]),O&64&&We(P,o[6]),Me===(Me=ot(o))&&ne?ne.p(o,O):(ne.d(1),ne=Me(o),ne&&(ne.c(),ne.m(Ie,null)))},i(o){he||(ut(l.$$.fragment,o),ut(_.$$.fragment,o),he=!0)},o(o){ht(l.$$.fragment,o),ht(_.$$.fragment,o),he=!1},d(o){o&&(f(s),f(d),f(T),f(v)),ct(l,o),ct(_,o),kt(V,o),ne.d(),xe=!1,Nt(nt)}}}function Et(t){return t.type==="deck"?`/player?filename=${encodeURIComponent(t.filename)}`:t.type==="note"?`/notes?filename=${encodeURIComponent(t.filename)}`:"#"}function Vt(t){return t.type==="deck"?{label:"Deck",bg:"#0c0535",fg:"#dcd6ff"}:t.type==="note"?{label:"Note",bg:"#6c430b",fg:"#ffe3c4"}:{label:t.type??"Item",bg:"#2E1C02",fg:"#e6ccb0"}}function qt(t,s,l){let d,{data:_}=s,T=[],v={all:0,decks:0,notes:0},u={},a={q:"",type:null,tcode:null,limit:200,offset:0,sort:"edited_desc"},p="",h=null,m=null,D="edited_desc";function L(){const E=new URLSearchParams;p&&E.set("q",p),h&&E.set("type",h),m&&E.set("tcode",m),D&&E.set("sort",D),E.set("limit",String(a.limit??200)),E.set("offset","0"),pt(`/admin?${E.toString()}`,{replaceState:!0})}function te(){pt("/admin",{replaceState:!0})}function K(){p=this.value,l(3,p),l(10,_),l(0,v),l(1,u),l(11,a)}const oe=E=>E.key==="Enter"&&L(),R=()=>{l(4,h=null),L()},q=()=>{l(4,h="deck"),L()},le=()=>{l(4,h="note"),L()};function W(){m=vt(this),l(5,m),l(10,_),l(0,v),l(1,u),l(11,a),l(7,d),l(1,u),l(10,_),l(0,v),l(11,a)}function re(){D=vt(this),l(6,D),l(10,_),l(0,v),l(1,u),l(11,a)}return t.$$set=E=>{"data"in E&&l(10,_=E.data)},t.$$.update=()=>{t.$$.dirty&3075&&_&&(l(2,T=_.items??[]),l(0,v=_.totals??v),l(1,u=_.tcodeStats??u),l(11,a={...a,..._.filters??{}}),l(3,p=a.q??""),l(4,h=a.type==="deck"||a.type==="note"?a.type:null),l(5,m=a.tcode??null),l(6,D=a.sort??"edited_desc")),t.$$.dirty&2&&l(7,d=Object.keys(u).sort((E,Q)=>E.localeCompare(Q)))},[v,u,T,p,h,m,D,d,L,te,_,a,K,oe,R,q,le,W,re]}class Ft extends Tt{constructor(s){super(),Dt(this,s,qt,Pt,At,{data:10})}}export{Ft as component};
