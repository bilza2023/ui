import{S as Cl,i as kl,s as wl,d,o as sl,F as Bt,D as Sl,p as nl,q as rl,I as He,a as Y,G as q,R as al,x as u,w as ol,b as V,c as n,J as j,T as Dl,K as Mt,E as Nl,y as il,h as E,e as c,f as g,B as O,g as y,z as ul,k as C,j as f,t as P,L as Ut,O as Ll,n as xt,M as cl}from"../chunks/C5V-7dkx.js";import{e as Ke}from"../chunks/DF3-wX0J.js";import"../chunks/IHki7fMi.js";import{N as Tl}from"../chunks/BCh89Q_O.js";import{A as Il}from"../chunks/NgHeIh7M.js";/* empty css                */import{l as Ol,g as yl,c as Pl,a as Vl}from"../chunks/B9_b_OnU.js";function fl(l,e,t){const s=l.slice();return s[34]=e[t],s}function dl(l,e,t){const s=l.slice();return s[37]=e[t],s}function hl(l,e,t){const s=l.slice();return s[40]=e[t],s}function Al(l){let e,t=Ke(l[17]),s=[];for(let a=0;a<t.length;a+=1)s[a]=_l(hl(l,t,a));return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=cl()},l(a){for(let o=0;o<s.length;o+=1)s[o].l(a);e=cl()},m(a,o){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(a,o);V(a,e,o)},p(a,o){if(o[0]&131072){t=Ke(a[17]);let i;for(i=0;i<t.length;i+=1){const v=hl(a,t,i);s[i]?s[i].p(v,o):(s[i]=_l(v),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(a){a&&d(e),Bt(s,a)}}}function Ml(l){let e,t="No subjects registered";return{c(){e=f("option"),e.textContent=t,this.h()},l(s){e=c(s,"OPTION",{"data-svelte-h":!0}),O(e)!=="svelte-11m4iz6"&&(e.textContent=t),this.h()},h(){e.__value="",q(e,e.__value)},m(s,a){V(s,e,a)},p:xt,d(s){s&&d(e)}}}function _l(l){let e,t=l[40].tcodeName+"",s;return{c(){e=f("option"),s=P(t),this.h()},l(a){e=c(a,"OPTION",{});var o=g(e);s=y(o,t),o.forEach(d),this.h()},h(){e.__value=l[40].tcodeName,q(e,e.__value)},m(a,o){V(a,e,o),n(e,s)},p:xt,d(a){a&&d(e)}}}function pl(l){let e,t,s=String(l[37].number).padStart(2,"0")+"",a,o,i=l[37].name+"",v,S;return{c(){e=f("option"),t=P("Ch "),a=P(s),o=P(" — "),v=P(i),this.h()},l(h){e=c(h,"OPTION",{});var b=g(e);t=y(b,"Ch "),a=y(b,s),o=y(b," — "),v=y(b,i),b.forEach(d),this.h()},h(){e.__value=S=l[37].filename,q(e,e.__value)},m(h,b){V(h,e,b),n(e,t),n(e,a),n(e,o),n(e,v)},p(h,b){b[0]&2&&s!==(s=String(h[37].number).padStart(2,"0")+"")&&Y(a,s),b[0]&2&&i!==(i=h[37].name+"")&&Y(v,i),b[0]&2&&S!==(S=h[37].filename)&&(e.__value=S,q(e,e.__value))},d(h){h&&d(e)}}}function ml(l){let e,t,s,a;return{c(){e=f("small"),t=P("Chapter #: "),s=f("strong"),a=P(l[5]),this.h()},l(o){e=c(o,"SMALL",{class:!0});var i=g(e);t=y(i,"Chapter #: "),s=c(i,"STRONG",{});var v=g(s);a=y(v,l[5]),v.forEach(d),i.forEach(d),this.h()},h(){u(e,"class","hint")},m(o,i){V(o,e,i),n(e,t),n(e,s),n(s,a)},p(o,i){i[0]&32&&Y(a,o[5])},d(o){o&&d(e)}}}function vl(l){let e,t=l[34].name+"",s,a;return{c(){e=f("option"),s=P(t),this.h()},l(o){e=c(o,"OPTION",{});var i=g(e);s=y(i,t),i.forEach(d),this.h()},h(){e.__value=a=l[34].filename,q(e,e.__value)},m(o,i){V(o,e,i),n(e,s)},p(o,i){i[0]&8&&t!==(t=o[34].name+"")&&Y(s,t),i[0]&8&&a!==(a=o[34].filename)&&(e.__value=a,q(e,e.__value))},d(o){o&&d(e)}}}function Ul(l){let e,t="Drop your .html here",s,a,o="or click to choose";return{c(){e=f("strong"),e.textContent=t,s=C(),a=f("small"),a.textContent=o,this.h()},l(i){e=c(i,"STRONG",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-jhl2g3"&&(e.textContent=t),s=E(i),a=c(i,"SMALL",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-12xg281"&&(a.textContent=o),this.h()},h(){u(e,"class","svelte-w704mx"),u(a,"class","svelte-w704mx")},m(i,v){V(i,e,v),V(i,s,v),V(i,a,v)},p:xt,d(i){i&&(d(e),d(s),d(a))}}}function Bl(l){let e,t=l[6].name+"",s,a,o,i=Math.round(l[6].size/1024)+"",v,S;return{c(){e=f("strong"),s=P(t),a=C(),o=f("small"),v=P(i),S=P(" KB"),this.h()},l(h){e=c(h,"STRONG",{class:!0});var b=g(e);s=y(b,t),b.forEach(d),a=E(h),o=c(h,"SMALL",{class:!0});var k=g(o);v=y(k,i),S=y(k," KB"),k.forEach(d),this.h()},h(){u(e,"class","svelte-w704mx"),u(o,"class","svelte-w704mx")},m(h,b){V(h,e,b),n(e,s),V(h,a,b),V(h,o,b),n(o,v),n(o,S)},p(h,b){b[0]&64&&t!==(t=h[6].name+"")&&Y(s,t),b[0]&64&&i!==(i=Math.round(h[6].size/1024)+"")&&Y(v,i)},d(h){h&&(d(e),d(a),d(o))}}}function gl(l){let e,t;return{c(){e=f("div"),t=P(l[13]),this.h()},l(s){e=c(s,"DIV",{class:!0});var a=g(e);t=y(a,l[13]),a.forEach(d),this.h()},h(){u(e,"class","note ok svelte-w704mx")},m(s,a){V(s,e,a),n(e,t)},p(s,a){a[0]&8192&&Y(t,s[13])},d(s){s&&d(e)}}}function bl(l){let e,t;return{c(){e=f("div"),t=P(l[14]),this.h()},l(s){e=c(s,"DIV",{class:!0});var a=g(e);t=y(a,l[14]),a.forEach(d),this.h()},h(){u(e,"class","note err svelte-w704mx")},m(s,a){V(s,e,a),n(e,t)},p(s,a){a[0]&16384&&Y(t,s[14])},d(s){s&&d(e)}}}function xl(l){let e,t,s,a,o,i,v='<h1 class="svelte-w704mx">Upload Note (.html)</h1> <p class="svelte-w704mx">Select the path, drop your <code class="svelte-w704mx">.html</code> file, add optional meta, then upload.</p>',S,h,b,k,ae="Path",Z,N,D,H,z="Tcode",ke,G,$,A,ee,$e="Chapter",Je,M,Q,we=l[0]?"Select chapter":"Pick tcode first",Me,Ue,Xe,Qe,te,oe,et="Exercise",We,U,K,p=l[2]?"Select exercise":"Pick chapter first",J,L,ie,me,Se,Ft="Metadata",_t,le,ve,De,zt="Status",pt,ue,mt,ge,Ne,Gt="Tags (CSV)",vt,ce,gt,fe,Le,Rt="Description",bt,de,Et,be,Te,jt="Note File",Ct,Ee,w,Ie,qt="⇪",kt,Oe,wt,he,tt,St,Be,se,ye,Ht="Filename (auto)",Dt,_e,Nt,Pe,Kt="Derived from the chosen file (without .html/.htm)",Lt,R,pe,Ye=l[12]?"Uploading…":"Upload",lt,st,Tt,ne,It,Ot,nt,yt,Ve,Jt="Tip: Drag &amp; drop a <code>.html</code> file anywhere inside the dashed area above.",X,Pt,Xt;e=new Tl({}),s=new Il({});function El(r,m){return r[17].length?Al:Ml}let Ze=El(l)(l),xe=Ke(l[1]),T=[];for(let r=0;r<xe.length;r+=1)T[r]=pl(dl(l,xe,r));let B=l[5]!==null&&ml(l),Fe=Ke(l[3]),I=[];for(let r=0;r<Fe.length;r+=1)I[r]=vl(fl(l,Fe,r));function Qt(r,m){return r[6]?Bl:Ul}let rt=Qt(l),W=rt(l),x=l[13]&&gl(l),F=l[14]&&bl(l);return{c(){ul(e.$$.fragment),t=C(),ul(s.$$.fragment),a=C(),o=f("section"),i=f("header"),i.innerHTML=v,S=C(),h=f("form"),b=f("fieldset"),k=f("legend"),k.textContent=ae,Z=C(),N=f("div"),D=f("div"),H=f("label"),H.textContent=z,ke=C(),G=f("select"),Ze.c(),$=C(),A=f("div"),ee=f("label"),ee.textContent=$e,Je=C(),M=f("select"),Q=f("option"),Me=P(we);for(let r=0;r<T.length;r+=1)T[r].c();Xe=C(),B&&B.c(),Qe=C(),te=f("div"),oe=f("label"),oe.textContent=et,We=C(),U=f("select"),K=f("option"),J=P(p);for(let r=0;r<I.length;r+=1)I[r].c();ie=C(),me=f("fieldset"),Se=f("legend"),Se.textContent=Ft,_t=C(),le=f("div"),ve=f("div"),De=f("label"),De.textContent=zt,pt=C(),ue=f("input"),mt=C(),ge=f("div"),Ne=f("label"),Ne.textContent=Gt,vt=C(),ce=f("input"),gt=C(),fe=f("div"),Le=f("label"),Le.textContent=Rt,bt=C(),de=f("textarea"),Et=C(),be=f("fieldset"),Te=f("legend"),Te.textContent=jt,Ct=C(),Ee=f("div"),w=f("div"),Ie=f("div"),Ie.textContent=qt,kt=C(),Oe=f("div"),W.c(),wt=C(),he=f("input"),St=C(),Be=f("div"),se=f("div"),ye=f("label"),ye.textContent=Ht,Dt=C(),_e=f("input"),Nt=C(),Pe=f("small"),Pe.textContent=Kt,Lt=C(),R=f("div"),pe=f("button"),lt=P(Ye),Tt=C(),ne=f("button"),It=P("Clear"),Ot=C(),x&&x.c(),nt=C(),F&&F.c(),yt=C(),Ve=f("p"),Ve.innerHTML=Jt,this.h()},l(r){il(e.$$.fragment,r),t=E(r),il(s.$$.fragment,r),a=E(r),o=c(r,"SECTION",{class:!0});var m=g(o);i=c(m,"HEADER",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-nms23j"&&(i.innerHTML=v),S=E(m),h=c(m,"FORM",{class:!0});var _=g(h);b=c(_,"FIELDSET",{class:!0});var re=g(b);k=c(re,"LEGEND",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-13kvvn3"&&(k.textContent=ae),Z=E(re),N=c(re,"DIV",{class:!0});var ze=g(N);D=c(ze,"DIV",{class:!0});var at=g(D);H=c(at,"LABEL",{for:!0,"data-svelte-h":!0}),O(H)!=="svelte-6p13rk"&&(H.textContent=z),ke=E(at),G=c(at,"SELECT",{id:!0});var Wt=g(G);Ze.l(Wt),Wt.forEach(d),at.forEach(d),$=E(ze),A=c(ze,"DIV",{class:!0});var Ge=g(A);ee=c(Ge,"LABEL",{for:!0,"data-svelte-h":!0}),O(ee)!=="svelte-nkiq2x"&&(ee.textContent=$e),Je=E(Ge),M=c(Ge,"SELECT",{id:!0});var Vt=g(M);Q=c(Vt,"OPTION",{});var Yt=g(Q);Me=y(Yt,we),Yt.forEach(d);for(let Ae=0;Ae<T.length;Ae+=1)T[Ae].l(Vt);Vt.forEach(d),Xe=E(Ge),B&&B.l(Ge),Ge.forEach(d),Qe=E(ze),te=c(ze,"DIV",{class:!0});var ot=g(te);oe=c(ot,"LABEL",{for:!0,"data-svelte-h":!0}),O(oe)!=="svelte-175yy8x"&&(oe.textContent=et),We=E(ot),U=c(ot,"SELECT",{id:!0});var At=g(U);K=c(At,"OPTION",{});var Zt=g(K);J=y(Zt,p),Zt.forEach(d);for(let Ae=0;Ae<I.length;Ae+=1)I[Ae].l(At);At.forEach(d),ot.forEach(d),ze.forEach(d),re.forEach(d),ie=E(_),me=c(_,"FIELDSET",{class:!0});var it=g(me);Se=c(it,"LEGEND",{class:!0,"data-svelte-h":!0}),O(Se)!=="svelte-177nuh5"&&(Se.textContent=Ft),_t=E(it),le=c(it,"DIV",{class:!0});var Re=g(le);ve=c(Re,"DIV",{class:!0});var ut=g(ve);De=c(ut,"LABEL",{for:!0,"data-svelte-h":!0}),O(De)!=="svelte-15lfxni"&&(De.textContent=zt),pt=E(ut),ue=c(ut,"INPUT",{id:!0,placeholder:!0}),ut.forEach(d),mt=E(Re),ge=c(Re,"DIV",{class:!0});var ct=g(ge);Ne=c(ct,"LABEL",{for:!0,"data-svelte-h":!0}),O(Ne)!=="svelte-74pu4x"&&(Ne.textContent=Gt),vt=E(ct),ce=c(ct,"INPUT",{id:!0,placeholder:!0}),ct.forEach(d),gt=E(Re),fe=c(Re,"DIV",{class:!0,style:!0});var ft=g(fe);Le=c(ft,"LABEL",{for:!0,"data-svelte-h":!0}),O(Le)!=="svelte-1tds9bi"&&(Le.textContent=Rt),bt=E(ft),de=c(ft,"TEXTAREA",{id:!0,rows:!0}),g(de).forEach(d),ft.forEach(d),Re.forEach(d),it.forEach(d),Et=E(_),be=c(_,"FIELDSET",{class:!0});var dt=g(be);Te=c(dt,"LEGEND",{class:!0,"data-svelte-h":!0}),O(Te)!=="svelte-1o688es"&&(Te.textContent=jt),Ct=E(dt),Ee=c(dt,"DIV",{class:!0});var ht=g(Ee);w=c(ht,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var je=g(w);Ie=c(je,"DIV",{class:!0,"data-svelte-h":!0}),O(Ie)!=="svelte-j6trfd"&&(Ie.textContent=qt),kt=E(je),Oe=c(je,"DIV",{class:!0});var $t=g(Oe);W.l($t),$t.forEach(d),wt=E(je),he=c(je,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),je.forEach(d),St=E(ht),Be=c(ht,"DIV",{class:!0});var el=g(Be);se=c(el,"DIV",{class:!0});var qe=g(se);ye=c(qe,"LABEL",{for:!0,"data-svelte-h":!0}),O(ye)!=="svelte-1c30r00"&&(ye.textContent=Ht),Dt=E(qe),_e=c(qe,"INPUT",{id:!0,placeholder:!0}),Nt=E(qe),Pe=c(qe,"SMALL",{class:!0,"data-svelte-h":!0}),O(Pe)!=="svelte-5gqm84"&&(Pe.textContent=Kt),qe.forEach(d),el.forEach(d),ht.forEach(d),dt.forEach(d),Lt=E(_),R=c(_,"DIV",{class:!0});var Ce=g(R);pe=c(Ce,"BUTTON",{class:!0,type:!0});var tl=g(pe);lt=y(tl,Ye),tl.forEach(d),Tt=E(Ce),ne=c(Ce,"BUTTON",{type:!0,class:!0});var ll=g(ne);It=y(ll,"Clear"),ll.forEach(d),Ot=E(Ce),x&&x.l(Ce),nt=E(Ce),F&&F.l(Ce),Ce.forEach(d),yt=E(_),Ve=c(_,"P",{class:!0,"data-svelte-h":!0}),O(Ve)!=="svelte-hwi9wy"&&(Ve.innerHTML=Jt),_.forEach(d),m.forEach(d),this.h()},h(){u(i,"class","pagehead svelte-w704mx"),u(k,"class","svelte-w704mx"),u(H,"for","tcode"),u(G,"id","tcode"),l[0]===void 0&&Mt(()=>l[26].call(G)),u(D,"class","field"),u(ee,"for","chapterSlug"),Q.__value="",q(Q,Q.__value),Q.disabled=!0,Q.selected=!0,u(M,"id","chapterSlug"),M.disabled=Ue=!l[0]||!l[1].length,l[2]===void 0&&Mt(()=>l[27].call(M)),u(A,"class","field"),u(oe,"for","exerciseSlug"),K.__value="",q(K,K.__value),K.disabled=!0,K.selected=!0,u(U,"id","exerciseSlug"),U.disabled=L=!l[2]||!l[3].length,l[4]===void 0&&Mt(()=>l[28].call(U)),u(te,"class","field"),u(N,"class","form-grid svelte-w704mx"),u(b,"class","block svelte-w704mx"),u(Se,"class","svelte-w704mx"),u(De,"for","status"),u(ue,"id","status"),u(ue,"placeholder","ready | draft | hidden"),u(ve,"class","field"),u(Ne,"for","tags"),u(ce,"id","tags"),u(ce,"placeholder","geometry, class9"),u(ge,"class","field"),u(Le,"for","description"),u(de,"id","description"),u(de,"rows","2"),u(fe,"class","field"),Nl(fe,"grid-column","1 / -1"),u(le,"class","form-grid two svelte-w704mx"),u(me,"class","block svelte-w704mx"),u(Te,"class","svelte-w704mx"),u(Ie,"class","dz-icon svelte-w704mx"),u(Oe,"class","dz-text svelte-w704mx"),u(he,"id","file"),u(he,"type","file"),u(he,"accept",".html,.htm,text/html"),u(he,"class","hidden-input svelte-w704mx"),u(w,"class",tt=al("dropzone "+(l[15]?"is-dragging":""))+" svelte-w704mx"),u(w,"role","button"),u(w,"tabindex","0"),u(w,"aria-label","Drop .html here or click to browse"),u(ye,"for","filename"),u(_e,"id","filename"),_e.value=l[10],_e.readOnly=!0,u(_e,"placeholder","auto from file"),u(Pe,"class","hint"),u(se,"class","field"),u(Be,"class","sidegrid svelte-w704mx"),u(Ee,"class","dropgrid svelte-w704mx"),u(be,"class","block svelte-w704mx"),u(pe,"class","primary"),u(pe,"type","submit"),pe.disabled=st=l[12]||!l[16],u(ne,"type","button"),u(ne,"class","btn"),ne.disabled=l[12],u(R,"class","actions svelte-w704mx"),u(Ve,"class","hint"),u(h,"class","form upload-form svelte-w704mx"),u(o,"class","wrap svelte-w704mx")},m(r,m){ol(e,r,m),V(r,t,m),ol(s,r,m),V(r,a,m),V(r,o,m),n(o,i),n(o,S),n(o,h),n(h,b),n(b,k),n(b,Z),n(b,N),n(N,D),n(D,H),n(D,ke),n(D,G),Ze.m(G,null),He(G,l[0],!0),n(N,$),n(N,A),n(A,ee),n(A,Je),n(A,M),n(M,Q),n(Q,Me);for(let _=0;_<T.length;_+=1)T[_]&&T[_].m(M,null);He(M,l[2],!0),n(A,Xe),B&&B.m(A,null),n(N,Qe),n(N,te),n(te,oe),n(te,We),n(te,U),n(U,K),n(K,J);for(let _=0;_<I.length;_+=1)I[_]&&I[_].m(U,null);He(U,l[4],!0),n(h,ie),n(h,me),n(me,Se),n(me,_t),n(me,le),n(le,ve),n(ve,De),n(ve,pt),n(ve,ue),q(ue,l[7]),n(le,mt),n(le,ge),n(ge,Ne),n(ge,vt),n(ge,ce),q(ce,l[8]),n(le,gt),n(le,fe),n(fe,Le),n(fe,bt),n(fe,de),q(de,l[9]),n(h,Et),n(h,be),n(be,Te),n(be,Ct),n(be,Ee),n(Ee,w),n(w,Ie),n(w,kt),n(w,Oe),W.m(Oe,null),n(w,wt),n(w,he),l[32](he),n(Ee,St),n(Ee,Be),n(Be,se),n(se,ye),n(se,Dt),n(se,_e),n(se,Nt),n(se,Pe),n(h,Lt),n(h,R),n(R,pe),n(pe,lt),n(R,Tt),n(R,ne),n(ne,It),n(R,Ot),x&&x.m(R,null),n(R,nt),F&&F.m(R,null),n(h,yt),n(h,Ve),X=!0,Pt||(Xt=[j(G,"change",l[26]),j(M,"change",l[27]),j(U,"change",l[28]),j(ue,"input",l[29]),j(ce,"input",l[30]),j(de,"input",l[31]),j(he,"change",l[19]),j(w,"click",l[33]),j(w,"dragover",l[21]),j(w,"dragleave",l[22]),j(w,"drop",l[20]),j(w,"keydown",l[23]),j(ne,"click",l[18]),j(h,"submit",Dl(l[24]))],Pt=!0)},p(r,m){if(Ze.p(r,m),m[0]&131073&&He(G,r[0]),(!X||m[0]&1)&&we!==(we=r[0]?"Select chapter":"Pick tcode first")&&Y(Me,we),m[0]&2){xe=Ke(r[1]);let _;for(_=0;_<xe.length;_+=1){const re=dl(r,xe,_);T[_]?T[_].p(re,m):(T[_]=pl(re),T[_].c(),T[_].m(M,null))}for(;_<T.length;_+=1)T[_].d(1);T.length=xe.length}if((!X||m[0]&131075&&Ue!==(Ue=!r[0]||!r[1].length))&&(M.disabled=Ue),m[0]&6&&He(M,r[2]),r[5]!==null?B?B.p(r,m):(B=ml(r),B.c(),B.m(A,null)):B&&(B.d(1),B=null),(!X||m[0]&4)&&p!==(p=r[2]?"Select exercise":"Pick chapter first")&&Y(J,p),m[0]&8){Fe=Ke(r[3]);let _;for(_=0;_<Fe.length;_+=1){const re=fl(r,Fe,_);I[_]?I[_].p(re,m):(I[_]=vl(re),I[_].c(),I[_].m(U,null))}for(;_<I.length;_+=1)I[_].d(1);I.length=Fe.length}(!X||m[0]&14&&L!==(L=!r[2]||!r[3].length))&&(U.disabled=L),m[0]&24&&He(U,r[4]),m[0]&128&&ue.value!==r[7]&&q(ue,r[7]),m[0]&256&&ce.value!==r[8]&&q(ce,r[8]),m[0]&512&&q(de,r[9]),rt===(rt=Qt(r))&&W?W.p(r,m):(W.d(1),W=rt(r),W&&(W.c(),W.m(Oe,null))),(!X||m[0]&32768&&tt!==(tt=al("dropzone "+(r[15]?"is-dragging":""))+" svelte-w704mx"))&&u(w,"class",tt),(!X||m[0]&1024&&_e.value!==r[10])&&(_e.value=r[10]),(!X||m[0]&4096)&&Ye!==(Ye=r[12]?"Uploading…":"Upload")&&Y(lt,Ye),(!X||m[0]&69632&&st!==(st=r[12]||!r[16]))&&(pe.disabled=st),(!X||m[0]&4096)&&(ne.disabled=r[12]),r[13]?x?x.p(r,m):(x=gl(r),x.c(),x.m(R,nt)):x&&(x.d(1),x=null),r[14]?F?F.p(r,m):(F=bl(r),F.c(),F.m(R,null)):F&&(F.d(1),F=null)},i(r){X||(rl(e.$$.fragment,r),rl(s.$$.fragment,r),X=!0)},o(r){nl(e.$$.fragment,r),nl(s.$$.fragment,r),X=!1},d(r){r&&(d(t),d(a),d(o)),sl(e,r),sl(s,r),Ze.d(),Bt(T,r),B&&B.d(),Bt(I,r),W.d(),l[32](null),x&&x.d(),F&&F.d(),Pt=!1,Sl(Xt)}}}function Fl(l,e,t){var K;let s;const a=Ol();let o=((K=a[0])==null?void 0:K.tcodeName)??"",i=[],v="",S=[],h="",b=null,k={tcode:"",chapterSlug:"",chapterNo:null,exerciseSlug:""},ae="",Z="",N="",D=null,H="",z,ke=!1,G="",$="",A=!1;function ee(){var p;t(0,o=((p=a[0])==null?void 0:p.tcodeName)??""),t(2,v=""),t(4,h=""),t(6,D=null),t(10,H=""),z&&t(11,z.value="",z),t(7,ae=""),t(8,Z=""),t(9,N=""),t(13,G=""),t(14,$="")}function $e(p){var L,ie;const J=((ie=(L=p.target)==null?void 0:L.files)==null?void 0:ie[0])??null;t(6,D=J),t(10,H=J?J.name.replace(/\.(html|htm)$/i,""):"")}function Je(p){var L,ie;p.preventDefault();const J=((ie=(L=p.dataTransfer)==null?void 0:L.files)==null?void 0:ie[0])??null;t(6,D=J||null),t(10,H=D?D.name.replace(/\.(html|htm)$/i,""):""),t(15,A=!1)}function M(p){p.preventDefault(),t(15,A=!0)}function Q(){t(15,A=!1)}function we(p){(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),z==null||z.click())}async function Me(){if(t(14,$=""),t(13,G=""),!s){t(14,$="Please fill required fields.");return}t(12,ke=!0);try{const p=new FormData;p.append("tcode",k.tcode),p.append("chapter",String(k.chapterNo)),p.append("exercise",k.exerciseSlug),ae.trim()&&p.append("status",ae.trim()),Z.trim()&&p.append("tags",Z.trim()),N.trim()&&p.append("description",N.trim()),p.append("file",D),p.append("filename",H||D.name.replace(/\.(html|htm)$/i,""));const J=await fetch("/admin/uploadNotes",{method:"POST",body:p}),L=await J.json();J.ok?(t(13,G=`Uploaded ${(L==null?void 0:L.uploaded)??1} note.`),ee()):t(14,$=(L==null?void 0:L.error)??"Upload failed.")}catch(p){t(14,$=(p==null?void 0:p.message)??"Network error.")}finally{t(12,ke=!1)}}function Ue(){o=Ut(this),t(0,o),t(17,a)}function Xe(){v=Ut(this),t(2,v),t(1,i),t(0,o),t(1,i),t(0,o)}function Qe(){h=Ut(this),t(4,h),t(3,S),t(0,o),t(2,v),t(1,i),t(3,S),t(0,o),t(2,v),t(1,i)}function te(){ae=this.value,t(7,ae)}function oe(){Z=this.value,t(8,Z)}function et(){N=this.value,t(9,N)}function We(p){Ll[p?"unshift":"push"](()=>{z=p,t(11,z)})}const U=()=>z==null?void 0:z.click();return l.$$.update=()=>{l.$$.dirty[0]&1&&t(1,i=o?yl(o):[]),l.$$.dirty[0]&6&&(i.find(p=>p.filename===v)||t(2,v="")),l.$$.dirty[0]&5&&t(5,b=o&&v?Pl(o,v):null),l.$$.dirty[0]&5&&t(3,S=o&&v?Vl(o,v):[]),l.$$.dirty[0]&24&&(S.find(p=>p.filename===h)||t(4,h="")),l.$$.dirty[0]&53&&t(25,k={tcode:o,chapterSlug:v,chapterNo:b,exerciseSlug:h}),l.$$.dirty[0]&33554496&&t(16,s=!!k.tcode&&!!k.chapterNo&&!!k.exerciseSlug&&!!D)},[o,i,v,S,h,b,D,ae,Z,N,H,z,ke,G,$,A,s,a,ee,$e,Je,M,Q,we,Me,k,Ue,Xe,Qe,te,oe,et,We,U]}class Xl extends Cl{constructor(e){super(),kl(this,e,Fl,xl,wl,{},null,[-1,-1])}}export{Xl as component};
