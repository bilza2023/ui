import{S as q,i as H,s as O,d as p,p as V,r as W,o as z,m as A,a as S,q as F,b as _,c as d,B,H as G,v as m,w as J,h as w,e as b,x as K,f as C,g as D,z as L,k as y,j as U,t as P}from"../chunks/C7a5JP4Z.js";import"../chunks/IHki7fMi.js";import{N as M}from"../chunks/C7fdD7_K.js";function I(i){let t,n,s;return{c(){t=U("div"),n=P(i[1]),this.h()},l(a){t=b(a,"DIV",{class:!0});var o=C(t);n=D(o,i[1]),o.forEach(p),this.h()},h(){m(t,"class",s="message "+(i[1].startsWith("✅")?"ok":"error")+" svelte-1fklhfv")},m(a,o){_(a,t,o),d(t,n)},p(a,o){o&2&&S(n,a[1]),o&2&&s!==(s="message "+(a[1].startsWith("✅")?"ok":"error")+" svelte-1fklhfv")&&m(t,"class",s)},d(a){a&&p(t)}}}function Q(i){let t,n,s,a="Bulk Deck Upload",o,h,f,c,v,u,E,k=i[0].length>0?`(${i[0].length})`:"",$,g,N,T;t=new M({});let l=i[1]&&I(i);return{c(){L(t.$$.fragment),n=y(),s=U("h1"),s.textContent=a,o=y(),l&&l.c(),h=y(),f=U("div"),c=U("input"),v=y(),u=U("button"),E=P("Upload "),$=P(k),this.h()},l(e){J(t.$$.fragment,e),n=w(e),s=b(e,"H1",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-pplm16"&&(s.textContent=a),o=w(e),l&&l.l(e),h=w(e),f=b(e,"DIV",{class:!0});var r=C(f);c=b(r,"INPUT",{type:!0,accept:!0,class:!0}),v=w(r),u=b(r,"BUTTON",{class:!0});var j=C(u);E=D(j,"Upload "),$=D(j,k),j.forEach(p),r.forEach(p),this.h()},h(){m(s,"class","svelte-1fklhfv"),m(c,"type","file"),c.multiple=!0,m(c,"accept",".json,.js"),m(c,"class","svelte-1fklhfv"),m(u,"class","svelte-1fklhfv"),m(f,"class","form-container svelte-1fklhfv")},m(e,r){F(t,e,r),_(e,n,r),_(e,s,r),_(e,o,r),l&&l.m(e,r),_(e,h,r),_(e,f,r),d(f,c),d(f,v),d(f,u),d(u,E),d(u,$),g=!0,N||(T=[B(c,"change",i[3]),B(u,"click",G(i[2]))],N=!0)},p(e,[r]){e[1]?l?l.p(e,r):(l=I(e),l.c(),l.m(h.parentNode,h)):l&&(l.d(1),l=null),(!g||r&1)&&k!==(k=e[0].length>0?`(${e[0].length})`:"")&&S($,k)},i(e){g||(A(t.$$.fragment,e),g=!0)},o(e){z(t.$$.fragment,e),g=!1},d(e){e&&(p(n),p(s),p(o),p(h),p(f)),V(t,e),l&&l.d(e),N=!1,W(T)}}}function R(i,t,n){let s=[],a="";async function o(){if(!s.length){n(1,a="Please select at least one deck file.");return}const f=new FormData;s.forEach(u=>f.append("files",u));const c=await fetch("/admin/upload",{method:"POST",body:f}),v=await c.json();c.ok?(n(1,a="✅ Upload successful!"),n(0,s=[])):n(1,a=`Error: ${v.error||"Unknown error"}`)}return[s,a,o,f=>n(0,s=Array.from(f.target.files))]}class x extends q{constructor(t){super(),H(this,t,R,Q,O,{})}}export{x as component};
