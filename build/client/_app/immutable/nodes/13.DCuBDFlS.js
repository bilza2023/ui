import{S as Tl,i as Ll,s as Sl,d as _,x as sl,I as mt,G as Dl,t as nl,a as al,K as Ce,m as $,R as ol,f,J as z,y as rl,e as S,o as a,B as J,T as Il,L as ht,z as il,q as E,j as u,k as m,C as O,p as P,A as cl,v as C,l as d,r as V,n as gt,M as pt,D as fl}from"../chunks/6VfYvrwu.js";import{e as ke}from"../chunks/CXMHU-kk.js";import"../chunks/IHki7fMi.js";import{N as Nl}from"../chunks/B_jSr6FE.js";import{A as Ol}from"../chunks/C5KAMFK-.js";/* empty css                */import{l as Pl,g as Vl,c as Al,a as wl}from"../chunks/DhL9JzV6.js";function ul(l,e,t){const s=l.slice();return s[31]=e[t],s}function dl(l,e,t){const s=l.slice();return s[34]=e[t],s}function _l(l,e,t){const s=l.slice();return s[37]=e[t],s}function vl(l,e,t){const s=l.slice();return s[40]=e[t],s}function Bl(l){let e,t=ke(l[16]),s=[];for(let o=0;o<t.length;o+=1)s[o]=hl(vl(l,t,o));return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=fl()},l(o){for(let r=0;r<s.length;r+=1)s[r].l(o);e=fl()},m(o,r){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,r);S(o,e,r)},p(o,r){if(r[0]&65536){t=ke(o[16]);let i;for(i=0;i<t.length;i+=1){const g=vl(o,t,i);s[i]?s[i].p(g,r):(s[i]=hl(g),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(o){o&&_(e),mt(s,o)}}}function Ul(l){let e,t="No subjects registered";return{c(){e=d("option"),e.textContent=t,this.h()},l(s){e=u(s,"OPTION",{"data-svelte-h":!0}),O(e)!=="svelte-11m4iz6"&&(e.textContent=t),this.h()},h(){e.__value="",z(e,e.__value)},m(s,o){S(s,e,o)},p:gt,d(s){s&&_(e)}}}function hl(l){let e,t=l[40].tcodeName+"",s;return{c(){e=d("option"),s=V(t),this.h()},l(o){e=u(o,"OPTION",{});var r=m(e);s=P(r,t),r.forEach(_),this.h()},h(){e.__value=l[40].tcodeName,z(e,e.__value)},m(o,r){S(o,e,r),a(e,s)},p:gt,d(o){o&&_(e)}}}function pl(l){let e,t,s=String(l[37].number).padStart(2,"0")+"",o,r,i=l[37].name+"",g,A,v;return{c(){e=d("option"),t=V("Ch "),o=V(s),r=V(" — "),g=V(i),A=C(),this.h()},l(p){e=u(p,"OPTION",{});var b=m(e);t=P(b,"Ch "),o=P(b,s),r=P(b," — "),g=P(b,i),A=E(b),b.forEach(_),this.h()},h(){e.__value=v=l[37].filename,z(e,e.__value)},m(p,b){S(p,e,b),a(e,t),a(e,o),a(e,r),a(e,g),a(e,A)},p(p,b){b[0]&2&&s!==(s=String(p[37].number).padStart(2,"0")+"")&&$(o,s),b[0]&2&&i!==(i=p[37].name+"")&&$(g,i),b[0]&2&&v!==(v=p[37].filename)&&(e.__value=v,z(e,e.__value))},d(p){p&&_(e)}}}function ml(l){let e,t,s,o;return{c(){e=d("small"),t=V("Chapter #: "),s=d("strong"),o=V(l[3]),this.h()},l(r){e=u(r,"SMALL",{class:!0});var i=m(e);t=P(i,"Chapter #: "),s=u(i,"STRONG",{});var g=m(s);o=P(g,l[3]),g.forEach(_),i.forEach(_),this.h()},h(){f(e,"class","hint")},m(r,i){S(r,e,i),a(e,t),a(e,s),a(s,o)},p(r,i){i[0]&8&&$(o,r[3])},d(r){r&&_(e)}}}function gl(l){let e,t=l[34].name+"",s,o;return{c(){e=d("option"),s=V(t),this.h()},l(r){e=u(r,"OPTION",{});var i=m(e);s=P(i,t),i.forEach(_),this.h()},h(){e.__value=o=l[34].filename,z(e,e.__value)},m(r,i){S(r,e,i),a(e,s)},p(r,i){i[0]&16&&t!==(t=r[34].name+"")&&$(s,t),i[0]&16&&o!==(o=r[34].filename)&&(e.__value=o,z(e,e.__value))},d(r){r&&_(e)}}}function Ml(l){let e,t="Drop your .json here",s,o,r="or click to choose";return{c(){e=d("strong"),e.textContent=t,s=C(),o=d("small"),o.textContent=r,this.h()},l(i){e=u(i,"STRONG",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-ncr352"&&(e.textContent=t),s=E(i),o=u(i,"SMALL",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-12xg281"&&(o.textContent=r),this.h()},h(){f(e,"class","svelte-1lc9vvt"),f(o,"class","svelte-1lc9vvt")},m(i,g){S(i,e,g),S(i,s,g),S(i,o,g)},p:gt,d(i){i&&(_(e),_(s),_(o))}}}function jl(l){let e,t=l[6].name+"",s,o,r,i=Math.round(l[6].size/1024)+"",g,A;return{c(){e=d("strong"),s=V(t),o=C(),r=d("small"),g=V(i),A=V(" KB"),this.h()},l(v){e=u(v,"STRONG",{class:!0});var p=m(e);s=P(p,t),p.forEach(_),o=E(v),r=u(v,"SMALL",{class:!0});var b=m(r);g=P(b,i),A=P(b," KB"),b.forEach(_),this.h()},h(){f(e,"class","svelte-1lc9vvt"),f(r,"class","svelte-1lc9vvt")},m(v,p){S(v,e,p),a(e,s),S(v,o,p),S(v,r,p),a(r,g),a(r,A)},p(v,p){p[0]&64&&t!==(t=v[6].name+"")&&$(s,t),p[0]&64&&i!==(i=Math.round(v[6].size/1024)+"")&&$(g,i)},d(v){v&&(_(e),_(o),_(r))}}}function bl(l){let e,t=l[31]+"",s;return{c(){e=d("option"),s=V(t),this.h()},l(o){e=u(o,"OPTION",{});var r=m(e);s=P(r,t),r.forEach(_),this.h()},h(){e.__value=l[31],z(e,e.__value)},m(o,r){S(o,e,r),a(e,s)},p:gt,d(o){o&&_(e)}}}function El(l){let e,t;return{c(){e=d("div"),t=V(l[12]),this.h()},l(s){e=u(s,"DIV",{class:!0});var o=m(e);t=P(o,l[12]),o.forEach(_),this.h()},h(){f(e,"class","note ok svelte-1lc9vvt")},m(s,o){S(s,e,o),a(e,t)},p(s,o){o[0]&4096&&$(t,s[12])},d(s){s&&_(e)}}}function Cl(l){let e,t;return{c(){e=d("div"),t=V(l[13]),this.h()},l(s){e=u(s,"DIV",{class:!0});var o=m(e);t=P(o,l[13]),o.forEach(_),this.h()},h(){f(e,"class","note err svelte-1lc9vvt")},m(s,o){S(s,e,o),a(e,t)},p(s,o){o[0]&8192&&$(t,s[13])},d(s){s&&_(e)}}}function zl(l){let e,t,s,o,r,i,g='<h1 class="svelte-1lc9vvt">Upload JSON Deck</h1> <p class="svelte-1lc9vvt">Pick the path, drop your <code class="svelte-1lc9vvt">.json</code>, add optional meta, then upload.</p>',A,v,p,b,ee="Path",le,w,G,W,we="Tcode",fe,F,Be,R,se,Ye="Chapter",Je,B,q,Te=l[0]?"Select chapter":"Pick tcode first",Ue,Me,qe,Ke,te,ne,Qe="Exercise",k,T,L,X=l[2]?"Select exercise":"Pick chapter first",Ze,bt,xe,Et,ue,Le,Rt="File",Ct,de,y,Se,Ht="⇪",kt,De,Tt,_e,$e,Lt,ve,he,Ie,Jt="Filename (auto)",St,ae,Dt,pe,Ne,qt="Status",It,K,oe,Kt="(auto)",Nt,me,Oe,Qt="Meta",Ot,ge,be,Pe,Wt="Description",Pt,re,Vt,Ee,Ve,Xt="Tags (csv)",At,ie,wt,Q,ce,We=l[11]?"Uploading…":"Upload JSON",et,tt,Bt,lt,Ut,Ae,Yt="Tip: Drag &amp; drop a <code>.json</code> file anywhere inside the dashed area above.",Y,Mt,Zt;e=new Nl({}),s=new Ol({});function kl(n,h){return n[16].length?Bl:Ul}let Xe=kl(l)(l),je=ke(l[1]),D=[];for(let n=0;n<je.length;n+=1)D[n]=pl(_l(l,je,n));let U=l[3]!==null&&ml(l),ze=ke(l[4]),I=[];for(let n=0;n<ze.length;n+=1)I[n]=gl(dl(l,ze,n));function xt(n,h){return n[6]?jl:Ml}let st=xt(l),Z=st(l),Fe=ke(l[17]),N=[];for(let n=0;n<Fe.length;n+=1)N[n]=bl(ul(l,Fe,n));let M=l[12]&&El(l),j=l[13]&&Cl(l);return{c(){cl(e.$$.fragment),t=C(),cl(s.$$.fragment),o=C(),r=d("section"),i=d("header"),i.innerHTML=g,A=C(),v=d("form"),p=d("fieldset"),b=d("legend"),b.textContent=ee,le=C(),w=d("div"),G=d("div"),W=d("label"),W.textContent=we,fe=C(),F=d("select"),Xe.c(),Be=C(),R=d("div"),se=d("label"),se.textContent=Ye,Je=C(),B=d("select"),q=d("option"),Ue=V(Te);for(let n=0;n<D.length;n+=1)D[n].c();qe=C(),U&&U.c(),Ke=C(),te=d("div"),ne=d("label"),ne.textContent=Qe,k=C(),T=d("select"),L=d("option"),Ze=V(X),bt=C();for(let n=0;n<I.length;n+=1)I[n].c();Et=C(),ue=d("fieldset"),Le=d("legend"),Le.textContent=Rt,Ct=C(),de=d("div"),y=d("div"),Se=d("div"),Se.textContent=Ht,kt=C(),De=d("div"),Z.c(),Tt=C(),_e=d("input"),Lt=C(),ve=d("div"),he=d("div"),Ie=d("label"),Ie.textContent=Jt,St=C(),ae=d("input"),Dt=C(),pe=d("div"),Ne=d("label"),Ne.textContent=qt,It=C(),K=d("select"),oe=d("option"),oe.textContent=Kt;for(let n=0;n<N.length;n+=1)N[n].c();Nt=C(),me=d("fieldset"),Oe=d("legend"),Oe.textContent=Qt,Ot=C(),ge=d("div"),be=d("div"),Pe=d("label"),Pe.textContent=Wt,Pt=C(),re=d("input"),Vt=C(),Ee=d("div"),Ve=d("label"),Ve.textContent=Xt,At=C(),ie=d("input"),wt=C(),Q=d("div"),ce=d("button"),et=V(We),Bt=C(),M&&M.c(),lt=C(),j&&j.c(),Ut=C(),Ae=d("p"),Ae.innerHTML=Yt,this.h()},l(n){il(e.$$.fragment,n),t=E(n),il(s.$$.fragment,n),o=E(n),r=u(n,"SECTION",{class:!0});var h=m(r);i=u(h,"HEADER",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-1s51uh2"&&(i.innerHTML=g),A=E(h),v=u(h,"FORM",{class:!0});var c=m(v);p=u(c,"FIELDSET",{class:!0});var H=m(p);b=u(H,"LEGEND",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-13kvvn3"&&(b.textContent=ee),le=E(H),w=u(H,"DIV",{class:!0});var ye=m(w);G=u(ye,"DIV",{class:!0});var nt=m(G);W=u(nt,"LABEL",{for:!0,"data-svelte-h":!0}),O(W)!=="svelte-6p13rk"&&(W.textContent=we),fe=E(nt),F=u(nt,"SELECT",{id:!0});var $t=m(F);Xe.l($t),$t.forEach(_),nt.forEach(_),Be=E(ye),R=u(ye,"DIV",{class:!0});var Ge=m(R);se=u(Ge,"LABEL",{for:!0,"data-svelte-h":!0}),O(se)!=="svelte-6veaik"&&(se.textContent=Ye),Je=E(Ge),B=u(Ge,"SELECT",{id:!0});var jt=m(B);q=u(jt,"OPTION",{});var el=m(q);Ue=P(el,Te),el.forEach(_);for(let x=0;x<D.length;x+=1)D[x].l(jt);jt.forEach(_),qe=E(Ge),U&&U.l(Ge),Ge.forEach(_),Ke=E(ye),te=u(ye,"DIV",{class:!0});var at=m(te);ne=u(at,"LABEL",{for:!0,"data-svelte-h":!0}),O(ne)!=="svelte-8p1xu2"&&(ne.textContent=Qe),k=E(at),T=u(at,"SELECT",{id:!0});var zt=m(T);L=u(zt,"OPTION",{});var Ft=m(L);Ze=P(Ft,X),bt=E(Ft),Ft.forEach(_);for(let x=0;x<I.length;x+=1)I[x].l(zt);zt.forEach(_),at.forEach(_),ye.forEach(_),H.forEach(_),Et=E(c),ue=u(c,"FIELDSET",{class:!0});var ot=m(ue);Le=u(ot,"LEGEND",{class:!0,"data-svelte-h":!0}),O(Le)!=="svelte-1iyhln2"&&(Le.textContent=Rt),Ct=E(ot),de=u(ot,"DIV",{class:!0});var rt=m(de);y=u(rt,"DIV",{class:!0,role:!0,tabindex:!0,"aria-label":!0});var Re=m(y);Se=u(Re,"DIV",{class:!0,"data-svelte-h":!0}),O(Se)!=="svelte-j6trfd"&&(Se.textContent=Ht),kt=E(Re),De=u(Re,"DIV",{class:!0});var tl=m(De);Z.l(tl),tl.forEach(_),Tt=E(Re),_e=u(Re,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),Re.forEach(_),Lt=E(rt),ve=u(rt,"DIV",{class:!0});var it=m(ve);he=u(it,"DIV",{class:!0});var ct=m(he);Ie=u(ct,"LABEL",{for:!0,"data-svelte-h":!0}),O(Ie)!=="svelte-1c30r00"&&(Ie.textContent=Jt),St=E(ct),ae=u(ct,"INPUT",{id:!0,placeholder:!0}),ct.forEach(_),Dt=E(it),pe=u(it,"DIV",{class:!0});var ft=m(pe);Ne=u(ft,"LABEL",{for:!0,"data-svelte-h":!0}),O(Ne)!=="svelte-15lfxni"&&(Ne.textContent=qt),It=E(ft),K=u(ft,"SELECT",{id:!0});var yt=m(K);oe=u(yt,"OPTION",{"data-svelte-h":!0}),O(oe)!=="svelte-7musmw"&&(oe.textContent=Kt);for(let x=0;x<N.length;x+=1)N[x].l(yt);yt.forEach(_),ft.forEach(_),it.forEach(_),rt.forEach(_),ot.forEach(_),Nt=E(c),me=u(c,"FIELDSET",{class:!0});var ut=m(me);Oe=u(ut,"LEGEND",{class:!0,"data-svelte-h":!0}),O(Oe)!=="svelte-yagw0p"&&(Oe.textContent=Qt),Ot=E(ut),ge=u(ut,"DIV",{class:!0});var dt=m(ge);be=u(dt,"DIV",{class:!0});var _t=m(be);Pe=u(_t,"LABEL",{for:!0,"data-svelte-h":!0}),O(Pe)!=="svelte-1tds9bi"&&(Pe.textContent=Wt),Pt=E(_t),re=u(_t,"INPUT",{id:!0,placeholder:!0}),_t.forEach(_),Vt=E(dt),Ee=u(dt,"DIV",{class:!0});var vt=m(Ee);Ve=u(vt,"LABEL",{for:!0,"data-svelte-h":!0}),O(Ve)!=="svelte-gn51pt"&&(Ve.textContent=Xt),At=E(vt),ie=u(vt,"INPUT",{id:!0,placeholder:!0}),vt.forEach(_),dt.forEach(_),ut.forEach(_),wt=E(c),Q=u(c,"DIV",{class:!0});var He=m(Q);ce=u(He,"BUTTON",{class:!0});var ll=m(ce);et=P(ll,We),ll.forEach(_),Bt=E(He),M&&M.l(He),lt=E(He),j&&j.l(He),He.forEach(_),Ut=E(c),Ae=u(c,"P",{class:!0,"data-svelte-h":!0}),O(Ae)!=="svelte-1p0pvel"&&(Ae.innerHTML=Yt),c.forEach(_),h.forEach(_),this.h()},h(){f(i,"class","pagehead svelte-1lc9vvt"),f(b,"class","svelte-1lc9vvt"),f(W,"for","tcode"),f(F,"id","tcode"),l[0]===void 0&&ht(()=>l[23].call(F)),f(G,"class","field"),f(se,"for","chapter"),q.__value="",z(q,q.__value),q.disabled=!0,q.selected=!0,f(B,"id","chapter"),B.disabled=Me=!l[0]||!l[1].length,l[2]===void 0&&ht(()=>l[24].call(B)),f(R,"class","field"),f(ne,"for","exercise"),L.__value="",z(L,L.__value),L.disabled=!0,L.selected=!0,f(T,"id","exercise"),T.disabled=xe=!l[2]||!l[4].length,l[5]===void 0&&ht(()=>l[25].call(T)),f(te,"class","field"),f(w,"class","form-grid svelte-1lc9vvt"),f(p,"class","block svelte-1lc9vvt"),f(Le,"class","svelte-1lc9vvt"),f(Se,"class","dz-icon svelte-1lc9vvt"),f(De,"class","dz-text svelte-1lc9vvt"),f(_e,"id","file"),f(_e,"type","file"),f(_e,"accept","application/json,.json"),f(_e,"class","hidden-input svelte-1lc9vvt"),f(y,"class",$e=ol("dropzone "+(l[14]?"is-dragging":""))+" svelte-1lc9vvt"),f(y,"role","button"),f(y,"tabindex","0"),f(y,"aria-label","Drop JSON here or click to browse"),f(Ie,"for","filename"),f(ae,"id","filename"),f(ae,"placeholder","auto from file"),f(he,"class","field"),f(Ne,"for","status"),oe.__value="",z(oe,oe.__value),f(K,"id","status"),l[10]===void 0&&ht(()=>l[28].call(K)),f(pe,"class","field"),f(ve,"class","sidegrid svelte-1lc9vvt"),f(de,"class","dropgrid svelte-1lc9vvt"),f(ue,"class","block svelte-1lc9vvt"),f(Oe,"class","svelte-1lc9vvt"),f(Pe,"for","description"),f(re,"id","description"),f(re,"placeholder","optional"),f(be,"class","field"),f(Ve,"for","tags"),f(ie,"id","tags"),f(ie,"placeholder","algebra, basics"),f(Ee,"class","field"),f(ge,"class","form-grid two svelte-1lc9vvt"),f(me,"class","block svelte-1lc9vvt"),ce.disabled=tt=l[11]||!l[15],f(ce,"class","primary"),f(Q,"class","actions svelte-1lc9vvt"),f(Ae,"class","hint"),f(v,"class","form upload-form svelte-1lc9vvt"),f(r,"class","wrap svelte-1lc9vvt")},m(n,h){rl(e,n,h),S(n,t,h),rl(s,n,h),S(n,o,h),S(n,r,h),a(r,i),a(r,A),a(r,v),a(v,p),a(p,b),a(p,le),a(p,w),a(w,G),a(G,W),a(G,fe),a(G,F),Xe.m(F,null),Ce(F,l[0],!0),a(w,Be),a(w,R),a(R,se),a(R,Je),a(R,B),a(B,q),a(q,Ue);for(let c=0;c<D.length;c+=1)D[c]&&D[c].m(B,null);Ce(B,l[2],!0),a(R,qe),U&&U.m(R,null),a(w,Ke),a(w,te),a(te,ne),a(te,k),a(te,T),a(T,L),a(L,Ze),a(L,bt);for(let c=0;c<I.length;c+=1)I[c]&&I[c].m(T,null);Ce(T,l[5],!0),a(v,Et),a(v,ue),a(ue,Le),a(ue,Ct),a(ue,de),a(de,y),a(y,Se),a(y,kt),a(y,De),Z.m(De,null),a(y,Tt),a(y,_e),a(de,Lt),a(de,ve),a(ve,he),a(he,Ie),a(he,St),a(he,ae),z(ae,l[7]),a(ve,Dt),a(ve,pe),a(pe,Ne),a(pe,It),a(pe,K),a(K,oe);for(let c=0;c<N.length;c+=1)N[c]&&N[c].m(K,null);Ce(K,l[10],!0),a(v,Nt),a(v,me),a(me,Oe),a(me,Ot),a(me,ge),a(ge,be),a(be,Pe),a(be,Pt),a(be,re),z(re,l[8]),a(ge,Vt),a(ge,Ee),a(Ee,Ve),a(Ee,At),a(Ee,ie),z(ie,l[9]),a(v,wt),a(v,Q),a(Q,ce),a(ce,et),a(Q,Bt),M&&M.m(Q,null),a(Q,lt),j&&j.m(Q,null),a(v,Ut),a(v,Ae),Y=!0,Mt||(Zt=[J(F,"change",l[23]),J(B,"change",l[24]),J(T,"change",l[25]),J(_e,"change",l[18]),J(y,"click",l[26]),J(ae,"input",l[27]),J(K,"change",l[28]),J(re,"input",l[29]),J(ie,"input",l[30]),J(ce,"click",Il(l[22])),J(v,"drop",l[19]),J(v,"dragover",l[20]),J(v,"dragleave",l[21])],Mt=!0)},p(n,h){if(Xe.p(n,h),h[0]&65537&&Ce(F,n[0]),(!Y||h[0]&1)&&Te!==(Te=n[0]?"Select chapter":"Pick tcode first")&&$(Ue,Te),h[0]&2){je=ke(n[1]);let c;for(c=0;c<je.length;c+=1){const H=_l(n,je,c);D[c]?D[c].p(H,h):(D[c]=pl(H),D[c].c(),D[c].m(B,null))}for(;c<D.length;c+=1)D[c].d(1);D.length=je.length}if((!Y||h[0]&65539&&Me!==(Me=!n[0]||!n[1].length))&&(B.disabled=Me),h[0]&6&&Ce(B,n[2]),n[3]!==null?U?U.p(n,h):(U=ml(n),U.c(),U.m(R,null)):U&&(U.d(1),U=null),(!Y||h[0]&4)&&X!==(X=n[2]?"Select exercise":"Pick chapter first")&&$(Ze,X),h[0]&16){ze=ke(n[4]);let c;for(c=0;c<ze.length;c+=1){const H=dl(n,ze,c);I[c]?I[c].p(H,h):(I[c]=gl(H),I[c].c(),I[c].m(T,null))}for(;c<I.length;c+=1)I[c].d(1);I.length=ze.length}if((!Y||h[0]&22&&xe!==(xe=!n[2]||!n[4].length))&&(T.disabled=xe),h[0]&48&&Ce(T,n[5]),st===(st=xt(n))&&Z?Z.p(n,h):(Z.d(1),Z=st(n),Z&&(Z.c(),Z.m(De,null))),(!Y||h[0]&16384&&$e!==($e=ol("dropzone "+(n[14]?"is-dragging":""))+" svelte-1lc9vvt"))&&f(y,"class",$e),h[0]&128&&ae.value!==n[7]&&z(ae,n[7]),h[0]&131072){Fe=ke(n[17]);let c;for(c=0;c<Fe.length;c+=1){const H=ul(n,Fe,c);N[c]?N[c].p(H,h):(N[c]=bl(H),N[c].c(),N[c].m(K,null))}for(;c<N.length;c+=1)N[c].d(1);N.length=Fe.length}h[0]&132096&&Ce(K,n[10]),h[0]&256&&re.value!==n[8]&&z(re,n[8]),h[0]&512&&ie.value!==n[9]&&z(ie,n[9]),(!Y||h[0]&2048)&&We!==(We=n[11]?"Uploading…":"Upload JSON")&&$(et,We),(!Y||h[0]&34816&&tt!==(tt=n[11]||!n[15]))&&(ce.disabled=tt),n[12]?M?M.p(n,h):(M=El(n),M.c(),M.m(Q,lt)):M&&(M.d(1),M=null),n[13]?j?j.p(n,h):(j=Cl(n),j.c(),j.m(Q,null)):j&&(j.d(1),j=null)},i(n){Y||(al(e.$$.fragment,n),al(s.$$.fragment,n),Y=!0)},o(n){nl(e.$$.fragment,n),nl(s.$$.fragment,n),Y=!1},d(n){n&&(_(t),_(o),_(r)),sl(e,n),sl(s,n),Xe.d(),mt(D,n),U&&U.d(),mt(I,n),Z.d(),mt(N,n),M&&M.d(),j&&j.d(),Mt=!1,Dl(Zt)}}}function Gt(l){return(l||"").replace(/\.json$/i,"").trim().toLowerCase().replace(/[^a-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function Fl(l,e,t){var Qe;let s;const o=Pl();let r=((Qe=o[0])==null?void 0:Qe.tcodeName)??"",i=[],g="",A=null,v=[],p="",b=null,ee="",le="",w="",G="",W=!1,we="",fe="",F=!1;const Be=["draft","ready","published","archived"];function R(k){var L,X;const T=((X=(L=k.target)==null?void 0:L.files)==null?void 0:X[0])??null;t(6,b=T),t(7,ee=T?Gt(T.name):"")}function se(k){var L,X;k.preventDefault(),t(14,F=!1);const T=((X=(L=k.dataTransfer)==null?void 0:L.files)==null?void 0:X[0])??null;t(6,b=T),t(7,ee=T?Gt(T.name):"")}function Ye(k){k.preventDefault(),t(14,F=!0)}function Je(){t(14,F=!1)}async function B(){if(t(13,fe=""),t(12,we=""),!s){t(13,fe="Please fill required fields.");return}t(11,W=!0);try{const k=new FormData;k.append("tcode",r),k.append("chapter",String(A)),k.append("exercise",p),k.append("file",b),k.append("filename",Gt(ee||b.name)),le&&k.append("description",le),w&&k.append("tags",w),G&&k.append("status",G);const T=await fetch("/admin/upload_json",{method:"POST",body:k}),L=await T.json();if(!T.ok)throw new Error((L==null?void 0:L.error)||"Upload failed");t(12,we=`Uploaded ✓ (${L.filename})`),t(6,b=null),t(7,ee=""),(document.getElementById("file")||{}).value=""}catch(k){t(13,fe=k.message||"Error")}finally{t(11,W=!1)}}function q(){r=pt(this),t(0,r),t(16,o)}function Te(){g=pt(this),t(2,g),t(1,i),t(0,r),t(1,i),t(0,r)}function Ue(){p=pt(this),t(5,p),t(4,v),t(0,r),t(2,g),t(1,i),t(4,v),t(0,r),t(2,g),t(1,i)}const Me=()=>{var k;return(k=document.getElementById("file"))==null?void 0:k.click()};function qe(){ee=this.value,t(7,ee)}function Ke(){G=pt(this),t(10,G),t(17,Be)}function te(){le=this.value,t(8,le)}function ne(){w=this.value,t(9,w)}return l.$$.update=()=>{l.$$.dirty[0]&1&&t(1,i=r?Vl(r):[]),l.$$.dirty[0]&6&&(i.find(k=>k.filename===g)||t(2,g="")),l.$$.dirty[0]&5&&t(3,A=r&&g?Al(r,g):null),l.$$.dirty[0]&5&&t(4,v=r&&g?wl(r,g):[]),l.$$.dirty[0]&48&&(v.find(k=>k.filename===p)||t(5,p="")),l.$$.dirty[0]&105&&t(15,s=!!r&&!!A&&!!p&&!!b)},[r,i,g,A,v,p,b,ee,le,w,G,W,we,fe,F,s,o,Be,R,se,Ye,Je,B,q,Te,Ue,Me,qe,Ke,te,ne]}class Wl extends Tl{constructor(e){super(),Ll(this,e,Fl,zl,Sl,{},null,[-1,-1])}}export{Wl as component};
