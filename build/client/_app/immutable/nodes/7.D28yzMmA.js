import{S as B,i as O,s as V,d as p,m as W,y as A,o as F,p as H,a as q,q as z,b as _,c as d,C as T,I as G,r as m,v as J,h as $,e as b,w as K,f as j,g as D,x as L,k as w,j as y,t as I}from"../chunks/CJK8MNlv.js";import"../chunks/IHki7fMi.js";import{N as M}from"../chunks/BKcAV9pP.js";function S(i){let t,n,s;return{c(){t=y("div"),n=I(i[1]),this.h()},l(a){t=b(a,"DIV",{class:!0});var o=j(t);n=D(o,i[1]),o.forEach(p),this.h()},h(){m(t,"class",s="message "+(i[1].startsWith("✅")?"ok":"error")+" svelte-1fklhfv")},m(a,o){_(a,t,o),d(t,n)},p(a,o){o&2&&q(n,a[1]),o&2&&s!==(s="message "+(a[1].startsWith("✅")?"ok":"error")+" svelte-1fklhfv")&&m(t,"class",s)},d(a){a&&p(t)}}}function Q(i){let t,n,s,a="Bulk Deck Upload",o,h,f,c,v,u,C,k=i[0].length>0?`(${i[0].length})`:"",U,g,E,P;t=new M({});let l=i[1]&&S(i);return{c(){L(t.$$.fragment),n=w(),s=y("h1"),s.textContent=a,o=w(),l&&l.c(),h=w(),f=y("div"),c=y("input"),v=w(),u=y("button"),C=I("Upload "),U=I(k),this.h()},l(e){J(t.$$.fragment,e),n=$(e),s=b(e,"H1",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-pplm16"&&(s.textContent=a),o=$(e),l&&l.l(e),h=$(e),f=b(e,"DIV",{class:!0});var r=j(f);c=b(r,"INPUT",{type:!0,accept:!0,class:!0}),v=$(r),u=b(r,"BUTTON",{class:!0});var N=j(u);C=D(N,"Upload "),U=D(N,k),N.forEach(p),r.forEach(p),this.h()},h(){m(s,"class","svelte-1fklhfv"),m(c,"type","file"),c.multiple=!0,m(c,"accept",".json,.js"),m(c,"class","svelte-1fklhfv"),m(u,"class","svelte-1fklhfv"),m(f,"class","form-container svelte-1fklhfv")},m(e,r){z(t,e,r),_(e,n,r),_(e,s,r),_(e,o,r),l&&l.m(e,r),_(e,h,r),_(e,f,r),d(f,c),d(f,v),d(f,u),d(u,C),d(u,U),g=!0,E||(P=[T(c,"change",i[3]),T(u,"click",G(i[2]))],E=!0)},p(e,[r]){e[1]?l?l.p(e,r):(l=S(e),l.c(),l.m(h.parentNode,h)):l&&(l.d(1),l=null),(!g||r&1)&&k!==(k=e[0].length>0?`(${e[0].length})`:"")&&q(U,k)},i(e){g||(H(t.$$.fragment,e),g=!0)},o(e){F(t.$$.fragment,e),g=!1},d(e){e&&(p(n),p(s),p(o),p(h),p(f)),W(t,e),l&&l.d(e),E=!1,A(P)}}}function R(i,t,n){let s=[],a="";async function o(){if(!s.length){n(1,a="Please select at least one deck file.");return}const f=new FormData;s.forEach(u=>f.append("files",u));const c=await fetch("/admin/upload",{method:"POST",body:f}),v=await c.json();c.ok?(n(1,a="✅ Upload successful!"),n(0,s=[])):n(1,a=`Error: ${v.error||"Unknown error"}`)}return[s,a,o,f=>n(0,s=Array.from(f.target.files))]}class x extends B{constructor(t){super(),O(this,t,R,Q,V,{})}}export{x as component};
