import{S as W,i as F,s as J,n as U,d as m,e as y,o as C,f as v,j as b,k as x,B as w,q as S,l as g,v as L,U as K,N as Q,V as X,E as M,m as Y,J as A,W as q,p as B,r as I,F as Z,R as O}from"./Z9DZtfMg.js";import{e as z}from"./DtyEnmTo.js";import"./IHki7fMi.js";import"./29W-Tj8B.js";function P(c,e,a){const s=c.slice();return s[21]=e[a],s}function $(c){let e,a="Login",s,l,i="Register",t,r,_,o="Theme ▾",n,h,N,d=c[2]&&j(c);return{c(){e=g("a"),e.textContent=a,s=L(),l=g("a"),l.textContent=i,t=L(),r=g("div"),_=g("button"),_.textContent=o,n=L(),d&&d.c(),this.h()},l(p){e=b(p,"A",{href:!0,class:!0,"data-svelte-h":!0}),w(e)!=="svelte-1ikv9w7"&&(e.textContent=a),s=S(p),l=b(p,"A",{href:!0,class:!0,"data-svelte-h":!0}),w(l)!=="svelte-8w1kkx"&&(l.textContent=i),t=S(p),r=b(p,"DIV",{class:!0});var u=x(r);_=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),w(_)!=="svelte-1tzr3f3"&&(_.textContent=o),n=S(u),d&&d.l(u),u.forEach(m),this.h()},h(){v(e,"href","/login"),v(e,"class","pill svelte-e0448a"),v(l,"href","/register"),v(l,"class","pill svelte-e0448a"),v(_,"class","pill svelte-e0448a"),v(r,"class","dropdown svelte-e0448a")},m(p,u){y(p,e,u),y(p,s,u),y(p,l,u),y(p,t,u),y(p,r,u),C(r,_),C(r,n),d&&d.m(r,null),h||(N=A(r,"click",q(c[6])),h=!0)},p(p,u){p[2]?d?d.p(p,u):(d=j(p),d.c(),d.m(r,null)):d&&(d.d(1),d=null)},d(p){p&&(m(e),m(s),m(l),m(t),m(r)),d&&d.d(),h=!1,N()}}}function ee(c){let e,a,s=c[1].email+"",l,i,t,r,_="Theme ▾",o,n,h,N="Logout",d,p,u=c[2]&&H(c);return{c(){e=g("span"),a=I("Hi, "),l=I(s),i=L(),t=g("div"),r=g("button"),r.textContent=_,o=L(),u&&u.c(),n=L(),h=g("button"),h.textContent=N,this.h()},l(k){e=b(k,"SPAN",{class:!0});var T=x(e);a=B(T,"Hi, "),l=B(T,s),T.forEach(m),i=S(k),t=b(k,"DIV",{class:!0});var D=x(t);r=b(D,"BUTTON",{class:!0,"data-svelte-h":!0}),w(r)!=="svelte-1tzr3f3"&&(r.textContent=_),o=S(D),u&&u.l(D),D.forEach(m),n=S(k),h=b(k,"BUTTON",{class:!0,"data-svelte-h":!0}),w(h)!=="svelte-4qezu6"&&(h.textContent=N),this.h()},h(){v(e,"class","hello svelte-e0448a"),v(r,"class","pill svelte-e0448a"),v(t,"class","dropdown svelte-e0448a"),v(h,"class","pill svelte-e0448a")},m(k,T){y(k,e,T),C(e,a),C(e,l),y(k,i,T),y(k,t,T),C(t,r),C(t,o),u&&u.m(t,null),y(k,n,T),y(k,h,T),d||(p=[A(t,"click",q(c[6])),A(h,"click",c[7])],d=!0)},p(k,T){T&2&&s!==(s=k[1].email+"")&&Y(l,s),k[2]?u?u.p(k,T):(u=H(k),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(k){k&&(m(e),m(i),m(t),m(n),m(h)),u&&u.d(),d=!1,M(p)}}}function te(c){let e,a="…";return{c(){e=g("span"),e.textContent=a,this.h()},l(s){e=b(s,"SPAN",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-9s1gh8"&&(e.textContent=a),this.h()},h(){v(e,"class","muted svelte-e0448a")},m(s,l){y(s,e,l)},p:U,d(s){s&&m(e)}}}function j(c){let e,a,s="Light",l,i,t="Dark",r,_;return{c(){e=g("div"),a=g("button"),a.textContent=s,l=L(),i=g("button"),i.textContent=t,this.h()},l(o){e=b(o,"DIV",{class:!0,role:!0});var n=x(e);a=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),w(a)!=="svelte-ujii30"&&(a.textContent=s),l=S(n),i=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),w(i)!=="svelte-h1u14m"&&(i.textContent=t),n.forEach(m),this.h()},h(){v(a,"class","menu-item svelte-e0448a"),v(i,"class","menu-item svelte-e0448a"),v(e,"class","menu svelte-e0448a"),v(e,"role","menu")},m(o,n){y(o,e,n),C(e,a),C(e,l),C(e,i),r||(_=[A(a,"click",c[9]),A(i,"click",c[10])],r=!0)},p:U,d(o){o&&m(e),r=!1,M(_)}}}function H(c){let e,a=z(c[4]),s=[];for(let l=0;l<a.length;l+=1)s[l]=V(P(c,a,l));return{c(){e=g("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=b(l,"DIV",{class:!0,role:!0});var i=x(e);for(let t=0;t<s.length;t+=1)s[t].l(i);i.forEach(m),this.h()},h(){v(e,"class","menu svelte-e0448a"),v(e,"role","menu")},m(l,i){y(l,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null)},p(l,i){if(i&56){a=z(l[4]);let t;for(t=0;t<a.length;t+=1){const r=P(l,a,t);s[t]?s[t].p(r,i):(s[t]=V(r),s[t].c(),s[t].m(e,null))}for(;t<s.length;t+=1)s[t].d(1);s.length=a.length}},d(l){l&&m(e),Z(s,l)}}}function V(c){let e,a=c[21].label+"",s,l,i,t,r;function _(){return c[8](c[21])}return{c(){e=g("button"),s=I(a),l=L(),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var n=x(e);s=B(n,a),l=S(n),n.forEach(m),this.h()},h(){v(e,"class",i=O("menu-item"+(c[3]===c[21].key?" active":""))+" svelte-e0448a")},m(o,n){y(o,e,n),C(e,s),C(e,l),t||(r=A(e,"click",_),t=!0)},p(o,n){c=o,n&8&&i!==(i=O("menu-item"+(c[3]===c[21].key?" active":""))+" svelte-e0448a")&&v(e,"class",i)},d(o){o&&m(e),t=!1,r()}}}function le(c){let e,a,s="Taleem.help",l,i,t;function r(n,h){return n[0]?te:n[1]?ee:$}let _=r(c),o=_(c);return{c(){e=g("nav"),a=g("a"),a.textContent=s,l=L(),i=g("span"),t=L(),o.c(),this.h()},l(n){e=b(n,"NAV",{class:!0});var h=x(e);a=b(h,"A",{class:!0,href:!0,"data-svelte-h":!0}),w(a)!=="svelte-19kz9hq"&&(a.textContent=s),l=S(h),i=b(h,"SPAN",{class:!0}),x(i).forEach(m),t=S(h),o.l(h),h.forEach(m),this.h()},h(){v(a,"class","brand svelte-e0448a"),v(a,"href","/"),v(i,"class","spacer svelte-e0448a"),v(e,"class","nav svelte-e0448a")},m(n,h){y(n,e,h),C(e,a),C(e,l),C(e,i),C(e,t),o.m(e,null)},p(n,[h]){_===(_=r(n))&&o?o.p(n,h):(o.d(1),o=_(n),o&&(o.c(),o.m(e,null)))},i:U,o:U,d(n){n&&m(e),o.d()}}}function se(c,e,a){const s=K();let l=!0,i=null,t=0;const r=[{key:"light",label:"Light (Primer)"},{key:"dark",label:"Dark (Primer)"},{key:"dracula",label:"Dracula"},{key:"nord",label:"Nord"},{key:"github-dim",label:"GitHub Dim"},{key:"gruvbox-dark",label:"Gruvbox Dark"},{key:"solarized-light",label:"Solarized Light"},{key:"latte",label:"Latte"}],_=r.map(f=>`theme-${f.key}`),o=new Set(r.map(f=>f.key));let n=!1,h="light";function N(f){o.has(f)||(f="light");const E=document.documentElement;E.classList.remove(..._),E.classList.add(`theme-${f}`),a(3,h=f);try{localStorage.setItem("theme",f)}catch{}}function d(f){N(f),a(2,n=!1)}function p(f){f.stopPropagation(),a(2,n=!n)}function u(){n&&a(2,n=!1)}function k(){let f=null;try{f=localStorage.getItem("token")}catch{}return f?{authorization:`Bearer ${f}`}:{}}async function T(){const f=await fetch("/api/auth/verify",{headers:{accept:"application/json",...k()}});if(!f.ok)return null;const E=await f.json().catch(()=>({}));return(E==null?void 0:E.user)??null}async function D(){const f=await fetch("/studio",{headers:{accept:"application/json",...k()}});if(!f.ok)return 0;const E=await f.json().catch(()=>({}));return Array.isArray(E==null?void 0:E.messages)?E.messages.length:0}async function G(){try{const f=localStorage.getItem("theme");N(o.has(f)?f:"light")}catch{N("light")}a(0,l=!0),a(1,i=await T()),t=i?await D():0,a(0,l=!1),s("authchange",{user:i,unread:t})}Q(()=>{G(),document.addEventListener("click",u)}),X(()=>{document.removeEventListener("click",u)});async function R(){try{await fetch("/api/auth/logout",{method:"POST"})}catch{}try{localStorage.removeItem("token")}catch{}a(1,i=null),t=0,s("authchange",{user:null,unread:0}),location.reload()}return[l,i,n,h,r,d,p,R,f=>d(f.key),()=>d("light"),()=>d("dark")]}class he extends W{constructor(e){super(),F(this,e,se,le,J,{})}}export{he as N};
