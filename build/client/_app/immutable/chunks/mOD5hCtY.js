import{S as W,i as F,s as J,n as U,d as p,b as y,c as C,x as m,e as b,f as N,B as D,h as S,j as g,k as L,U as K,N as Q,V as X,D as M,a as Y,J as A,W as q,g as B,t as I,F as Z,R as O}from"./C5V-7dkx.js";import{e as z}from"./DF3-wX0J.js";import"./IHki7fMi.js";import"./CqL6qkBr.js";function P(c,e,s){const n=c.slice();return n[21]=e[s],n}function $(c){let e,s="Login",n,l,o="Register",t,i,_,r="Theme ▾",a,h,x,f=c[2]&&j(c);return{c(){e=g("a"),e.textContent=s,n=L(),l=g("a"),l.textContent=o,t=L(),i=g("div"),_=g("button"),_.textContent=r,a=L(),f&&f.c(),this.h()},l(v){e=b(v,"A",{href:!0,class:!0,"data-svelte-h":!0}),D(e)!=="svelte-1ikv9w7"&&(e.textContent=s),n=S(v),l=b(v,"A",{href:!0,class:!0,"data-svelte-h":!0}),D(l)!=="svelte-8w1kkx"&&(l.textContent=o),t=S(v),i=b(v,"DIV",{class:!0});var u=N(i);_=b(u,"BUTTON",{class:!0,"data-svelte-h":!0}),D(_)!=="svelte-1tzr3f3"&&(_.textContent=r),a=S(u),f&&f.l(u),u.forEach(p),this.h()},h(){m(e,"href","/login"),m(e,"class","pill svelte-1o7ndpd"),m(l,"href","/register"),m(l,"class","pill svelte-1o7ndpd"),m(_,"class","pill svelte-1o7ndpd"),m(i,"class","dropdown svelte-1o7ndpd")},m(v,u){y(v,e,u),y(v,n,u),y(v,l,u),y(v,t,u),y(v,i,u),C(i,_),C(i,a),f&&f.m(i,null),h||(x=A(i,"click",q(c[6])),h=!0)},p(v,u){v[2]?f?f.p(v,u):(f=j(v),f.c(),f.m(i,null)):f&&(f.d(1),f=null)},d(v){v&&(p(e),p(n),p(l),p(t),p(i)),f&&f.d(),h=!1,x()}}}function ee(c){let e,s,n=c[1].email+"",l,o,t,i,_="Theme ▾",r,a,h,x="Logout",f,v,u=c[2]&&H(c);return{c(){e=g("span"),s=I("Hi, "),l=I(n),o=L(),t=g("div"),i=g("button"),i.textContent=_,r=L(),u&&u.c(),a=L(),h=g("button"),h.textContent=x,this.h()},l(k){e=b(k,"SPAN",{class:!0});var T=N(e);s=B(T,"Hi, "),l=B(T,n),T.forEach(p),o=S(k),t=b(k,"DIV",{class:!0});var w=N(t);i=b(w,"BUTTON",{class:!0,"data-svelte-h":!0}),D(i)!=="svelte-1tzr3f3"&&(i.textContent=_),r=S(w),u&&u.l(w),w.forEach(p),a=S(k),h=b(k,"BUTTON",{class:!0,"data-svelte-h":!0}),D(h)!=="svelte-4qezu6"&&(h.textContent=x),this.h()},h(){m(e,"class","hello svelte-1o7ndpd"),m(i,"class","pill svelte-1o7ndpd"),m(t,"class","dropdown svelte-1o7ndpd"),m(h,"class","pill svelte-1o7ndpd")},m(k,T){y(k,e,T),C(e,s),C(e,l),y(k,o,T),y(k,t,T),C(t,i),C(t,r),u&&u.m(t,null),y(k,a,T),y(k,h,T),f||(v=[A(t,"click",q(c[6])),A(h,"click",c[7])],f=!0)},p(k,T){T&2&&n!==(n=k[1].email+"")&&Y(l,n),k[2]?u?u.p(k,T):(u=H(k),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},d(k){k&&(p(e),p(o),p(t),p(a),p(h)),u&&u.d(),f=!1,M(v)}}}function te(c){let e,s="…";return{c(){e=g("span"),e.textContent=s,this.h()},l(n){e=b(n,"SPAN",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-9s1gh8"&&(e.textContent=s),this.h()},h(){m(e,"class","muted svelte-1o7ndpd")},m(n,l){y(n,e,l)},p:U,d(n){n&&p(e)}}}function j(c){let e,s,n="Light",l,o,t="Dark",i,_;return{c(){e=g("div"),s=g("button"),s.textContent=n,l=L(),o=g("button"),o.textContent=t,this.h()},l(r){e=b(r,"DIV",{class:!0,role:!0});var a=N(e);s=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),D(s)!=="svelte-ujii30"&&(s.textContent=n),l=S(a),o=b(a,"BUTTON",{class:!0,"data-svelte-h":!0}),D(o)!=="svelte-h1u14m"&&(o.textContent=t),a.forEach(p),this.h()},h(){m(s,"class","menu-item svelte-1o7ndpd"),m(o,"class","menu-item svelte-1o7ndpd"),m(e,"class","menu svelte-1o7ndpd"),m(e,"role","menu")},m(r,a){y(r,e,a),C(e,s),C(e,l),C(e,o),i||(_=[A(s,"click",c[9]),A(o,"click",c[10])],i=!0)},p:U,d(r){r&&p(e),i=!1,M(_)}}}function H(c){let e,s=z(c[4]),n=[];for(let l=0;l<s.length;l+=1)n[l]=V(P(c,s,l));return{c(){e=g("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=b(l,"DIV",{class:!0,role:!0});var o=N(e);for(let t=0;t<n.length;t+=1)n[t].l(o);o.forEach(p),this.h()},h(){m(e,"class","menu svelte-1o7ndpd"),m(e,"role","menu")},m(l,o){y(l,e,o);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(l,o){if(o&56){s=z(l[4]);let t;for(t=0;t<s.length;t+=1){const i=P(l,s,t);n[t]?n[t].p(i,o):(n[t]=V(i),n[t].c(),n[t].m(e,null))}for(;t<n.length;t+=1)n[t].d(1);n.length=s.length}},d(l){l&&p(e),Z(n,l)}}}function V(c){let e,s=c[21].label+"",n,l,o,t,i;function _(){return c[8](c[21])}return{c(){e=g("button"),n=I(s),l=L(),this.h()},l(r){e=b(r,"BUTTON",{class:!0});var a=N(e);n=B(a,s),l=S(a),a.forEach(p),this.h()},h(){m(e,"class",o=O("menu-item"+(c[3]===c[21].key?" active":""))+" svelte-1o7ndpd")},m(r,a){y(r,e,a),C(e,n),C(e,l),t||(i=A(e,"click",_),t=!0)},p(r,a){c=r,a&8&&o!==(o=O("menu-item"+(c[3]===c[21].key?" active":""))+" svelte-1o7ndpd")&&m(e,"class",o)},d(r){r&&p(e),t=!1,i()}}}function le(c){let e,s,n="Taleem.help",l,o,t;function i(a,h){return a[0]?te:a[1]?ee:$}let _=i(c),r=_(c);return{c(){e=g("nav"),s=g("a"),s.textContent=n,l=L(),o=g("span"),t=L(),r.c(),this.h()},l(a){e=b(a,"NAV",{class:!0});var h=N(e);s=b(h,"A",{class:!0,href:!0,"data-svelte-h":!0}),D(s)!=="svelte-19kz9hq"&&(s.textContent=n),l=S(h),o=b(h,"SPAN",{class:!0}),N(o).forEach(p),t=S(h),r.l(h),h.forEach(p),this.h()},h(){m(s,"class","brand svelte-1o7ndpd"),m(s,"href","/"),m(o,"class","spacer svelte-1o7ndpd"),m(e,"class","nav svelte-1o7ndpd")},m(a,h){y(a,e,h),C(e,s),C(e,l),C(e,o),C(e,t),r.m(e,null)},p(a,[h]){_===(_=i(a))&&r?r.p(a,h):(r.d(1),r=_(a),r&&(r.c(),r.m(e,null)))},i:U,o:U,d(a){a&&p(e),r.d()}}}function ne(c,e,s){const n=K();let l=!0,o=null,t=0;const i=[{key:"light",label:"Light (Primer)"},{key:"dark",label:"Dark (Primer)"},{key:"dracula",label:"Dracula"},{key:"nord",label:"Nord"},{key:"github-dim",label:"GitHub Dim"},{key:"gruvbox-dark",label:"Gruvbox Dark"},{key:"solarized-light",label:"Solarized Light"},{key:"latte",label:"Latte"}],_=i.map(d=>`theme-${d.key}`),r=new Set(i.map(d=>d.key));let a=!1,h="light";function x(d){r.has(d)||(d="light");const E=document.documentElement;E.classList.remove(..._),E.classList.add(`theme-${d}`),s(3,h=d);try{localStorage.setItem("theme",d)}catch{}}function f(d){x(d),s(2,a=!1)}function v(d){d.stopPropagation(),s(2,a=!a)}function u(){a&&s(2,a=!1)}function k(){let d=null;try{d=localStorage.getItem("token")}catch{}return d?{authorization:`Bearer ${d}`}:{}}async function T(){const d=await fetch("/api/auth/verify",{headers:{accept:"application/json",...k()}});if(!d.ok)return null;const E=await d.json().catch(()=>({}));return(E==null?void 0:E.user)??null}async function w(){const d=await fetch("/studio",{headers:{accept:"application/json",...k()}});if(!d.ok)return 0;const E=await d.json().catch(()=>({}));return Array.isArray(E==null?void 0:E.messages)?E.messages.length:0}async function G(){try{const d=localStorage.getItem("theme");x(r.has(d)?d:"light")}catch{x("light")}s(0,l=!0),s(1,o=await T()),t=o?await w():0,s(0,l=!1),n("authchange",{user:o,unread:t})}Q(()=>{G(),document.addEventListener("click",u)}),X(()=>{document.removeEventListener("click",u)});async function R(){try{await fetch("/api/auth/logout",{method:"POST"})}catch{}try{localStorage.removeItem("token")}catch{}s(1,o=null),t=0,n("authchange",{user:null,unread:0}),location.reload()}return[l,o,a,h,i,f,v,R,d=>f(d.key),()=>f("light"),()=>f("dark")]}class he extends W{constructor(e){super(),F(this,e,ne,le,J,{})}}export{he as N};
