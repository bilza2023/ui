
<!doctype html>
<html>
  <head>
    <script type="module" src="./ce/taleem-slides.js"></script>

    <script type="module">
        const el = document.getElementById('ts');
      
        function computeDuration(slides=[]) {
          return Math.max(0, ...slides.map(s => s.end ?? 0));
        }
      
        fetch('./demo_deck.json')
          .then(r => r.json())
          .then(raw => {
            const deck = Array.isArray(raw) ? raw : (raw.slides ?? raw.deck ?? []);
            el.deck = deck;                // property, not attribute
            el.duration = computeDuration(deck) || 100;
            el.currentTime = 0;
          })
          .catch(err => console.error('Failed to load deck:', err));
      </script>
      
    <style>taleem-slides{display:block;width:100%;height:100vh}</style>
  </head>
  <body>
    <taleem-slides id="ts" duration="100" currenttime="0"></taleem-slides>
    <script type="module">
      fetch('./some-deck.json').then(r=>r.json()).then(deck=>{
        const el = document.getElementById('ts');
        el.deck = deck;       // IMPORTANT: property, not attribute
        el.currentTime = 0;
      });
    </script>
  </body>
</html>
