{"version":3,"file":"_page.svelte-Z-ZauDYU.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, v as validate_component, d as add_attribute, f as each, e as escape } from \"../../../chunks/ssr.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../../chunks/exports.js\";\nimport \"../../../chunks/utils.js\";\nimport \"../../../chunks/state.svelte.js\";\nimport { N as Nav } from \"../../../chunks/Nav.js\";\nimport { A as AdminNav } from \"../../../chunks/AdminNav.js\";\n/* empty css                     */\nconst css = {\n  code: \"body{background:var(--backgroundColor) !important;color:var(--primaryText)}.page.svelte-18cny0n.svelte-18cny0n{padding:12px;display:flex;flex-direction:column;gap:12px}.top.svelte-18cny0n.svelte-18cny0n{display:flex;justify-content:space-between;align-items:center;background:color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor));border:1px solid var(--borderColor);border-radius:12px;padding:10px 12px;color:var(--primaryText)}.search.svelte-18cny0n.svelte-18cny0n{min-width:280px;padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:color-mix(in oklab, var(--accentColor) 8%, var(--surfaceColor));color:var(--primaryText)}select.svelte-18cny0n.svelte-18cny0n{padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:var(--surfaceColor);color:var(--primaryText)}.clear.svelte-18cny0n.svelte-18cny0n{margin-left:auto;padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:var(--surfaceColor);color:var(--primaryText);cursor:pointer}.clear.svelte-18cny0n.svelte-18cny0n:hover{border-color:color-mix(in oklab, var(--primaryColor) 40%, var(--borderColor));background:color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor))}.taleemTableWrap.svelte-18cny0n.svelte-18cny0n{max-width:none}.badge.svelte-18cny0n.svelte-18cny0n{background:color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor));color:var(--primaryText);border:1px solid var(--borderColor);border-radius:999px;font-size:12px;padding:2px 8px}.btn.svelte-18cny0n.svelte-18cny0n{padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:var(--surfaceColor);color:var(--primaryText);text-decoration:none;transition:background .15s ease, border-color .15s ease, color .15s ease, transform .12s ease}.btn.small.svelte-18cny0n.svelte-18cny0n{font-size:12px;padding:4px 8px}.btn.svelte-18cny0n.svelte-18cny0n:hover{background:color-mix(in oklab, var(--accentColor) 12%, var(--surfaceColor));border-color:color-mix(in oklab, var(--primaryColor) 40%, var(--borderColor));color:var(--primaryText);transform:translateY(-1px)}.empty.svelte-18cny0n.svelte-18cny0n{opacity:.7;padding:24px;text-align:center;color:var(--secondaryText)}.top.compact.svelte-18cny0n.svelte-18cny0n{display:flex;align-items:center;justify-content:space-between;gap:12px;background:var(--surfaceColor);border:1px solid var(--borderColor);border-radius:12px;padding:10px 12px;color:var(--primaryText)}.top.compact.svelte-18cny0n h1.svelte-18cny0n{margin:0;font-size:1.1rem;color:var(--primaryText);white-space:nowrap}.top.compact.svelte-18cny0n .controls.svelte-18cny0n{display:flex;align-items:center;gap:8px;flex-wrap:nowrap}.top.compact.svelte-18cny0n .search.svelte-18cny0n{width:min(420px, 42vw);padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:var(--surfaceColor);color:var(--primaryText)}.top.compact.svelte-18cny0n .sel.svelte-18cny0n{padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:var(--surfaceColor);color:var(--primaryText)}.top.compact.svelte-18cny0n .clear.svelte-18cny0n{padding:6px 10px;border:1px solid var(--borderColor);border-radius:8px;background:var(--surfaceColor);color:var(--primaryText);cursor:pointer}@media(max-width: 760px){.top.compact.svelte-18cny0n.svelte-18cny0n{flex-wrap:wrap;gap:10px}.top.compact.svelte-18cny0n .controls.svelte-18cny0n{width:100%;flex-wrap:wrap}.top.compact.svelte-18cny0n .search.svelte-18cny0n{width:100%}}\",\n  map: `{\"version\":3,\"file\":\"+page.svelte\",\"sources\":[\"+page.svelte\"],\"sourcesContent\":[\"<script>\\\\n  import { goto } from '$app/navigation';\\\\n  import Nav from \\\\\"$lib/appComps/Nav.svelte\\\\\";\\\\n  import AdminNav from \\\\\"../../lib/AdminNav.svelte\\\\\";\\\\n  import '$lib/styles/tables.css';\\\\n\\\\n  export let data;\\\\n\\\\n  let items      = [];\\\\n  let totals     = { all: 0, decks: 0, notes: 0 };\\\\n  let tcodeStats = {};\\\\n\\\\n  // base filter shape\\\\n  let filters = { q: '', type: null, tcode: null, limit: 200, offset: 0, sort: 'edited_desc' };\\\\n\\\\n  // locals bound to inputs\\\\n  let q = '';\\\\n  let type = null;   // 'deck' | 'note' | null\\\\n  let tcode = null;  // string | null\\\\n  let sort = 'edited_desc';\\\\n\\\\n  // ---------- hydrate from server data ----------\\\\n  $: if (data) {\\\\n    items      = data.items      ?? [];\\\\n    totals     = data.totals     ?? totals;\\\\n    tcodeStats = data.tcodeStats ?? tcodeStats;\\\\n    filters    = { ...filters, ...(data.filters ?? {}) };\\\\n\\\\n    q     = filters.q     ?? '';\\\\n    type  = (filters.type === 'deck' || filters.type === 'note') ? filters.type : null;\\\\n    tcode = filters.tcode ?? null;\\\\n    sort  = filters.sort  ?? 'edited_desc';\\\\n  }\\\\n\\\\n  $: tcodeOptions = Object.keys(tcodeStats).sort((a, b) => a.localeCompare(b));\\\\n\\\\n  // ---------- actions ----------\\\\n  function apply() {\\\\n    const p = new URLSearchParams();\\\\n    if (q)     p.set('q', q);\\\\n    if (type)  p.set('type', type);\\\\n    if (tcode) p.set('tcode', tcode);\\\\n    if (sort)  p.set('sort', sort);\\\\n    p.set('limit', String(filters.limit ?? 200));\\\\n    p.set('offset', '0');\\\\n    goto(\\`/admin?\\${p.toString()}\\`, { replaceState: true });\\\\n  }\\\\n\\\\n  function clearAll() {\\\\n    goto('/admin', { replaceState: true });\\\\n  }\\\\n\\\\n  function hrefFor(row) {\\\\n    if (row.type === 'deck') return \\`/player?filename=\\${encodeURIComponent(row.filename)}\\`;\\\\n    if (row.type === 'note') return \\`/notes?filename=\\${encodeURIComponent(row.filename)}\\`;\\\\n    return '#';\\\\n  }\\\\n\\\\n  function badge(row) {\\\\n    if (row.type === 'deck') return { label: 'Deck', bg: '#0c0535', fg: '#dcd6ff' };\\\\n    if (row.type === 'note') return { label: 'Note', bg: '#6c430b', fg: '#ffe3c4' };\\\\n    return { label: row.type ?? 'Item', bg: '#2E1C02', fg: '#e6ccb0' };\\\\n  }\\\\n<\\/script>\\\\n\\\\n<svelte:head>\\\\n  <title>Admin — Question Index</title>\\\\n</svelte:head>\\\\n\\\\n<Nav />\\\\n<AdminNav />\\\\n\\\\n\\\\n<div class=\\\\\"page\\\\\">\\\\n \\\\n  \\\\n  <header class=\\\\\"top compact\\\\\">\\\\n    <h1>Question Index</h1>\\\\n  \\\\n    <div class=\\\\\"controls\\\\\">\\\\n      <input\\\\n        class=\\\\\"search\\\\\"\\\\n        type=\\\\\"search\\\\\"\\\\n        placeholder=\\\\\"Search filename / name / desc / exercise…\\\\\"\\\\n        bind:value={q}\\\\n        on:keydown={(e)=>e.key==='Enter'&&apply()}\\\\n      />\\\\n  \\\\n      <!-- Type: All / Decks / Notes -->\\\\n      <select\\\\n        class=\\\\\"sel\\\\\"\\\\n        on:change={(e)=>{ const v=e.currentTarget.value; type = v || null; apply(); }}\\\\n      >\\\\n        <option value=\\\\\"\\\\\" selected={!type}>All</option>\\\\n        <option value=\\\\\"deck\\\\\" selected={type==='deck'}>Decks</option>\\\\n        <option value=\\\\\"note\\\\\" selected={type==='note'}>Notes</option>\\\\n      </select>\\\\n  \\\\n      <!-- Tcode: simplified (no counts) -->\\\\n      <select class=\\\\\"sel\\\\\" bind:value={tcode} on:change={apply}>\\\\n        <option value=''>All tcodes</option>\\\\n        {#each tcodeOptions as t}\\\\n          <option value={t}>{t}</option>\\\\n        {/each}\\\\n      </select>\\\\n  \\\\n      <!-- Sort -->\\\\n      <select class=\\\\\"sel\\\\\" bind:value={sort} on:change={apply}>\\\\n        <option value=\\\\\"edited_desc\\\\\">Last Edited (newest)</option>\\\\n        <option value=\\\\\"created_desc\\\\\">Created (newest)</option>\\\\n        <option value=\\\\\"name_asc\\\\\">Name (A–Z)</option>\\\\n      </select>\\\\n  \\\\n      <button class=\\\\\"clear\\\\\" on:click={clearAll}>Reset</button>\\\\n    </div>\\\\n  </header>\\\\n  \\\\n\\\\n  <section class=\\\\\"taleemTableWrap\\\\\">\\\\n    {#if items.length === 0}\\\\n      <div class=\\\\\"empty\\\\\">No items found.</div>\\\\n    {:else}\\\\n      <table class=\\\\\"taleemTable\\\\\">\\\\n        <thead>\\\\n          <tr>\\\\n            <th>Type</th>\\\\n            <th>Name / Filename</th>\\\\n            <th>Path</th>\\\\n            <th>Edited</th>\\\\n            <th>Created</th>\\\\n            <th></th>\\\\n          </tr>\\\\n        </thead>\\\\n        <tbody>\\\\n          {#each items as row}\\\\n            {@const b = badge(row)}\\\\n            <tr>\\\\n              <td class=\\\\\"type\\\\\">\\\\n                <span class=\\\\\"badge\\\\\" style={\\`--bg:\\${b.bg};--fg:\\${b.fg}\\`}>{b.label}</span>\\\\n              </td>\\\\n              <td class=\\\\\"name\\\\\">\\\\n                <div class=\\\\\"n1\\\\\">{row.name ?? row.filename}</div>\\\\n                <div class=\\\\\"n2\\\\\">{row.filename}</div>\\\\n              </td>\\\\n              <td class=\\\\\"path\\\\\">\\\\n                <div class=\\\\\"p1\\\\\">{row.tcode}</div>\\\\n                <div class=\\\\\"p2\\\\\">Ch {row.chapter} · {row.exercise}</div>\\\\n              </td>\\\\n              <td>{row.editedAt ? new Date(row.editedAt).toLocaleString() : '—'}</td>\\\\n              <td>{row.createdAt ? new Date(row.createdAt).toLocaleString() : '—'}</td>\\\\n              <td class=\\\\\"actions\\\\\">\\\\n                <a class=\\\\\"btn small\\\\\" href={hrefFor(row)} target=\\\\\"_blank\\\\\" rel=\\\\\"noopener\\\\\">Open</a>\\\\n                <a class=\\\\\"btn small\\\\\" href=\\\\\"/admin/editor?filename={row.filename}\\\\\" target=\\\\\"_blank\\\\\" rel=\\\\\"noopener\\\\\">Editor</a>\\\\n                <a class=\\\\\"btn small\\\\\" href=\\\\\"/admin/delete?filename={row.filename}\\\\\" target=\\\\\"_blank\\\\\" rel=\\\\\"noopener\\\\\">Delete</a>\\\\n              </td>\\\\n            </tr>\\\\n          {/each}\\\\n        </tbody>\\\\n      </table>\\\\n    {/if}\\\\n  </section>\\\\n</div>\\\\n<style>\\\\n  /* Page theme */\\\\n  :global(body){ background: var(--backgroundColor) !important; color: var(--primaryText); }\\\\n\\\\n  .page{ padding:12px; display:flex; flex-direction:column; gap:12px; }\\\\n\\\\n  /* Header (legacy .top block) */\\\\n  .top{\\\\n    display:flex; justify-content:space-between; align-items:center;\\\\n    background: color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor));\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:12px; padding:10px 12px;\\\\n    color: var(--primaryText);\\\\n  }\\\\n  .left h1{ margin:0; font-size:1.1rem; color: var(--primaryText); }\\\\n  .totals{ display:flex; gap:8px; margin-top:6px; }\\\\n  .pill{\\\\n    background: color-mix(in oklab, var(--accentColor) 12%, var(--surfaceColor));\\\\n    color: var(--primaryText);\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:999px; padding:2px 8px; font-size:12px;\\\\n  }\\\\n  .pill.decks{ background: color-mix(in oklab, var(--primaryColor) 16%, var(--surfaceColor)); color: var(--backgroundColor); }\\\\n  .pill.notes{ background: color-mix(in oklab, var(--secondaryColor) 16%, var(--surfaceColor)); color: var(--backgroundColor); }\\\\n\\\\n  /* Filters */\\\\n  .filters{\\\\n    display:flex; gap:10px; align-items:center; flex-wrap:wrap;\\\\n    background: var(--surfaceColor);\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:12px; padding:10px;\\\\n    color: var(--secondaryText);\\\\n  }\\\\n  .search{\\\\n    min-width:280px; padding:6px 10px;\\\\n    border:1px solid var(--borderColor); border-radius:8px;\\\\n    background: color-mix(in oklab, var(--accentColor) 8%, var(--surfaceColor));\\\\n    color: var(--primaryText);\\\\n  }\\\\n  .group{ display:flex; align-items:center; gap:8px; color: var(--secondaryText); }\\\\n  .seg{ display:flex; gap:6px; }\\\\n  .seg button{\\\\n    padding:4px 10px; border:1px solid var(--borderColor); border-radius:8px;\\\\n    background: var(--surfaceColor); color: var(--primaryText); cursor:pointer;\\\\n    transition: background .15s ease, border-color .15s ease, color .15s ease;\\\\n  }\\\\n  .seg button:hover{\\\\n    border-color: color-mix(in oklab, var(--primaryColor) 40%, var(--borderColor));\\\\n    background: color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor));\\\\n  }\\\\n  .seg button.active{\\\\n    background: var(--primaryColor); border-color: var(--primaryColor);\\\\n    color: var(--backgroundColor);\\\\n  }\\\\n  select{\\\\n    padding:6px 10px; border:1px solid var(--borderColor); border-radius:8px;\\\\n    background: var(--surfaceColor); color: var(--primaryText);\\\\n  }\\\\n  .clear{\\\\n    margin-left:auto; padding:6px 10px; border:1px solid var(--borderColor); border-radius:8px;\\\\n    background: var(--surfaceColor); color: var(--primaryText); cursor:pointer;\\\\n  }\\\\n  .clear:hover{\\\\n    border-color: color-mix(in oklab, var(--primaryColor) 40%, var(--borderColor));\\\\n    background: color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor));\\\\n  }\\\\n\\\\n  /* Local override to make this table full-width */\\\\n  .taleemTableWrap{ max-width:none; }\\\\n\\\\n  /* Elements not covered by shared table CSS */\\\\n  .badge{\\\\n    background: color-mix(in oklab, var(--accentColor) 10%, var(--surfaceColor));\\\\n    color: var(--primaryText);\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:999px;\\\\n    font-size:12px;\\\\n    padding:2px 8px;\\\\n  }\\\\n\\\\n  .btn{\\\\n    padding:6px 10px;\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:8px;\\\\n    background: var(--surfaceColor);\\\\n    color: var(--primaryText);\\\\n    text-decoration:none;\\\\n    transition: background .15s ease, border-color .15s ease, color .15s ease, transform .12s ease;\\\\n  }\\\\n  .btn.small{ font-size:12px; padding:4px 8px; }\\\\n  .btn:hover{\\\\n    background: color-mix(in oklab, var(--accentColor) 12%, var(--surfaceColor));\\\\n    border-color: color-mix(in oklab, var(--primaryColor) 40%, var(--borderColor));\\\\n    color: var(--primaryText);\\\\n    transform: translateY(-1px);\\\\n  }\\\\n\\\\n  .empty{ opacity:.7; padding:24px; text-align:center; color: var(--secondaryText); }\\\\n\\\\n  /* Single-line toolbar */\\\\n  .top.compact{\\\\n    display:flex; align-items:center; justify-content:space-between; gap:12px;\\\\n    background: var(--surfaceColor);\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:12px;\\\\n    padding:10px 12px;\\\\n    color: var(--primaryText);\\\\n  }\\\\n  .top.compact h1{\\\\n    margin:0; font-size:1.1rem; color: var(--primaryText); white-space:nowrap;\\\\n  }\\\\n  .top.compact .controls{\\\\n    display:flex; align-items:center; gap:8px; flex-wrap:nowrap;\\\\n  }\\\\n  .top.compact .search{\\\\n    width:min(420px, 42vw);\\\\n    padding:6px 10px;\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:8px;\\\\n    background: var(--surfaceColor);\\\\n    color: var(--primaryText);\\\\n  }\\\\n  .top.compact .sel{\\\\n    padding:6px 10px;\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:8px;\\\\n    background: var(--surfaceColor);\\\\n    color: var(--primaryText);\\\\n  }\\\\n  .top.compact .clear{\\\\n    padding:6px 10px;\\\\n    border:1px solid var(--borderColor);\\\\n    border-radius:8px;\\\\n    background: var(--surfaceColor);\\\\n    color: var(--primaryText);\\\\n    cursor:pointer;\\\\n  }\\\\n\\\\n  /* Make it wrap gracefully on small screens */\\\\n  @media (max-width: 760px){\\\\n    .top.compact{ flex-wrap:wrap; gap:10px; }\\\\n    .top.compact .controls{ width:100%; flex-wrap:wrap; }\\\\n    .top.compact .search{ width:100%; }\\\\n  }\\\\n</style>\\\\n\"],\"names\":[],\"mappings\":\"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\"}`\n};\nfunction hrefFor(row) {\n  if (row.type === \"deck\") return `/player?filename=${encodeURIComponent(row.filename)}`;\n  if (row.type === \"note\") return `/notes?filename=${encodeURIComponent(row.filename)}`;\n  return \"#\";\n}\nfunction badge(row) {\n  if (row.type === \"deck\") return {\n    label: \"Deck\",\n    bg: \"#0c0535\",\n    fg: \"#dcd6ff\"\n  };\n  if (row.type === \"note\") return {\n    label: \"Note\",\n    bg: \"#6c430b\",\n    fg: \"#ffe3c4\"\n  };\n  return {\n    label: row.type ?? \"Item\",\n    bg: \"#2E1C02\",\n    fg: \"#e6ccb0\"\n  };\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let tcodeOptions;\n  let { data } = $$props;\n  let items = [];\n  let totals = { all: 0, decks: 0, notes: 0 };\n  let tcodeStats = {};\n  let filters = {\n    q: \"\",\n    type: null,\n    tcode: null,\n    limit: 200,\n    offset: 0,\n    sort: \"edited_desc\"\n  };\n  let q = \"\";\n  let type = null;\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);\n  $$result.css.add(css);\n  {\n    if (data) {\n      items = data.items ?? [];\n      totals = data.totals ?? totals;\n      tcodeStats = data.tcodeStats ?? tcodeStats;\n      filters = { ...filters, ...data.filters ?? {} };\n      q = filters.q ?? \"\";\n      type = filters.type === \"deck\" || filters.type === \"note\" ? filters.type : null;\n      filters.tcode ?? null;\n      filters.sort ?? \"edited_desc\";\n    }\n  }\n  tcodeOptions = Object.keys(tcodeStats).sort((a, b) => a.localeCompare(b));\n  return `${$$result.head += `<!-- HEAD_svelte-19gpdzi_START -->${$$result.title = `<title>Admin — Question Index</title>`, \"\"}<!-- HEAD_svelte-19gpdzi_END -->`, \"\"} ${validate_component(Nav, \"Nav\").$$render($$result, {}, {}, {})} ${validate_component(AdminNav, \"AdminNav\").$$render($$result, {}, {}, {})} <div class=\"page svelte-18cny0n\"><header class=\"top compact svelte-18cny0n\"><h1 class=\"svelte-18cny0n\" data-svelte-h=\"svelte-a4tuxo\">Question Index</h1> <div class=\"controls svelte-18cny0n\"><input class=\"search svelte-18cny0n\" type=\"search\" placeholder=\"Search filename / name / desc / exercise…\"${add_attribute(\"value\", q, 0)}>  <select class=\"sel svelte-18cny0n\"><option value=\"\" ${!type ? \"selected\" : \"\"}>All</option><option value=\"deck\" ${type === \"deck\" ? \"selected\" : \"\"}>Decks</option><option value=\"note\" ${type === \"note\" ? \"selected\" : \"\"}>Notes</option></select>  <select class=\"sel svelte-18cny0n\"><option value=\"\" data-svelte-h=\"svelte-1exhdx9\">All tcodes</option>${each(tcodeOptions, (t) => {\n    return `<option${add_attribute(\"value\", t, 0)}>${escape(t)}</option>`;\n  })}</select>  <select class=\"sel svelte-18cny0n\"><option value=\"edited_desc\" data-svelte-h=\"svelte-10puezt\">Last Edited (newest)</option><option value=\"created_desc\" data-svelte-h=\"svelte-g65bl\">Created (newest)</option><option value=\"name_asc\" data-svelte-h=\"svelte-1tau8uj\">Name (A–Z)</option></select> <button class=\"clear svelte-18cny0n\" data-svelte-h=\"svelte-131kcaj\">Reset</button></div></header> <section class=\"taleemTableWrap svelte-18cny0n\">${items.length === 0 ? `<div class=\"empty svelte-18cny0n\" data-svelte-h=\"svelte-j7wzyv\">No items found.</div>` : `<table class=\"taleemTable\"><thead data-svelte-h=\"svelte-wtqvz6\"><tr><th>Type</th> <th>Name / Filename</th> <th>Path</th> <th>Edited</th> <th>Created</th> <th></th></tr></thead> <tbody>${each(items, (row) => {\n    let b = badge(row);\n    return ` <tr><td class=\"type\"><span class=\"badge svelte-18cny0n\"${add_attribute(\"style\", `--bg:${b.bg};--fg:${b.fg}`, 0)}>${escape(b.label)}</span></td> <td class=\"name\"><div class=\"n1\">${escape(row.name ?? row.filename)}</div> <div class=\"n2\">${escape(row.filename)}</div></td> <td class=\"path\"><div class=\"p1\">${escape(row.tcode)}</div> <div class=\"p2\">Ch ${escape(row.chapter)} · ${escape(row.exercise)}</div></td> <td>${escape(row.editedAt ? new Date(row.editedAt).toLocaleString() : \"—\")}</td> <td>${escape(row.createdAt ? new Date(row.createdAt).toLocaleString() : \"—\")}</td> <td class=\"actions\"><a class=\"btn small svelte-18cny0n\"${add_attribute(\"href\", hrefFor(row), 0)} target=\"_blank\" rel=\"noopener\">Open</a> <a class=\"btn small svelte-18cny0n\" href=\"${\"/admin/editor?filename=\" + escape(row.filename, true)}\" target=\"_blank\" rel=\"noopener\">Editor</a> <a class=\"btn small svelte-18cny0n\" href=\"${\"/admin/delete?filename=\" + escape(row.filename, true)}\" target=\"_blank\" rel=\"noopener\">Delete</a></td> </tr>`;\n  })}</tbody></table>`}</section> </div>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}