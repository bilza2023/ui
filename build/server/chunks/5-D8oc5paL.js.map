{"version":3,"file":"5-D8oc5paL.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/_page.server.js","../../../.svelte-kit/adapter-node/nodes/5.js"],"sourcesContent":["import { p as prisma } from \"../../../chunks/prisma.js\";\nconst prerender = false;\nasync function load({ url }) {\n  const q = (url.searchParams.get(\"q\") || \"\").trim();\n  const type = url.searchParams.get(\"type\");\n  const tcode = url.searchParams.get(\"tcode\") || null;\n  const limit = Math.min(parseInt(url.searchParams.get(\"limit\") || \"200\", 10), 500);\n  const offset = Math.max(parseInt(url.searchParams.get(\"offset\") || \"0\", 10), 0);\n  const sort = url.searchParams.get(\"sort\") || \"edited_desc\";\n  const where = {};\n  if (type === \"deck\" || type === \"note\") where.type = type;\n  if (tcode) where.tcode = tcode;\n  if (q) {\n    where.OR = [\n      { filename: { contains: q, mode: \"insensitive\" } },\n      { name: { contains: q, mode: \"insensitive\" } },\n      { description: { contains: q, mode: \"insensitive\" } },\n      { exercise: { contains: q, mode: \"insensitive\" } }\n    ];\n  }\n  let orderBy;\n  if (sort === \"created_desc\") orderBy = [{ createdAt: \"desc\" }];\n  else if (sort === \"name_asc\") orderBy = [{ name: \"asc\" }, { filename: \"asc\" }];\n  else orderBy = [{ editedAt: \"desc\" }];\n  const items = await prisma.question.findMany({\n    where,\n    orderBy,\n    skip: offset,\n    take: limit,\n    select: {\n      filename: true,\n      type: true,\n      name: true,\n      description: true,\n      status: true,\n      tags: true,\n      timed: true,\n      tcode: true,\n      chapter: true,\n      exercise: true,\n      editedAt: true,\n      createdAt: true\n    }\n  });\n  const [totalAll, totalDecks, totalNotes] = await Promise.all([\n    prisma.question.count(),\n    prisma.question.count({ where: { type: \"deck\" } }),\n    prisma.question.count({ where: { type: \"note\" } })\n  ]);\n  const tcodeRows = await prisma.question.groupBy({\n    by: [\"tcode\", \"type\"],\n    _count: { _all: true }\n  }).catch(() => []);\n  const tcodeStats = {};\n  for (const r of tcodeRows) {\n    if (!r.tcode) continue;\n    tcodeStats[r.tcode] ??= { total: 0, deck: 0, note: 0 };\n    tcodeStats[r.tcode].total += r._count._all;\n    if (r.type === \"deck\") tcodeStats[r.tcode].deck += r._count._all;\n    if (r.type === \"note\") tcodeStats[r.tcode].note += r._count._all;\n  }\n  return {\n    items,\n    filters: { q, type: type === \"deck\" || type === \"note\" ? type : null, tcode, limit, offset, sort },\n    totals: { all: totalAll, decks: totalDecks, notes: totalNotes },\n    tcodeStats\n  };\n}\nexport {\n  load,\n  prerender\n};\n","import * as server from '../entries/pages/admin/_page.server.js';\n\nexport const index = 5;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/admin/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/admin/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/5.Dy8EK5SS.js\",\"_app/immutable/chunks/Z9DZtfMg.js\",\"_app/immutable/chunks/DtyEnmTo.js\",\"_app/immutable/chunks/IHki7fMi.js\",\"_app/immutable/chunks/29W-Tj8B.js\",\"_app/immutable/chunks/BXF6U4GO.js\",\"_app/immutable/chunks/BItVA5Ku.js\",\"_app/immutable/chunks/-hQ6QV1S.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Nav.DvKJZNZc.css\",\"_app/immutable/assets/AdminNav.kezn9mMg.css\",\"_app/immutable/assets/5.Dp9Y15_m.css\",\"_app/immutable/assets/tables.B1wubMX-.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}