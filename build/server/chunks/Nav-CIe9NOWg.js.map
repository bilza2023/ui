{"version":3,"file":"Nav-CIe9NOWg.js","sources":["../../../.svelte-kit/adapter-node/chunks/Nav.js"],"sourcesContent":["import { c as create_ssr_component, j as createEventDispatcher, o as onDestroy } from \"./ssr.js\";\nimport \"@sveltejs/kit/internal\";\nimport \"./exports.js\";\nimport \"./utils.js\";\nimport \"./state.svelte.js\";\nconst css = {\n  code: \".nav.svelte-e0448a{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--surfaceColor);color:var(--primaryText);border-bottom:1px solid var(--borderColor)}.brand.svelte-e0448a{font-weight:800;letter-spacing:.3px;color:var(--accentColor);text-decoration:none;margin-right:6px}.link.svelte-e0448a{color:inherit;text-decoration:none;padding:6px 8px;border-radius:8px}.link.svelte-e0448a:hover{background:color-mix(in oklab, var(--primaryText) 8%, var(--surfaceColor))}.spacer.svelte-e0448a{flex:1}.muted.svelte-e0448a{opacity:0.7}.hello.svelte-e0448a{opacity:0.9;margin-right:4px}.pill.svelte-e0448a{padding:6px 10px;border-radius:999px;border:1px solid var(--borderColor);background:transparent;color:inherit;text-decoration:none;cursor:pointer}.pill.svelte-e0448a:hover{background:color-mix(in oklab, var(--primaryText) 8%, var(--surfaceColor))}.badge.svelte-e0448a{margin-left:6px;padding:0 6px;border-radius:999px;background:var(--accentColor);color:var(--backgroundColor);font-weight:700}.dropdown.svelte-e0448a{position:relative}.menu.svelte-e0448a{position:absolute;right:0;top:calc(100% + 6px);min-width:140px;background:var(--surfaceColor);color:var(--primaryText);border:1px solid var(--borderColor);border-radius:10px;box-shadow:0 1px 1px rgba(0,0,0,.04),\\n      0 8px 22px rgba(0,0,0,.12);padding:6px;z-index:50}.menu-item.svelte-e0448a{font-size:0.75rem;width:100%;text-align:left;background:transparent;border:0;padding:8px 10px;border-radius:8px;cursor:pointer;color:inherit}.menu-item.svelte-e0448a:hover{background:color-mix(in oklab, var(--primaryColor) 14%, var(--surfaceColor))}\",\n  map: `{\"version\":3,\"file\":\"Nav.svelte\",\"sources\":[\"Nav.svelte\"],\"sourcesContent\":[\"<script>\\\\n  // @ts-nocheck\\\\n  import NavBtn from './NavBtn.svelte';\\\\n  import NavBtn2 from './NavBtn2.svelte';\\\\n  import Logo from './Logo.svelte';\\\\n  import { goto } from '$app/navigation';\\\\n  import { onMount, onDestroy, createEventDispatcher } from 'svelte';\\\\n  import { browser } from '$app/environment';   // ✅ SSR guard\\\\n\\\\n \\\\n  const dispatch = createEventDispatcher();\\\\n\\\\n  let loading = true;\\\\n  let user = null;\\\\n  let unread = 0;\\\\n\\\\n  // --- THEMES (keys must match your .theme-* class suffixes) ---\\\\n  const THEMES = [\\\\n    { key: 'light',            label: 'Light (Primer)' },\\\\n    { key: 'dark',             label: 'Dark (Primer)' },\\\\n    { key: 'dracula',          label: 'Dracula' },\\\\n    { key: 'nord',             label: 'Nord' },\\\\n    { key: 'github-dim',       label: 'GitHub Dim' },\\\\n    { key: 'gruvbox-dark',     label: 'Gruvbox Dark' },\\\\n    { key: 'solarized-light',  label: 'Solarized Light' },\\\\n    { key: 'latte',            label: 'Latte' },\\\\n  ];\\\\n  const ALL_THEME_CLASSES = THEMES.map(t => \\`theme-\\${t.key}\\`);\\\\n  const ALLOWED = new Set(THEMES.map(t => t.key));\\\\n\\\\n  let showThemeMenu = false;\\\\n  let currentTheme = 'light';\\\\n\\\\n  function setTheme(theme) {\\\\n    if (!browser) return;\\\\n    if (!ALLOWED.has(theme)) theme = 'light';\\\\n    const root = document.documentElement;\\\\n    root.classList.remove(...ALL_THEME_CLASSES);   // ✅ remove ANY previously set theme\\\\n    root.classList.add(\\`theme-\\${theme}\\`);\\\\n    currentTheme = theme;\\\\n    try { localStorage.setItem('theme', theme); } catch {}\\\\n  }\\\\n  function selectTheme(theme) {\\\\n    setTheme(theme);\\\\n    showThemeMenu = false;\\\\n  }\\\\n  function toggleThemeMenu(e) {\\\\n    e.stopPropagation();\\\\n    showThemeMenu = !showThemeMenu;\\\\n  }\\\\n  function handleDocClick() {\\\\n    if (showThemeMenu) showThemeMenu = false;\\\\n  }\\\\n\\\\n  function authHeaders() {\\\\n    if (!browser) return {};\\\\n    let t = null;\\\\n    try { t = localStorage.getItem('token'); } catch {}\\\\n    return t ? { authorization: \\`Bearer \\${t}\\` } : {};\\\\n  }\\\\n\\\\n  async function verifyUser() {\\\\n    const res = await fetch('/api/auth/verify', {\\\\n      headers: { accept: 'application/json', ...authHeaders() }\\\\n    });\\\\n    if (!res.ok) return null;\\\\n    const data = await res.json().catch(() => ({}));\\\\n    return data?.user ?? null;\\\\n  }\\\\n\\\\n  async function fetchUnread() {\\\\n    const r = await fetch('/studio', {\\\\n      headers: { accept: 'application/json', ...authHeaders() }\\\\n    });\\\\n    if (!r.ok) return 0;\\\\n    const d = await r.json().catch(() => ({}));\\\\n    return Array.isArray(d?.messages) ? d.messages.length : 0;\\\\n  }\\\\n\\\\n  async function init() {\\\\n    if (!browser) return;\\\\n    try {\\\\n      const saved = localStorage.getItem('theme');\\\\n      setTheme(ALLOWED.has(saved) ? saved : 'light');   // ✅ restore any theme\\\\n    } catch { setTheme('light'); }\\\\n    loading = true;\\\\n    user = await verifyUser();\\\\n    unread = user ? await fetchUnread() : 0;\\\\n    loading = false;\\\\n    dispatch('authchange', { user, unread });\\\\n  }\\\\n\\\\n  onMount(() => {\\\\n    init();\\\\n    if (browser) document.addEventListener('click', handleDocClick);\\\\n  });\\\\n\\\\n  onDestroy(() => {\\\\n    if (browser) document.removeEventListener('click', handleDocClick);\\\\n  });\\\\n\\\\n  async function logout() {\\\\n    try { await fetch('/api/auth/logout', { method: 'POST' }); } catch {}\\\\n    if (browser) {\\\\n      try { localStorage.removeItem('token'); } catch {}\\\\n    }\\\\n    user = null; unread = 0;\\\\n    dispatch('authchange', { user: null, unread: 0 });\\\\n    location.reload();\\\\n  }\\\\n<\\/script>\\\\n\\\\n\\\\n<nav class=\\\\\"nav\\\\\">\\\\n  <a class=\\\\\"brand\\\\\" href=\\\\\"/\\\\\">Taleem.help</a>\\\\n\\\\n  <!-- <a href=\\\\\"/studio\\\\\" class=\\\\\"link\\\\\">\\\\n    Studio {#if user && unread > 0}<span class=\\\\\"badge\\\\\">{unread}</span>{/if}\\\\n  </a> -->\\\\n\\\\n  <span class=\\\\\"spacer\\\\\" />\\\\n\\\\n  {#if loading}\\\\n    <span class=\\\\\"muted\\\\\">…</span>\\\\n  {:else if user}\\\\n    <span class=\\\\\"hello\\\\\">Hi, {user.email}</span>\\\\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\\\\n    <!-- svelte-ignore a11y-no-static-element-interactions -->\\\\n    <div class=\\\\\"dropdown\\\\\" on:click|stopPropagation={toggleThemeMenu}>\\\\n      <button class=\\\\\"pill\\\\\">Theme ▾</button>\\\\n      {#if showThemeMenu}\\\\n        <div class=\\\\\"menu\\\\\" role=\\\\\"menu\\\\\">\\\\n          {#each THEMES as t}\\\\n            <button\\\\n              class={\\\\\"menu-item\\\\\" + (currentTheme === t.key ? \\\\\" active\\\\\" : \\\\\"\\\\\")}\\\\n              on:click={() => selectTheme(t.key)}\\\\n            >\\\\n              {t.label}\\\\n            </button>\\\\n          {/each}\\\\n        </div>\\\\n      {/if}\\\\n    </div>\\\\n    \\\\n    <button class=\\\\\"pill\\\\\" on:click={logout}>Logout</button>\\\\n  {:else}\\\\n    <a href=\\\\\"/login\\\\\" class=\\\\\"pill\\\\\">Login</a>\\\\n    <a href=\\\\\"/register\\\\\" class=\\\\\"pill\\\\\">Register</a>\\\\n\\\\n    <div class=\\\\\"dropdown\\\\\" on:click|stopPropagation={toggleThemeMenu}>\\\\n      <button class=\\\\\"pill\\\\\">Theme ▾</button>\\\\n      {#if showThemeMenu}\\\\n        <div class=\\\\\"menu\\\\\" role=\\\\\"menu\\\\\">\\\\n          <button class=\\\\\"menu-item\\\\\" on:click={() => selectTheme('light')}>Light</button>\\\\n          <button class=\\\\\"menu-item\\\\\" on:click={() => selectTheme('dark')}>Dark</button>\\\\n        </div>\\\\n      {/if}\\\\n    </div>\\\\n  {/if}\\\\n</nav>\\\\n\\\\n<style>\\\\n  /* NAV WRAPPER */\\\\n  .nav {\\\\n    display: flex;\\\\n    align-items: center;\\\\n    gap: 10px;\\\\n    padding: 10px 12px;\\\\n\\\\n    \\\\n    background: var(--surfaceColor);\\\\n    color: var(--primaryText);\\\\n    border-bottom: 1px solid var(--borderColor);\\\\n  }\\\\n\\\\n  /* BRAND */\\\\n  .brand {\\\\n    font-weight: 800;\\\\n    letter-spacing: .3px;\\\\n    color: var(--accentColor);\\\\n    text-decoration: none;\\\\n    margin-right: 6px;\\\\n  }\\\\n\\\\n  /* LINKS */\\\\n  .link {\\\\n    color: inherit;\\\\n    text-decoration: none;\\\\n    padding: 6px 8px;\\\\n    border-radius: 8px;\\\\n  }\\\\n  .link:hover {\\\\n    background: color-mix(in oklab, var(--primaryText) 8%, var(--surfaceColor));\\\\n  }\\\\n\\\\n  .spacer { flex: 1; }\\\\n  .muted { opacity: 0.7; }\\\\n  .hello { opacity: 0.9; margin-right: 4px; }\\\\n\\\\n  /* BUTTONS / PILLS */\\\\n  .pill {\\\\n    padding: 6px 10px;\\\\n    border-radius: 999px;\\\\n    border: 1px solid var(--borderColor);\\\\n    background: transparent;\\\\n    color: inherit;\\\\n    text-decoration: none;\\\\n    cursor: pointer;\\\\n  }\\\\n  .pill:hover {\\\\n    background: color-mix(in oklab, var(--primaryText) 8%, var(--surfaceColor));\\\\n  }\\\\n\\\\n  /* BADGE */\\\\n  .badge {\\\\n    margin-left: 6px;\\\\n    padding: 0 6px;\\\\n    border-radius: 999px;\\\\n    background: var(--accentColor);\\\\n    color: var(--backgroundColor);\\\\n    font-weight: 700;\\\\n  }\\\\n\\\\n  /* DROPDOWN */\\\\n  .dropdown {\\\\n    position: relative;\\\\n  }\\\\n  .menu {\\\\n    position: absolute;\\\\n    right: 0;\\\\n    top: calc(100% + 6px);\\\\n    min-width: 140px;\\\\n\\\\n    background: var(--surfaceColor);\\\\n    color: var(--primaryText);\\\\n    border: 1px solid var(--borderColor);\\\\n    border-radius: 10px;\\\\n    box-shadow:\\\\n      0 1px 1px rgba(0,0,0,.04),\\\\n      0 8px 22px rgba(0,0,0,.12);\\\\n    padding: 6px;\\\\n    z-index: 50;\\\\n  }\\\\n  .menu-item {\\\\n    font-size: 0.75rem;\\\\n    width: 100%;\\\\n    text-align: left;\\\\n    background: transparent;\\\\n    border: 0;\\\\n    padding: 8px 10px;\\\\n    border-radius: 8px;\\\\n    cursor: pointer;\\\\n    color: inherit;\\\\n  }\\\\n  .menu-item:hover {\\\\n    background: color-mix(in oklab, var(--primaryColor) 14%, var(--surfaceColor));\\\\n  }\\\\n</style>\\\\n\"],\"names\":[],\"mappings\":\"AAmKE,kBAAK,CACH,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,IAAI,CACT,OAAO,CAAE,IAAI,CAAC,IAAI,CAGlB,UAAU,CAAE,IAAI,cAAc,CAAC,CAC/B,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAC5C,CAGA,oBAAO,CACL,WAAW,CAAE,GAAG,CAChB,cAAc,CAAE,IAAI,CACpB,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,eAAe,CAAE,IAAI,CACrB,YAAY,CAAE,GAChB,CAGA,mBAAM,CACJ,KAAK,CAAE,OAAO,CACd,eAAe,CAAE,IAAI,CACrB,OAAO,CAAE,GAAG,CAAC,GAAG,CAChB,aAAa,CAAE,GACjB,CACA,mBAAK,MAAO,CACV,UAAU,CAAE,UAAU,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,cAAc,CAAC,CAC5E,CAEA,qBAAQ,CAAE,IAAI,CAAE,CAAG,CACnB,oBAAO,CAAE,OAAO,CAAE,GAAK,CACvB,oBAAO,CAAE,OAAO,CAAE,GAAG,CAAE,YAAY,CAAE,GAAK,CAG1C,mBAAM,CACJ,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,aAAa,CAAE,KAAK,CACpB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,UAAU,CAAE,WAAW,CACvB,KAAK,CAAE,OAAO,CACd,eAAe,CAAE,IAAI,CACrB,MAAM,CAAE,OACV,CACA,mBAAK,MAAO,CACV,UAAU,CAAE,UAAU,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,cAAc,CAAC,CAC5E,CAGA,oBAAO,CACL,WAAW,CAAE,GAAG,CAChB,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,aAAa,CAAE,KAAK,CACpB,UAAU,CAAE,IAAI,aAAa,CAAC,CAC9B,KAAK,CAAE,IAAI,iBAAiB,CAAC,CAC7B,WAAW,CAAE,GACf,CAGA,uBAAU,CACR,QAAQ,CAAE,QACZ,CACA,mBAAM,CACJ,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CACrB,SAAS,CAAE,KAAK,CAEhB,UAAU,CAAE,IAAI,cAAc,CAAC,CAC/B,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,aAAa,CAAC,CACpC,aAAa,CAAE,IAAI,CACnB,UAAU,CACR,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AAC/B,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAC5B,OAAO,CAAE,GAAG,CACZ,OAAO,CAAE,EACX,CACA,wBAAW,CACT,SAAS,CAAE,OAAO,CAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,CAAC,CACT,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,CACf,KAAK,CAAE,OACT,CACA,wBAAU,MAAO,CACf,UAAU,CAAE,UAAU,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,cAAc,CAAC,CAC9E\"}`\n};\nconst Nav = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  createEventDispatcher();\n  const THEMES = [\n    { key: \"light\", label: \"Light (Primer)\" },\n    { key: \"dark\", label: \"Dark (Primer)\" },\n    { key: \"dracula\", label: \"Dracula\" },\n    { key: \"nord\", label: \"Nord\" },\n    { key: \"github-dim\", label: \"GitHub Dim\" },\n    {\n      key: \"gruvbox-dark\",\n      label: \"Gruvbox Dark\"\n    },\n    {\n      key: \"solarized-light\",\n      label: \"Solarized Light\"\n    },\n    { key: \"latte\", label: \"Latte\" }\n  ];\n  THEMES.map((t) => `theme-${t.key}`);\n  new Set(THEMES.map((t) => t.key));\n  onDestroy(() => {\n  });\n  $$result.css.add(css);\n  return `<nav class=\"nav svelte-e0448a\"><a class=\"brand svelte-e0448a\" href=\"/\" data-svelte-h=\"svelte-19kz9hq\">Taleem.help</a>  <span class=\"spacer svelte-e0448a\"></span> ${`<span class=\"muted svelte-e0448a\" data-svelte-h=\"svelte-9s1gh8\">…</span>`} </nav>`;\n});\nexport {\n  Nav as N\n};\n"],"names":[],"mappings":";;;;AAKA,MAAM,GAAG,GAAG;AACZ,EAAE,IAAI,EAAE,mlDAAmlD;AAC3lD,EAAE,GAAG,EAAE,CAAC,65SAA65S;AACr6S,CAAC;AACI,MAAC,GAAG,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AAC3E,EAAE,qBAAqB,EAAE;AACzB,EAAE,MAAM,MAAM,GAAG;AACjB,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE;AAC7C,IAAI,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,eAAe,EAAE;AAC3C,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE;AACxC,IAAI,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE;AAClC,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,KAAK,EAAE,YAAY,EAAE;AAC9C,IAAI;AACJ,MAAM,GAAG,EAAE,cAAc;AACzB,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI;AACJ,MAAM,GAAG,EAAE,iBAAiB;AAC5B,MAAM,KAAK,EAAE;AACb,KAAK;AACL,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO;AAClC,GAAG;AACH,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACrC,EAAE,IAAI,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;AACnC,EAAE,SAAS,CAAC,MAAM;AAClB,EAAE,CAAC,CAAC;AACJ,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AACvB,EAAE,OAAO,CAAC,kKAAkK,EAAE,CAAC,wEAAwE,CAAC,CAAC,OAAO,CAAC;AACjQ,CAAC;;;;"}