{"version":3,"file":"8--AMFTOTG.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/settings/_page.server.js","../../../.svelte-kit/adapter-node/nodes/8.js"],"sourcesContent":["import { fail } from \"@sveltejs/kit\";\nimport { s as setSetting } from \"../../../../chunks/AppServices.js\";\nconst ALLOWED_KEYS = /* @__PURE__ */ new Set([\"index_data\", \"blog_index\"]);\nconst actions = {\n  default: async ({ request }) => {\n    const data = await request.formData();\n    const targetKeyRaw = data.get(\"target_key\") ?? \"index_data\";\n    const target_key = String(targetKeyRaw);\n    if (!ALLOWED_KEYS.has(target_key)) {\n      return fail(400, { ok: false, error: `Key \"${target_key}\" is not allowed.` });\n    }\n    const file = data.get(\"index_json\");\n    if (!file || typeof file.text !== \"function\") {\n      return fail(400, { ok: false, error: \"No file received\" });\n    }\n    let text;\n    try {\n      text = await file.text();\n    } catch {\n      return fail(400, { ok: false, error: \"Unable to read file\" });\n    }\n    let json;\n    try {\n      json = JSON.parse(text);\n    } catch {\n      return fail(400, { ok: false, error: \"Invalid JSON\" });\n    }\n    if (!Array.isArray(json)) {\n      return fail(400, {\n        ok: false,\n        error: \"Expected a JSON array (your file is not an array).\"\n      });\n    }\n    await setSetting(target_key, json);\n    return { ok: true, key: target_key, count: json.length };\n  }\n};\nexport {\n  actions\n};\n","import * as server from '../entries/pages/admin/settings/_page.server.js';\n\nexport const index = 8;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/admin/settings/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/admin/settings/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/8.mG1_QcST.js\",\"_app/immutable/chunks/C5V-7dkx.js\",\"_app/immutable/chunks/DF3-wX0J.js\",\"_app/immutable/chunks/IHki7fMi.js\",\"_app/immutable/chunks/mOD5hCtY.js\",\"_app/immutable/chunks/CqL6qkBr.js\",\"_app/immutable/chunks/CXNmKXog.js\",\"_app/immutable/chunks/NgHeIh7M.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Nav.BS7ocfio.css\",\"_app/immutable/assets/AdminNav.kezn9mMg.css\",\"_app/immutable/assets/8.D7iOD9XS.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;AAEA,MAAM,YAAY,mBAAmB,IAAI,GAAG,CAAC,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;AAC1E,MAAM,OAAO,GAAG;AAChB,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;AAClC,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE;AACzC,IAAI,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,YAAY;AAC/D,IAAI,MAAM,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC;AAC3C,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;AACvC,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,UAAU,CAAC,iBAAiB,CAAC,EAAE,CAAC;AACnF,IAAI;AACJ,IAAI,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC;AACvC,IAAI,IAAI,CAAC,IAAI,IAAI,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;AAClD,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,kBAAkB,EAAE,CAAC;AAChE,IAAI;AACJ,IAAI,IAAI,IAAI;AACZ,IAAI,IAAI;AACR,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE;AAC9B,IAAI,CAAC,CAAC,MAAM;AACZ,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,qBAAqB,EAAE,CAAC;AACnE,IAAI;AACJ,IAAI,IAAI,IAAI;AACZ,IAAI,IAAI;AACR,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;AAC7B,IAAI,CAAC,CAAC,MAAM;AACZ,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC;AAC5D,IAAI;AACJ,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;AAC9B,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,EAAE,EAAE,KAAK;AACjB,QAAQ,KAAK,EAAE;AACf,OAAO,CAAC;AACR,IAAI;AACJ,IAAI,MAAM,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC;AACtC,IAAI,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE;AAC5D,EAAE;AACF,CAAC;;;;;;;AClCW,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAiD,CAAC,EAAE;AAE/G,MAAC,SAAS,GAAG;AACb,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC;AAC5S,MAAC,WAAW,GAAG,CAAC,wCAAwC,CAAC,6CAA6C,CAAC,sCAAsC;AAC7I,MAAC,KAAK,GAAG;;;;"}