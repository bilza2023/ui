{"version":3,"file":"_server-ctyQOfPk.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/auth/login/_server.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { l as login } from \"../../../../../chunks/loginServices.js\";\nasync function POST({ request, cookies }) {\n  try {\n    const { email, password } = await request.json();\n    if (!email || !password) return json({ error: \"email and password required\" }, { status: 400 });\n    const { token, user } = await login(email, password);\n    cookies.set(\"token\", token, {\n      httpOnly: true,\n      sameSite: \"lax\",\n      secure: process.env.NODE_ENV === \"production\",\n      path: \"/\",\n      maxAge: 7 * 24 * 60 * 60\n    });\n    return json({ ok: true, token, user });\n  } catch (err) {\n    return json({ error: \"login failed\", detail: String(err?.message ?? err) }, { status: 401 });\n  }\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;;;AAEA,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,EAAE;AAC1C,EAAE,IAAI;AACN,IAAI,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACpD,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,6BAA6B,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACnG,IAAI,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,MAAM,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC;AACxD,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE;AAChC,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,QAAQ,EAAE,KAAK;AACrB,MAAM,MAAM,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY;AACnD,MAAM,IAAI,EAAE,GAAG;AACf,MAAM,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG;AAC5B,KAAK,CAAC;AACN,IAAI,OAAO,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;AAC1C,EAAE,CAAC,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,cAAc,EAAE,MAAM,EAAE,MAAM,CAAC,GAAG,EAAE,OAAO,IAAI,GAAG,CAAC,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAChG,EAAE;AACF;;;;"}