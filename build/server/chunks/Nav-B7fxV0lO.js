import { c as create_ssr_component, k as createEventDispatcher } from './ssr-DD2Fi2eU.js';
import './ssr2-6RDSickK.js';
import './state.svelte-BCeRBbkS.js';

const css = {
  code: ".nav.svelte-fet60v{display:flex;align-items:center;gap:10px;padding:10px 12px;background:#3d2e1e;color:#fff;border-bottom:1px solid rgba(255,255,255,0.12)}.brand.svelte-fet60v{font-weight:800;letter-spacing:.3px;color:#EAB308;text-decoration:none;margin-right:6px}.spacer.svelte-fet60v{flex:1}.muted.svelte-fet60v{opacity:0.7}.hello.svelte-fet60v{opacity:0.9;margin-right:4px}.pill.svelte-fet60v{padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.2);background:transparent;color:inherit;text-decoration:none;cursor:pointer}.pill.svelte-fet60v:hover{background:rgba(255,255,255,0.08)}",
  map: `{"version":3,"file":"Nav.svelte","sources":["Nav.svelte"],"sourcesContent":["<script>\\n    // @ts-nocheck\\n    import NavBtn from './NavBtn.svelte';\\n    import NavBtn2 from './NavBtn2.svelte';\\n    import Logo from './Logo.svelte';\\n    // import {checkLogin} from '../config/index';\\n\\n    import { goto } from '$app/navigation';\\n    \\n  import { onMount, createEventDispatcher } from 'svelte';\\n\\n  const dispatch = createEventDispatcher();\\n\\n  let loading = true;\\n  let user = null;        // { id, email } | null\\n  let unread = 0;\\n\\n  function authHeaders() {\\n    let t = null;\\n    try { t = localStorage.getItem('token'); } catch {}\\n    return t ? { authorization: \`Bearer \${t}\` } : {};\\n  }\\n\\n  async function verifyUser() {\\n    const res = await fetch('/api/auth/verify', {\\n      headers: { accept: 'application/json', ...authHeaders() }\\n    });\\n    if (!res.ok) return null;\\n    const data = await res.json().catch(() => ({}));\\n    return data?.user ?? null;\\n  }\\n\\n  async function fetchUnread() {\\n    // quick & dirty: reuse /studio JSON (unread only)\\n    const r = await fetch('/studio', {\\n      headers: { accept: 'application/json', ...authHeaders() }\\n    });\\n    if (!r.ok) return 0;\\n    const d = await r.json().catch(() => ({}));\\n    return Array.isArray(d?.messages) ? d.messages.length : 0;\\n  }\\n\\n  async function init() {\\n    loading = true;\\n    user = await verifyUser();\\n    unread = user ? await fetchUnread() : 0;\\n    loading = false;\\n    dispatch('authchange', { user, unread });\\n  }\\n\\n  onMount(init);\\n\\n  async function logout() {\\n    try { await fetch('/api/auth/logout', { method: 'POST' }); } catch {}\\n    try { localStorage.removeItem('token'); } catch {}\\n    user = null; unread = 0;\\n    dispatch('authchange', { user: null, unread: 0 });\\n    location.reload();\\n  }\\n<\/script>\\n\\n<nav class=\\"nav\\">\\n  <a class=\\"brand\\" href=\\"/\\">Taleem.help</a>\\n\\n<!-- \\n  <a href=\\"/studio\\" class=\\"link\\">\\n    Studio {#if user && unread > 0}<span class=\\"badge\\">{unread}</span>{/if}\\n  </a> -->\\n\\n  <span class=\\"spacer\\" />\\n\\n  {#if loading}\\n    <span class=\\"muted\\">…</span>\\n  {:else if user}\\n    <span class=\\"hello\\">Hi, {user.email}</span>\\n    <button class=\\"pill\\" on:click={logout}>Logout</button>\\n  {:else}\\n    <a href=\\"/login\\" class=\\"pill\\">Login</a>\\n    <a href=\\"/register\\" class=\\"pill\\">Register</a>\\n  {/if}\\n</nav>\\n\\n<style>\\n  .nav {\\n    display: flex; align-items: center; gap: 10px;\\n    padding: 10px 12px;\\n    background: #3d2e1e; color: #fff;\\n    border-bottom: 1px solid rgba(255,255,255,0.12);\\n  }\\n  .brand {\\n    font-weight: 800; letter-spacing: .3px;\\n    color: #EAB308; text-decoration: none; margin-right: 6px;\\n  }\\n  .link {\\n    color: inherit; text-decoration: none;\\n    padding: 6px 8px; border-radius: 8px;\\n  }\\n  .link:hover { background: rgba(255,255,255,0.06); }\\n  .spacer { flex: 1; }\\n  .muted { opacity: 0.7; }\\n  .hello { opacity: 0.9; margin-right: 4px; }\\n  .pill {\\n    padding: 6px 10px; border-radius: 999px;\\n    border: 1px solid rgba(255,255,255,0.2);\\n    background: transparent; color: inherit;\\n    text-decoration: none; cursor: pointer;\\n  }\\n  .pill:hover { background: rgba(255,255,255,0.08); }\\n  .badge {\\n    margin-left: 6px; padding: 0 6px; border-radius: 999px;\\n    background: #FACC15; color: #2b1a00; font-weight: 700;\\n  }\\n</style>\\n"],"names":[],"mappings":"AAmFE,kBAAK,CACH,OAAO,CAAE,IAAI,CAAE,WAAW,CAAE,MAAM,CAAE,GAAG,CAAE,IAAI,CAC7C,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,UAAU,CAAE,OAAO,CAAE,KAAK,CAAE,IAAI,CAChC,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAChD,CACA,oBAAO,CACL,WAAW,CAAE,GAAG,CAAE,cAAc,CAAE,IAAI,CACtC,KAAK,CAAE,OAAO,CAAE,eAAe,CAAE,IAAI,CAAE,YAAY,CAAE,GACvD,CAMA,qBAAQ,CAAE,IAAI,CAAE,CAAG,CACnB,oBAAO,CAAE,OAAO,CAAE,GAAK,CACvB,oBAAO,CAAE,OAAO,CAAE,GAAG,CAAE,YAAY,CAAE,GAAK,CAC1C,mBAAM,CACJ,OAAO,CAAE,GAAG,CAAC,IAAI,CAAE,aAAa,CAAE,KAAK,CACvC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CACvC,UAAU,CAAE,WAAW,CAAE,KAAK,CAAE,OAAO,CACvC,eAAe,CAAE,IAAI,CAAE,MAAM,CAAE,OACjC,CACA,mBAAK,MAAO,CAAE,UAAU,CAAE,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAG"}`
};
const Nav = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  createEventDispatcher();
  $$result.css.add(css);
  return `<nav class="nav svelte-fet60v"><a class="brand svelte-fet60v" href="/" data-svelte-h="svelte-19kz9hq">Taleem.help</a>  <span class="spacer svelte-fet60v"></span> ${`<span class="muted svelte-fet60v" data-svelte-h="svelte-9s1gh8">…</span>`} </nav>`;
});

export { Nav as N };
//# sourceMappingURL=Nav-B7fxV0lO.js.map
