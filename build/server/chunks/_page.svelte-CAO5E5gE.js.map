{"version":3,"file":"_page.svelte-CAO5E5gE.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/admin/work_desk/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component } from \"../../../../chunks/ssr.js\";\nimport \"howler\";\n/* empty css                                                            */\nimport \"katex\";\nimport \"@sveltejs/kit/internal\";\nimport \"../../../../chunks/exports.js\";\nimport \"../../../../chunks/state.svelte.js\";\nconst css = {\n  code: \".flex.svelte-1nm0fw4{display:flex}.items-center.svelte-1nm0fw4{align-items:center}.justify-center.svelte-1nm0fw4{justify-content:center}.h-full.svelte-1nm0fw4{height:100%}\",\n  map: `{\"version\":3,\"file\":\"+page.svelte\",\"sources\":[\"+page.svelte\"],\"sourcesContent\":[\"<script>\\\\n  import { onMount } from 'svelte';\\\\n  import { SveltePlayer } from '../../../lib/Player';\\\\n\\\\n  let deck        = [];       // slides[]\\\\n  let background  = {};       // bg config\\\\n  let soundUrl    = null;     // string | null\\\\n  let mounted     = false;    // gates the player\\\\n\\\\n  /** Absolute root for workbench assets served from /static */\\\\n  const BASE = '/decks_workbench/';\\\\n\\\\n  onMount(async () => {\\\\n\\\\n    /* 1️⃣ choose file ------------------------------------------------ */\\\\n    const params   = new URLSearchParams(window.location.search);\\\\n    const filename = params.get('filename') ?? 'index.json';\\\\n    const path     = \\`\\${BASE}\\${filename}\\`;\\\\n\\\\n    /* 2️⃣ dispatch by extension ------------------------------------- */\\\\n    if (filename.endsWith('.json')) {\\\\n      /* ---- pure JSON deck ---------------------------------------- */\\\\n      const res = await fetch(path);\\\\n      const obj = await res.json();\\\\n      deck       = obj.deck       ?? obj;      // handles {deck:[]} or plain []\\\\n      background = obj.background ?? {};\\\\n      soundUrl   = obj.soundUrl   ?? null;\\\\n\\\\n    } else if (filename.endsWith('.js')) {\\\\n      /* ---- authoring JS deck ------------------------------------- */\\\\n      /* dynamic import: Vite/SvelteKit treats /static files as ESM modules */\\\\n      const mod = await import(/* @vite-ignore */ path);\\\\n      if (typeof mod.defineDeck !== 'function')\\\\n        throw new Error('defineDeck() not found in module');\\\\n\\\\n      const { default: Deckbuilder } = await import('../../../lib/deckbuilder/Deckbuilder');\\\\n      const b  = new Deckbuilder();\\\\n      mod.defineDeck(b);\\\\n      const q  = b.build();\\\\n\\\\n      deck       = q.deck;\\\\n      background = q.background ?? {};\\\\n      soundUrl   = q.soundUrl   ?? null;\\\\n    } else {\\\\n      throw new Error('Unsupported file type: ' + filename);\\\\n    }\\\\n  mounted = true;\\\\n\\\\n  });\\\\n<\\/script>\\\\n\\\\n{#if mounted && deck.length}\\\\n  <SveltePlayer {deck} {background} {soundUrl} />\\\\n{:else}\\\\n  <div class=\\\\\"flex items-center justify-center h-full\\\\\">Loading…</div>\\\\n{/if}\\\\n\\\\n<style>\\\\n  .flex           { display: flex; }\\\\n  .items-center   { align-items: center; }\\\\n  .justify-center { justify-content: center; }\\\\n  .h-full         { height: 100%; }\\\\n</style>\\\\n\"],\"names\":[],\"mappings\":\"AA0DE,oBAAgB,CAAE,OAAO,CAAE,IAAM,CACjC,4BAAgB,CAAE,WAAW,CAAE,MAAQ,CACvC,8BAAgB,CAAE,eAAe,CAAE,MAAQ,CAC3C,sBAAgB,CAAE,MAAM,CAAE,IAAM\"}`\n};\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  $$result.css.add(css);\n  return `${`<div class=\"flex items-center justify-center h-full svelte-1nm0fw4\" data-svelte-h=\"svelte-1lu8seq\">Loading…</div>`}`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":";;;;;;AAOA,MAAM,GAAG,GAAG;AACZ,EAAE,IAAI,EAAE,6KAA6K;AACrL,EAAE,GAAG,EAAE,CAAC,qgFAAqgF;AAC7gF,CAAC;AACI,MAAC,IAAI,GAAG,oBAAoB,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,UAAU,EAAE,KAAK,KAAK;AAC5E,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC;AACvB,EAAE,OAAO,CAAC,EAAE,CAAC,iHAAiH,CAAC,CAAC,CAAC;AACjI,CAAC;;;;"}