{"version":3,"file":"_page.svelte-Dm14p2it.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/notes/_filename_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, j as createEventDispatcher, d as add_attribute, v as validate_component } from \"../../../../chunks/ssr.js\";\nimport { N as Nav } from \"../../../../chunks/Nav.js\";\nimport { F as Footer } from \"../../../../chunks/Footer.js\";\nimport { C as Comment } from \"../../../../chunks/Like.svelte_svelte_type_style_lang.js\";\nconst css = {\n  code: '.like-strip.svelte-1oz6eu2{display:flex;align-items:center;gap:10px;padding:8px 12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#E8D7BD}.like-chip.svelte-1oz6eu2{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:rgba(196,167,127,0.10);color:#E8D7BD;cursor:pointer;font:inherit;outline:none;transition:transform 120ms ease, background 120ms ease, border-color 120ms ease}.like-chip.svelte-1oz6eu2:hover{transform:translateY(-1px);border-color:#C4A77F}.like-chip.svelte-1oz6eu2:active{transform:translateY(0)}.like-chip[disabled].svelte-1oz6eu2{opacity:0.6;cursor:not-allowed}.heart.svelte-1oz6eu2{font-size:1rem;line-height:1;display:inline-block}.heart[data-state=\"on\"].svelte-1oz6eu2{color:#ff9fb2}.heart[data-state=\"off\"].svelte-1oz6eu2{color:#C4A77F}.label.svelte-1oz6eu2{font-weight:600;letter-spacing:0.2px}.status.svelte-1oz6eu2{font-size:0.9rem;opacity:0.9}.status.ok.svelte-1oz6eu2{color:#b7ffc2}.status.err.svelte-1oz6eu2{color:#ffb3b3}',\n  map: `{\"version\":3,\"file\":\"Like.svelte\",\"sources\":[\"Like.svelte\"],\"sourcesContent\":[\"\\\\n\\\\n<script>\\\\n  import { browser } from '$app/environment';\\\\n  import { onMount, createEventDispatcher } from 'svelte';\\\\n\\\\n  export let contentId;\\\\n  export let userId = null;\\\\n  export let anchorId = null;\\\\n  export let initialLiked = false;\\\\n  export let authToken = null;\\\\n\\\\n  const ENDPOINT = '/api/like';\\\\n  const dispatch = createEventDispatcher();\\\\n\\\\n  let liked = !!initialLiked;\\\\n  let loading = true;\\\\n  let sending = false;\\\\n  let err = '';\\\\n  let msg = '';\\\\n\\\\n  function getAuthToken() {\\\\n    if (!browser) return null;\\\\n    if (authToken) return authToken;\\\\n    try {\\\\n      return (\\\\n        localStorage.getItem('token') ||\\\\n        localStorage.getItem('jwt') ||\\\\n        localStorage.getItem('authToken') ||\\\\n        null\\\\n      );\\\\n    } catch { return null; }\\\\n  }\\\\n\\\\n  function reset() { err = ''; msg = ''; }\\\\n\\\\n  onMount(async () => {\\\\n    if (!browser || !contentId) { loading = false; return; }\\\\n    const token = getAuthToken();\\\\n    if (!token) { loading = false; liked = !!initialLiked; return; }\\\\n    try {\\\\n      const res = await fetch(\\`\\${ENDPOINT}?content_id=\\${encodeURIComponent(contentId)}\\`, {\\\\n        method: 'GET',\\\\n        headers: { authorization: \\`Bearer \\${token}\\` },\\\\n        credentials: 'same-origin',\\\\n        cache: 'no-store'\\\\n      });\\\\n      const data = await res.json().catch(() => ({}));\\\\n      if (res.ok && data?.ok) liked = !!data.liked;\\\\n      else if (res.status === 401) liked = !!initialLiked;\\\\n    } catch { liked = !!initialLiked; }\\\\n    finally { loading = false; }\\\\n  });\\\\n\\\\n  async function toggleLike() {\\\\n    reset();\\\\n    if (!contentId) { err = 'Missing contentId.'; return; }\\\\n    const token = getAuthToken();\\\\n    if (!token) { err = 'Please sign in to like.'; return; }\\\\n\\\\n    sending = true;\\\\n    try {\\\\n      const res = await fetch(ENDPOINT, {\\\\n        method: 'POST',\\\\n        headers: { 'content-type': 'application/json', authorization: \\`Bearer \\${token}\\` },\\\\n        body: JSON.stringify({ content_id: contentId }),\\\\n        credentials: 'same-origin'\\\\n      });\\\\n      const data = await res.json().catch(() => ({}));\\\\n      if (!res.ok || data?.ok === false) {\\\\n        const e = new Error(data?.message || \\`HTTP \\${res.status}\\`);\\\\n        e.code = data?.code || 'E_HTTP';\\\\n        throw e;\\\\n      }\\\\n      liked = !!data.liked;\\\\n      msg = liked ? 'Liked' : 'Removed';\\\\n      dispatch('changed', { liked });\\\\n    } catch (e) {\\\\n      err = e?.message || 'Could not toggle like.';\\\\n    } finally {\\\\n      sending = false;\\\\n    }\\\\n  }\\\\n<\\/script>\\\\n\\\\n<!-- One-line strip -->\\\\n<div class=\\\\\"like-strip\\\\\" aria-live=\\\\\"polite\\\\\">\\\\n  <button\\\\n    class=\\\\\"like-chip\\\\\"\\\\n    on:click={toggleLike}\\\\n    disabled={loading || sending || !contentId}\\\\n    aria-pressed={liked}\\\\n    title={liked ? 'Unlike' : 'Like'}\\\\n  >\\\\n    <span class=\\\\\"heart\\\\\" data-state={liked ? 'on' : 'off'}>\\\\n      {#if loading}•{/if}\\\\n      {#if !loading}{liked ? '♥' : '♡'}{/if}\\\\n    </span>\\\\n    <span class=\\\\\"label\\\\\">\\\\n      {#if loading}Loading…{/if}\\\\n      {#if !loading && sending}Saving…{/if}\\\\n      {#if !loading && !sending}{liked ? 'Liked' : 'Like'}{/if}\\\\n    </span>\\\\n  </button>\\\\n\\\\n  <!-- Inline status (stays on one line, subtle) -->\\\\n  {#if err}<span class=\\\\\"status err\\\\\">· {err}</span>{/if}\\\\n  {#if !err && msg}<span class=\\\\\"status ok\\\\\">· {msg}</span>{/if}\\\\n</div>\\\\n\\\\n<style>\\\\n  /* Strip container: single line, centered vertically */\\\\n  .like-strip {\\\\n    display: flex;\\\\n    align-items: center;\\\\n    gap: 10px;\\\\n    padding: 8px 12px;\\\\n    /* border-top: 1px solid #5a3a1a; */\\\\n    /* border-bottom: 1px solid #5a3a1a; */\\\\n    white-space: nowrap;\\\\n    overflow: hidden;\\\\n    text-overflow: ellipsis;\\\\n    color: #E8D7BD;\\\\n  }\\\\n\\\\n  /* Pill button */\\\\n  .like-chip {\\\\n    display: inline-flex;\\\\n    align-items: center;\\\\n    gap: 8px;\\\\n    padding: 6px 12px;\\\\n    border-radius: 999px;\\\\n    background: rgba(196,167,127,0.10); /* soft sand tint */\\\\n    /* border: 1px solid rgba(196,167,127,0.35); */\\\\n    color: #E8D7BD;\\\\n    cursor: pointer;\\\\n    font: inherit;\\\\n    outline: none;\\\\n    transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;\\\\n  }\\\\n  .like-chip:hover { transform: translateY(-1px); border-color: #C4A77F; }\\\\n  .like-chip:active { transform: translateY(0); }\\\\n  .like-chip[disabled] { opacity: 0.6; cursor: not-allowed; }\\\\n\\\\n  /* Heart icon state */\\\\n  .heart { font-size: 1rem; line-height: 1; display: inline-block; }\\\\n  .heart[data-state=\\\\\"on\\\\\"] { color: #ff9fb2; }   /* soft pink when liked */\\\\n  .heart[data-state=\\\\\"off\\\\\"] { color: #C4A77F; }  /* sand when not liked */\\\\n\\\\n  /* Text label */\\\\n  .label { font-weight: 600; letter-spacing: 0.2px; }\\\\n\\\\n  /* Inline status feedback */\\\\n  .status { font-size: 0.9rem; opacity: 0.9; }\\\\n  .status.ok { color: #b7ffc2; }\\\\n  .status.err { color: #ffb3b3; }\\\\n</style>\\\\n\"],\"names\":[],\"mappings\":\"AAgHE,0BAAY,CACV,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,IAAI,CACT,OAAO,CAAE,GAAG,CAAC,IAAI,CAGjB,WAAW,CAAE,MAAM,CACnB,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,KAAK,CAAE,OACT,CAGA,yBAAW,CACT,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GAAG,CACR,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,aAAa,CAAE,KAAK,CACpB,UAAU,CAAE,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAElC,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,CACf,IAAI,CAAE,OAAO,CACb,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,IAC9E,CACA,yBAAU,MAAO,CAAE,SAAS,CAAE,WAAW,IAAI,CAAC,CAAE,YAAY,CAAE,OAAS,CACvE,yBAAU,OAAQ,CAAE,SAAS,CAAE,WAAW,CAAC,CAAG,CAC9C,UAAU,CAAC,QAAQ,gBAAE,CAAE,OAAO,CAAE,GAAG,CAAE,MAAM,CAAE,WAAa,CAG1D,qBAAO,CAAE,SAAS,CAAE,IAAI,CAAE,WAAW,CAAE,CAAC,CAAE,OAAO,CAAE,YAAc,CACjE,MAAM,CAAC,UAAU,CAAC,IAAI,gBAAE,CAAE,KAAK,CAAE,OAAS,CAC1C,MAAM,CAAC,UAAU,CAAC,KAAK,gBAAE,CAAE,KAAK,CAAE,OAAS,CAG3C,qBAAO,CAAE,WAAW,CAAE,GAAG,CAAE,cAAc,CAAE,KAAO,CAGlD,sBAAQ,CAAE,SAAS,CAAE,MAAM,CAAE,OAAO,CAAE,GAAK,CAC3C,OAAO,kBAAI,CAAE,KAAK,CAAE,OAAS,CAC7B,OAAO,mBAAK,CAAE,KAAK,CAAE,OAAS\"}`\n};\nconst Like = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { contentId } = $$props;\n  let { userId = null } = $$props;\n  let { anchorId = null } = $$props;\n  let { initialLiked = false } = $$props;\n  let { authToken = null } = $$props;\n  createEventDispatcher();\n  let liked = !!initialLiked;\n  if ($$props.contentId === void 0 && $$bindings.contentId && contentId !== void 0) $$bindings.contentId(contentId);\n  if ($$props.userId === void 0 && $$bindings.userId && userId !== void 0) $$bindings.userId(userId);\n  if ($$props.anchorId === void 0 && $$bindings.anchorId && anchorId !== void 0) $$bindings.anchorId(anchorId);\n  if ($$props.initialLiked === void 0 && $$bindings.initialLiked && initialLiked !== void 0) $$bindings.initialLiked(initialLiked);\n  if ($$props.authToken === void 0 && $$bindings.authToken && authToken !== void 0) $$bindings.authToken(authToken);\n  $$result.css.add(css);\n  return ` <div class=\"like-strip svelte-1oz6eu2\" aria-live=\"polite\"><button class=\"like-chip svelte-1oz6eu2\" ${\"disabled\"}${add_attribute(\"aria-pressed\", liked, 0)}${add_attribute(\"title\", liked ? \"Unlike\" : \"Like\", 0)}><span class=\"heart svelte-1oz6eu2\"${add_attribute(\"data-state\", liked ? \"on\" : \"off\", 0)}>${`•`} ${``}</span> <span class=\"label svelte-1oz6eu2\">${`Loading…`} ${``} ${``}</span></button>  ${``} ${``} </div>`;\n});\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  let userId = null;\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);\n  return ` ${$$result.head += `<!-- HEAD_svelte-1rj4c7e_START --><link rel=\"stylesheet\" href=\"/data/css/notes.css\"><!-- HEAD_svelte-1rj4c7e_END -->`, \"\"}  ${validate_component(Nav, \"Nav\").$$render($$result, {}, {}, {})} <main class=\"notes\"><!-- HTML_TAG_START -->${data.html}<!-- HTML_TAG_END --></main> <hr>  ${validate_component(Like, \"Like\").$$render(\n    $$result,\n    {\n      anchorId: \"notesPage\",\n      userId,\n      contentId: data.filename\n    },\n    {},\n    {}\n  )}  <hr> <div class=\"mt-5 px-40\">${validate_component(Comment, \"Comment\").$$render($$result, { contentId: data.filename, userId }, {}, {})}</div> <br> <br> <br> <br> ${validate_component(Footer, \"Footer\").$$render($$result, {}, {}, {})}`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}