{"version":3,"file":"_server-DpomzEMW.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/media/_...path_/_server.js"],"sourcesContent":["import { createReadStream } from \"fs\";\nimport { stat } from \"fs/promises\";\nimport { join, resolve } from \"path\";\nconst ROOT = join(process.cwd(), \"assets\");\nasync function GET({ params }) {\n  try {\n    const filePath = safeJoin(ROOT, params.path);\n    const info = await stat(filePath);\n    if (!info.isFile()) return new Response(\"Not found\", { status: 404 });\n    return new Response(createReadStream(filePath), {\n      headers: {\n        \"Content-Type\": mime(filePath),\n        \"Content-Length\": String(info.size),\n        \"Accept-Ranges\": \"bytes\",\n        // basic seek support\n        \"Cache-Control\": \"public, max-age=31536000, immutable\"\n      }\n    });\n  } catch {\n    return new Response(\"Not found\", { status: 404 });\n  }\n}\nfunction safeJoin(root, reqPath) {\n  const full = resolve(join(root, reqPath));\n  if (!full.startsWith(resolve(root))) throw new Error(\"bad path\");\n  return full;\n}\nfunction mime(p) {\n  const ext = p.split(\".\").pop()?.toLowerCase() || \"\";\n  if (ext === \"png\") return \"image/png\";\n  if (ext === \"webp\") return \"image/webp\";\n  if (ext === \"jpg\" || ext === \"jpeg\") return \"image/jpeg\";\n  if (ext === \"svg\") return \"image/svg+xml\";\n  if (ext === \"mp3\") return \"audio/mpeg\";\n  if (ext === \"wav\") return \"audio/wav\";\n  if (ext === \"ogg\" || ext === \"oga\" || ext === \"opus\") return \"audio/ogg\";\n  return \"application/octet-stream\";\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;AAGA,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,CAAC;AAC1C,eAAe,GAAG,CAAC,EAAE,MAAM,EAAE,EAAE;AAC/B,EAAE,IAAI;AACN,IAAI,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC;AAChD,IAAI,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC;AACrC,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,OAAO,IAAI,QAAQ,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACzE,IAAI,OAAO,IAAI,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE;AACpD,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC;AACtC,QAAQ,gBAAgB,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;AAC3C,QAAQ,eAAe,EAAE,OAAO;AAChC;AACA,QAAQ,eAAe,EAAE;AACzB;AACA,KAAK,CAAC;AACN,EAAE,CAAC,CAAC,MAAM;AACV,IAAI,OAAO,IAAI,QAAQ,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AACrD,EAAE;AACF;AACA,SAAS,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE;AACjC,EAAE,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;AAC3C,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,EAAE,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC;AAClE,EAAE,OAAO,IAAI;AACb;AACA,SAAS,IAAI,CAAC,CAAC,EAAE;AACjB,EAAE,MAAM,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE;AACrD,EAAE,IAAI,GAAG,KAAK,KAAK,EAAE,OAAO,WAAW;AACvC,EAAE,IAAI,GAAG,KAAK,MAAM,EAAE,OAAO,YAAY;AACzC,EAAE,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,MAAM,EAAE,OAAO,YAAY;AAC1D,EAAE,IAAI,GAAG,KAAK,KAAK,EAAE,OAAO,eAAe;AAC3C,EAAE,IAAI,GAAG,KAAK,KAAK,EAAE,OAAO,YAAY;AACxC,EAAE,IAAI,GAAG,KAAK,KAAK,EAAE,OAAO,WAAW;AACvC,EAAE,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,KAAK,IAAI,GAAG,KAAK,MAAM,EAAE,OAAO,WAAW;AAC1E,EAAE,OAAO,0BAA0B;AACnC;;;;"}